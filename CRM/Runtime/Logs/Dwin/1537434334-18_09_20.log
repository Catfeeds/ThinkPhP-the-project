[ 2018-09-20T13:21:42+08:00 ] ::1 /Dwin/Stock/purchaseAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0620s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0200s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseauditindex','1537420902','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"auditor_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"pay_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"other_bill\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0840s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0280s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176375' ORDER BY id desc  LIMIT 1   [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0130s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 0 LIMIT 1   [ RunTime:0.0170s ]
SQL: SELECT a.id,a.cate,a.cate_name,a.stock_in_id,a.source_id,a.other_bill,from_unixtime(a.pay_time) pay_time,a.pay_condition,a.intercourse_subject,a.print_time,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) create_time,a.tips,a.auditor,a.auditor_name,a.audit_status,a.audit_tips,from_unixtime(a.audit_time) audit_time,a.keep_id,a.keep_name,a.charge_id,a.charge_name,a.account_id,a.account_name,a.check_id,a.check_name,a.business_id,a.business_name,from_unixtime(a.update_time) update_time,o.supplier_name,o.purchase_order_id,o.purchase_mode,o.purchase_type FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 0 ORDER BY stock_in_id asc LIMIT 0,25   [ RunTime:0.0240s ]

[ 2018-09-20T13:21:44+08:00 ] ::1 /Dwin/Stock/getStockInMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0140s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0200s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0320s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockinmaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockinmaterial','1537420904','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10279\"}') [ RunTime:0.1170s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0170s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176376' ORDER BY id desc  LIMIT 1   [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0290s ]
SQL: SELECT m.id,m.product_id,m.product_no,`num`,cm.product_name,unqualified_rep_pid fail_rep_id,rep_pid default_rep_id FROM crm_stock_material m left join crm_material cm on cm.product_id = m.product_id  WHERE m.type = 1 AND m.is_del = 0 AND m.source_id = '10279'  [ RunTime:0.0070s ]

[ 2018-09-20T13:21:56+08:00 ] ::1 /Dwin/Stock/showStockInRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0290s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinrecord','1537420916','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.0480s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176378' ORDER BY id desc  LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stock_in` [ RunTime:0.0330s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0210s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0430s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0090s ]
SQL: SELECT a.id,a.stock_in_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,task.task_id s_id FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id LEFT JOIN crm_stock_in_record record ON record.source_id = a.id  WHERE a.is_del = 0 AND a.audit_status = 3 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ord.purchase_order_id 
                              FROM crm_stock_in_purchase a 
                              LEFT JOIN crm_purchase_order ord ON ord.id = a.source_id 
                              LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                              WHERE a.audit_status = 3 AND a.is_del = 0 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ifnull(a.source_id,'无') 
                          FROM crm_stock_in_other a 
                          LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                          WHERE a.audit_status = 3 and a.is_del = 0 
                          ORDER BY cate_name desc 
                          LIMIT 0,10 [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0300s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0120s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0080s ]

[ 2018-09-20T13:22:07+08:00 ] ::1 /Dwin/Stock/showStockInRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0440s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0200s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.1280s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0390s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinrecord','1537420926','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.0820s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0300s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176379' ORDER BY id desc  LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stock_in` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0450s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0420s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0180s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0240s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0250s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0420s ]
SQL: SELECT a.id,a.stock_in_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,task.task_id s_id FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id LEFT JOIN crm_stock_in_record record ON record.source_id = a.id  WHERE a.is_del = 0 AND a.audit_status = 3 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ord.purchase_order_id 
                              FROM crm_stock_in_purchase a 
                              LEFT JOIN crm_purchase_order ord ON ord.id = a.source_id 
                              LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                              WHERE a.audit_status = 3 AND a.is_del = 0 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ifnull(a.source_id,'无') 
                          FROM crm_stock_in_other a 
                          LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                          WHERE a.audit_status = 3 and a.is_del = 0 
                          ORDER BY cate_name desc 
                          LIMIT 0,10 [ RunTime:0.1210s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0350s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0510s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.1080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0480s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.1380s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.1580s ]

[ 2018-09-20T13:22:17+08:00 ] ::1 /Dwin/Stock/showStockInRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0310s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinrecord','1537420936','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.0740s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176381' ORDER BY id desc  LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stock_in` [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0170s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0130s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0110s ]
SQL: SELECT a.id,a.stock_in_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,task.task_id s_id FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id LEFT JOIN crm_stock_in_record record ON record.source_id = a.id  WHERE a.is_del = 0 AND a.audit_status = 3 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ord.purchase_order_id 
                              FROM crm_stock_in_purchase a 
                              LEFT JOIN crm_purchase_order ord ON ord.id = a.source_id 
                              LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                              WHERE a.audit_status = 3 AND a.is_del = 0 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ifnull(a.source_id,'无') 
                          FROM crm_stock_in_other a 
                          LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                          WHERE a.audit_status = 3 and a.is_del = 0 
                          ORDER BY cate_name desc 
                          LIMIT 0,10 [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0160s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0040s ]

[ 2018-09-20T13:22:24+08:00 ] ::1 /Dwin/Stock/showStockInAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0350s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0180s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinauditindex','1537420944','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"type\":\"3\"}') [ RunTime:0.0920s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0290s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0170s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176383' ORDER BY id desc  LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0170s ]
SQL: SELECT a.id,a.stock_in_id,ifnull(task.task_id,'无源单') s_id,a.print_time,a.cate,a.cate_name,`batch`,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,a.production_line_name,a.production_group_name FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 ORDER BY stock_in_id desc LIMIT 0,10   [ RunTime:0.0120s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0210s ]

[ 2018-09-20T13:22:39+08:00 ] ::1 /Dwin/Stock/getStockInDetail
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0200s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0580s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0410s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.2470s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockindetail%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.1830s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.1040s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockindetail','1537420958','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"0000010158\"}') [ RunTime:0.1320s ]
SQL: show full fields from crm_stafflog [ RunTime:0.9331s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0730s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176384' ORDER BY id desc  LIMIT 1   [ RunTime:0.1470s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.1780s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('0000010158') AND a.is_del = 0  [ RunTime:0.0570s ]

[ 2018-09-20T13:22:41+08:00 ] ::1 /Dwin/Stock/getStockInDetail
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0180s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0760s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.2930s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockindetail%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.1480s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.2330s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockindetail','1537420960','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"0000010157\"}') [ RunTime:0.1190s ]
SQL: show full fields from crm_stafflog [ RunTime:0.1370s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.1770s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176385' ORDER BY id desc  LIMIT 1   [ RunTime:0.1980s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0810s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('0000010157') AND a.is_del = 0  [ RunTime:0.0390s ]

[ 2018-09-20T13:23:00+08:00 ] ::1 /Dwin/Stock/getStockInMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0300s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0340s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0380s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0640s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockinmaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0190s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockinmaterial','1537420979','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10279\"}') [ RunTime:0.0820s ]
SQL: show full fields from crm_stafflog [ RunTime:0.1120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0480s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176387' ORDER BY id desc  LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0230s ]
SQL: SELECT m.id,m.product_id,m.product_no,`num`,cm.product_name,unqualified_rep_pid fail_rep_id,rep_pid default_rep_id FROM crm_stock_material m left join crm_material cm on cm.product_id = m.product_id  WHERE m.type = 1 AND m.is_del = 0 AND m.source_id = '10279'  [ RunTime:0.0070s ]

[ 2018-09-20T13:23:01+08:00 ] ::1 /Dwin/Stock/purchaseAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0160s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0180s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseauditindex','1537420981','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"auditor_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"pay_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"other_bill\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0720s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0280s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176389' ORDER BY id desc  LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0240s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 0 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT a.id,a.cate,a.cate_name,a.stock_in_id,a.source_id,a.other_bill,from_unixtime(a.pay_time) pay_time,a.pay_condition,a.intercourse_subject,a.print_time,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) create_time,a.tips,a.auditor,a.auditor_name,a.audit_status,a.audit_tips,from_unixtime(a.audit_time) audit_time,a.keep_id,a.keep_name,a.charge_id,a.charge_name,a.account_id,a.account_name,a.check_id,a.check_name,a.business_id,a.business_name,from_unixtime(a.update_time) update_time,o.supplier_name,o.purchase_order_id,o.purchase_mode,o.purchase_type FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 0 ORDER BY stock_in_id asc LIMIT 0,25   [ RunTime:0.0360s ]

[ 2018-09-20T13:23:05+08:00 ] ::1 /Dwin/Stock/getStockInMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0330s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0240s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0370s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0420s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockinmaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockinmaterial','1537420985','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10279\"}') [ RunTime:0.0710s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0220s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176390' ORDER BY id desc  LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0130s ]
SQL: SELECT m.id,m.product_id,m.product_no,`num`,cm.product_name,unqualified_rep_pid fail_rep_id,rep_pid default_rep_id FROM crm_stock_material m left join crm_material cm on cm.product_id = m.product_id  WHERE m.type = 1 AND m.is_del = 0 AND m.source_id = '10279'  [ RunTime:0.0200s ]

[ 2018-09-20T13:23:06+08:00 ] ::1 /Dwin/Stock/addRecordWithPurchaseStockIn.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0220s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0790s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/addrecordwithpurchasestockin%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0380s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0520s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/addrecordwithpurchasestockin','1537420986','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"flag\":\"get\",\"id\":\"10279\"}') [ RunTime:0.0930s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0190s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176392' ORDER BY id desc  LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0080s ]
SQL: SELECT a.id,a.cate,a.cate_name,a.stock_in_id,a.source_id,a.other_bill,from_unixtime(a.pay_time) pay_time,a.pay_condition,a.intercourse_subject,a.print_time,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) create_time,a.tips,a.auditor,a.auditor_name,a.audit_status,a.audit_tips,from_unixtime(a.audit_time) audit_time,a.keep_id,a.keep_name,a.charge_id,a.charge_name,a.account_id,a.account_name,a.check_id,a.check_name,a.business_id,a.business_name,from_unixtime(a.update_time) update_time,o.supplier_name,o.purchase_order_id,o.purchase_mode,o.purchase_type FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.id = '10279' LIMIT 1   [ RunTime:0.0070s ]
SQL: SELECT m.id,m.product_id,m.product_no,m.num -ifnull(sum(record.num),0) num,cm.product_name,m.unqualified_rep_pid fail_rep_id,m.rep_pid default_rep_id,rep1.repertory_name fail_rep_name,rep2.repertory_name default_rep_name FROM crm_stock_material m LEFT JOIN crm_material cm on cm.product_id = m.product_id LEFT JOIN crm_stock_in_record record ON record.source_pid = m.id LEFT JOIN crm_repertorylist rep1 ON rep1.rep_id = m.unqualified_rep_pid LEFT JOIN crm_repertorylist rep2 ON rep2.rep_id = m.rep_pid  WHERE m.is_del = 0 AND m.source_id = '10279' GROUP BY m.product_id  [ RunTime:0.0160s ]

[ 2018-09-20T13:24:55+08:00 ] ::1 /Dwin/Stock/addRecordWithPurchaseStockIn.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0730s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/addrecordwithpurchasestockin%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0390s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/addrecordwithpurchasestockin','1537421094','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"flag\":\"post\",\"stockId\":\"10279\",\"material\":[{\"id\":\"138\",\"product_id\":\"209\",\"product_no\":\"00209\",\"num\":\"100\",\"product_name\":\"LTM80480S070-01WTBL\",\"fail_rep_id\":\"K20\",\"default_rep_id\":\"K001\",\"fail_rep_name\":\"\\u4f9b\\u5e94\\u5546\\u5f80\\u6765\\u5e93\",\"default_rep_name\":\"\\u5143\\u5668\\u4ef6A\\u5e93\",\"success_num\":\"100\",\"fail_num\":\"0\"},{\"id\":\"139\",\"product_id\":\"15521\",\"product_no\":\"00141\",\"num\":\"3\",\"product_name\":\"DW100A1\",\"fail_rep_id\":\"K20\",\"default_rep_id\":\"K001\",\"fail_rep_name\":\"\\u4f9b\\u5e94\\u5546\\u5f80\\u6765\\u5e93\",\"default_rep_name\":\"\\u5143\\u5668\\u4ef6A\\u5e93\",\"success_num\":\"3\",\"fail_num\":\"0\"}]}') [ RunTime:0.0890s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0400s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0220s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176393' ORDER BY id desc  LIMIT 1   [ RunTime:0.0530s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0410s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0300s ]
SQL: SELECT * FROM `crm_stock_in_purchase` WHERE `id` = 10279 LIMIT 1   [ RunTime:0.0200s ]
SQL: SELECT mat.id,mat.source_id,mat.product_id,mat.num insert_num,mat.rep_pid insert_rep_id,task.batch,task.cate cate_id FROM crm_stock_material mat LEFT JOIN crm_stock_in_purchase task ON task.id = mat.source_id  WHERE mat.source_id = '10279'  [ RunTime:0.0270s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0280s ]
SQL: SELECT * FROM `crm_stock_in_purchase` WHERE `id` = 10279 LIMIT 1   [ RunTime:0.0200s ]
SQL: INSERT INTO `crm_stock_in_record` (`source_id`,`source_pid`,`product_id`,`num`,`cate_id`,`repertory_id`,`batch`,`create_time`,`update_time`,`status`) VALUES ('10279','138','209','100','8','K001','1','1537421095','1537421095','0'),('10279','139','15521','3','8','K001','1','1537421095','1537421095','0') [ RunTime:0.0520s ]
SQL: show full fields from crm_stock_in_record [ RunTime:0.0310s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0450s ]
SQL: SELECT * FROM `crm_stock_in_record` WHERE `id` <= '38' ORDER BY id desc  LIMIT 2   [ RunTime:0.0350s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Stock/addRecordWithPurchaseStockIn',
                                        'crm_stock_in_record',
                                        '{"id":"","source_id":"出入库源单主键id crm_stock_in主键id","source_pid":"crm_stock_material表主键id","product_id":"物料表主键","num":"制单出入库数量","cate_id":"入库分类（冗余，跟stock_in类型一致）","repertory_id":"入库库房id","create_time":"创建时间","update_time":"更新时间","status":"审核状态：0-未审核 1-不合格 2-通过,已入库","is_del":"是否被删除 0 未删除 1 已删除","batch":"入库批次"}',
                                        1,
                                        '0000000038,0000000037',
                                        '[{"id":"0000000038","source_id":"10279","source_pid":"138","product_id":"209","num":"100","cate_id":"8","repertory_id":"K001","create_time":"1537421095","update_time":"1537421095","status":"0","is_del":"0","batch":"1"},{"id":"0000000037","source_id":"10269","source_pid":"136","product_id":"146","num":"30","cate_id":"8","repertory_id":"K004","create_time":"1536997829","update_time":"1536997829","status":"0","is_del":"0","batch":"2"}]',
                                        1537421095
                                    ); [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0470s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0230s ]
SQL: SELECT * FROM `crm_stock_in_purchase` WHERE `id` = '10279'  [ RunTime:0.0270s ]
SQL: UPDATE `crm_stock_in_purchase` SET `update_time`='1537421095',`audit_status`='2' WHERE `id` = '10279' [ RunTime:0.0190s ]
SQL: show full fields from crm_stock_in_purchase [ RunTime:0.0300s ]
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 600 行.
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 600 行.
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `before_data`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Stock/addRecordWithPurchaseStockIn',
                                        'crm_stock_in_purchase',
                                        '{"id":"主键","cate":"*分类","cate_name":"*分类名","stock_in_id":"*入库单编号","source_id":"*订单表主键","other_bill":"对方单据","pay_time":"付款时间","pay_condition":"付款条件","Intercourse_subject":"往来科目","print_time":"*打印次数","batch":"*入库批次","create_id":"*制单人id","create_name":"*制单人姓名","create_time":"*创建时间","tips":"*入库备注","auditor":"*审核人ID","auditor_name":"*审核人姓名","audit_status":"*0-为审核 1-审核不合格 2-审核合格","audit_tips":"*审核备注","audit_time":"*审核时间","keep_id":"*保管人ID","keep_name":"*保管人姓名","charge_id":"负责人id","charge_name":"负责人姓名","check_id":"*验收人id","check_name":"*验收人姓名","update_time":"*更新时间","is_del":"0-未删除 1-已删除","account_id":"记账人id","account_name":"记账人姓名","business_id":"业务员id","business_name":"业务员姓名"}',
                                        2,
                                        '10279',
                                        '[{"id":"10279","cate":"8","cate_name":"外购入库","stock_in_id":"WGRK-10279","source_id":"10017","other_bill":"0791","pay_time":"1537545600","pay_condition":"","intercourse_subject":"","print_time":"0","batch":"1","create_id":"394","create_name":"zengyongtai","create_time":"1537420325","tips":"","auditor":"392","auditor_name":"李炫龙","audit_status":"0","audit_tips":"","audit_time":null,"keep_id":"198","keep_name":"邓文","charge_id":null,"charge_name":"","check_id":"252","check_name":"钱志伟","update_time":"1537420325","is_del":"0","account_id":null,"account_name":"","business_id":null,"business_name":""}]',
                                        '[{"update_time":1537421095,"audit_status":2,"id":["EQ","10279"],"cate":"8","cate_name":"外购入库","stock_in_id":"WGRK-10279","source_id":"10017","other_bill":"0791","pay_time":"1537545600","pay_condition":"","intercourse_subject":"","print_time":"0","batch":"1","create_id":"394","create_name":"zengyongtai","create_time":"1537420325","tips":"","auditor":"392","auditor_name":"李炫龙","audit_tips":"","audit_time":null,"keep_id":"198","keep_name":"邓文","charge_id":null,"charge_name":"","check_id":"252","check_name":"钱志伟","is_del":"0","account_id":null,"account_name":"","business_id":null,"business_name":""}]',
                                        1537421095
                                    ); [ RunTime:0.0340s ]

[ 2018-09-20T13:28:22+08:00 ] ::1 /Dwin/Stock/addRecordWithPurchaseStockIn?id=10279
ERR: SQLSTATE[HY000] [2002] ӷһʱûȷ𸴻ӵûзӦӳʧܡ


[ 2018-09-20T13:28:36+08:00 ] ::1 /Dwin/Index/checkPostInfo
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0150s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0460s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%index/checkpostinfo%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`auth_rule_name`,`level`,`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('系统检测菜单权限',NULL,'394','::1','index/checkpostinfo','1537421316','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"flag\":\"1\"}') [ RunTime:0.0880s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176399' ORDER BY id desc  LIMIT 1   [ RunTime:0.0200s ]

[ 2018-09-20T13:28:39+08:00 ] ::1 /Dwin/Stock/addRecordWithPurchaseStockIn.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0170s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.9051s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0170s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.2610s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/addrecordwithpurchasestockin%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.9111s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/addrecordwithpurchasestockin','1537421317','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"flag\":\"get\",\"id\":\"10279\"}') [ RunTime:0.0710s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0290s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.9181s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176400' ORDER BY id desc  LIMIT 1   [ RunTime:0.0280s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0300s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0410s ]
SQL: SELECT a.id,a.cate,a.cate_name,a.stock_in_id,a.source_id,a.other_bill,from_unixtime(a.pay_time) pay_time,a.pay_condition,a.intercourse_subject,a.print_time,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) create_time,a.tips,a.auditor,a.auditor_name,a.audit_status,a.audit_tips,from_unixtime(a.audit_time) audit_time,a.keep_id,a.keep_name,a.charge_id,a.charge_name,a.account_id,a.account_name,a.check_id,a.check_name,a.business_id,a.business_name,from_unixtime(a.update_time) update_time,o.supplier_name,o.purchase_order_id,o.purchase_mode,o.purchase_type FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.id = '10279' LIMIT 1   [ RunTime:0.0410s ]
SQL: SELECT m.id,m.product_id,m.product_no,m.num -ifnull(sum(record.num),0) num,cm.product_name,m.unqualified_rep_pid fail_rep_id,m.rep_pid default_rep_id,rep1.repertory_name fail_rep_name,rep2.repertory_name default_rep_name FROM crm_stock_material m LEFT JOIN crm_material cm on cm.product_id = m.product_id LEFT JOIN crm_stock_in_record record ON record.source_pid = m.id LEFT JOIN crm_repertorylist rep1 ON rep1.rep_id = m.unqualified_rep_pid LEFT JOIN crm_repertorylist rep2 ON rep2.rep_id = m.rep_pid  WHERE m.is_del = 0 AND m.source_id = '10279' GROUP BY m.product_id  [ RunTime:0.0230s ]

[ 2018-09-20T13:28:41+08:00 ] ::1 /Dwin/Index/getOrderMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.1390s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%index/getordermsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`auth_rule_name`,`level`,`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('系统检测不合格订单',NULL,'394','::1','index/getordermsg','1537421320','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','[]') [ RunTime:0.7000s ]
SQL: show full fields from crm_stafflog [ RunTime:0.2430s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0170s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176401' ORDER BY id desc  LIMIT 1   [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_orderform` [ RunTime:0.0280s ]
SQL: SELECT `cus_name` FROM `crm_orderform` WHERE `picid` = '394' AND `check_status` = '2' AND `is_del` = 0  [ RunTime:0.0290s ]

[ 2018-09-20T13:28:48+08:00 ] ::1 /Dwin/Stock/purchaseAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0180s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseauditindex','1537421325','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"auditor_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"pay_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"other_bill\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.3950s ]
SQL: show full fields from crm_stafflog [ RunTime:0.2140s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176403' ORDER BY id desc  LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 0 LIMIT 1   [ RunTime:0.0190s ]
SQL: SELECT a.id,a.cate,a.cate_name,a.stock_in_id,a.source_id,a.other_bill,from_unixtime(a.pay_time) pay_time,a.pay_condition,a.intercourse_subject,a.print_time,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) create_time,a.tips,a.auditor,a.auditor_name,a.audit_status,a.audit_tips,from_unixtime(a.audit_time) audit_time,a.keep_id,a.keep_name,a.charge_id,a.charge_name,a.account_id,a.account_name,a.check_id,a.check_name,a.business_id,a.business_name,from_unixtime(a.update_time) update_time,o.supplier_name,o.purchase_order_id,o.purchase_mode,o.purchase_type FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 0 ORDER BY stock_in_id asc LIMIT 0,25   [ RunTime:2.3711s ]

[ 2018-09-20T13:28:56+08:00 ] ::1 /Dwin/Stock/showStockInAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0210s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.5330s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0230s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinauditindex','1537421334','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"type\":\"3\"}') [ RunTime:0.6950s ]
SQL: show full fields from crm_stafflog [ RunTime:0.2370s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0170s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176405' ORDER BY id desc  LIMIT 1   [ RunTime:0.0330s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0150s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0070s ]
SQL: SELECT a.id,a.stock_in_id,ifnull(task.task_id,'无源单') s_id,a.print_time,a.cate,a.cate_name,`batch`,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,a.production_line_name,a.production_group_name FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 ORDER BY stock_in_id desc LIMIT 0,10   [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0060s ]

[ 2018-09-20T13:29:05+08:00 ] ::1 /Dwin/Stock/purchaseOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0360s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseorderindex','1537421344','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.3530s ]
SQL: show full fields from crm_stafflog [ RunTime:0.2340s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176407' ORDER BY id desc  LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0250s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 LIMIT 1   [ RunTime:0.0160s ]
SQL: SELECT a.id,a.supplier_name,a.purchase_order_id,from_unixtime(a.create_time) create_time,a.create_id,u.name create_name,from_unixtime(a.update_time) update_time,from_unixtime(a.order_time) order_time,a.billing_method,a.purchase_mode,a.purchase_type,c.contract_id,a.audit_status,a.stock_status FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 ORDER BY order_time asc LIMIT 0,25   [ RunTime:0.0200s ]

[ 2018-09-20T13:29:07+08:00 ] ::1 /Dwin/Stock/getOrderProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0180s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0300s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getorderproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getorderproduct','1537421347','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10017\"}') [ RunTime:0.0880s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176408' ORDER BY id desc  LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0370s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10017' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0160s ]

[ 2018-09-20T13:29:11+08:00 ] ::1 /Dwin/Stock/getSelectInfo.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0200s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0220s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getselectinfo%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getselectinfo','1537421350','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','[]') [ RunTime:0.0740s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0350s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176410' ORDER BY id desc  LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_repertorylist` [ RunTime:0.0080s ]
SQL: SELECT rep_id warehouse_id,repertory_name warehouse_name,concat_ws(',',`warehouse_manager_id`,logistics_staff_id) auditor_ids FROM `crm_repertorylist` WHERE `cate_flag` = '1'  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_staff` [ RunTime:0.0090s ]
SQL: SELECT id auditor_id,name auditor_name FROM `crm_staff` WHERE `id` IN ('241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393')  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_role` [ RunTime:0.0290s ]
SQL: SELECT `role_id`,`staff_ids` FROM `crm_auth_role` WHERE `role_id` IN (1,2,3,8,13,16,34,37,40,43,44,45,46,47,48,49,51,21)  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT `id`,`name` FROM `crm_staff` WHERE `id` IN ('65','1','394','395','223','','197','214','227','228','229','198','199','200','201','202','203','204','205','216','','226','392','241','242','243','244','245','246','247','248','249','250','251','252','253','254','233','235','236','237','238','239','240','234','')  [ RunTime:0.0080s ]

[ 2018-09-20T13:29:19+08:00 ] ::1 /Dwin/Stock/purchaseOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0320s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0810s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0830s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseorderindex','1537421359','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0760s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176411' ORDER BY id desc  LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.1110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT a.id,a.supplier_name,a.purchase_order_id,from_unixtime(a.create_time) create_time,a.create_id,u.name create_name,from_unixtime(a.update_time) update_time,from_unixtime(a.order_time) order_time,a.billing_method,a.purchase_mode,a.purchase_type,c.contract_id,a.audit_status,a.stock_status FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 ORDER BY order_time asc LIMIT 0,25   [ RunTime:0.0140s ]

[ 2018-09-20T13:29:25+08:00 ] ::1 /Dwin/Stock/showStockInRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinrecord','1537421364','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.0820s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176413' ORDER BY id desc  LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_in` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0250s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0100s ]
SQL: SELECT a.id,a.stock_in_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,task.task_id s_id FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id LEFT JOIN crm_stock_in_record record ON record.source_id = a.id  WHERE a.is_del = 0 AND a.audit_status = 3 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ord.purchase_order_id 
                              FROM crm_stock_in_purchase a 
                              LEFT JOIN crm_purchase_order ord ON ord.id = a.source_id 
                              LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                              WHERE a.audit_status = 3 AND a.is_del = 0 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ifnull(a.source_id,'无') 
                          FROM crm_stock_in_other a 
                          LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                          WHERE a.audit_status = 3 and a.is_del = 0 
                          ORDER BY cate_name desc 
                          LIMIT 0,10 [ RunTime:0.0340s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0200s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0080s ]

[ 2018-09-20T13:29:37+08:00 ] ::1 /Dwin/Stock/purchaseAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0290s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0240s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0240s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0460s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0190s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseauditindex','1537421376','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"auditor_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"pay_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"other_bill\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.1280s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176415' ORDER BY id desc  LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0150s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 0 LIMIT 1   [ RunTime:0.0210s ]
SQL: SELECT a.id,a.cate,a.cate_name,a.stock_in_id,a.source_id,a.other_bill,from_unixtime(a.pay_time) pay_time,a.pay_condition,a.intercourse_subject,a.print_time,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) create_time,a.tips,a.auditor,a.auditor_name,a.audit_status,a.audit_tips,from_unixtime(a.audit_time) audit_time,a.keep_id,a.keep_name,a.charge_id,a.charge_name,a.account_id,a.account_name,a.check_id,a.check_name,a.business_id,a.business_name,from_unixtime(a.update_time) update_time,o.supplier_name,o.purchase_order_id,o.purchase_mode,o.purchase_type FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 0 ORDER BY stock_in_id asc LIMIT 0,25   [ RunTime:0.0330s ]

[ 2018-09-20T13:30:01+08:00 ] ::1 /Dwin/Stock/showStockInAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.3230s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.2550s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinauditindex','1537421399','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"type\":\"3\"}') [ RunTime:1.0591s ]
SQL: show full fields from crm_stafflog [ RunTime:0.2480s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176417' ORDER BY id desc  LIMIT 1   [ RunTime:0.0450s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0130s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0110s ]
SQL: SELECT a.id,a.stock_in_id,ifnull(task.task_id,'无源单') s_id,a.print_time,a.cate,a.cate_name,`batch`,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,a.production_line_name,a.production_group_name FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 ORDER BY stock_in_id desc LIMIT 0,10   [ RunTime:0.0120s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.3450s ]

[ 2018-09-20T13:30:06+08:00 ] ::1 /Dwin/Stock/showStockInAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0930s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinauditindex','1537421405','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"type\":\"8\"}') [ RunTime:0.0730s ]
SQL: show full fields from crm_stafflog [ RunTime:0.5290s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176418' ORDER BY id desc  LIMIT 1   [ RunTime:0.0200s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0160s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT a.id,a.stock_in_id,ifnull(o.purchase_order_id,'无源单') s_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,a.other_bill FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 ORDER BY stock_in_id desc LIMIT 0,10   [ RunTime:0.0060s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0040s ]

[ 2018-09-20T13:30:13+08:00 ] ::1 /Dwin/Stock/getStockInDetail
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.009001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0470s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockindetail%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockindetail','1537421412','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10279\"}') [ RunTime:0.9261s ]
SQL: show full fields from crm_stafflog [ RunTime:0.4040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0560s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176419' ORDER BY id desc  LIMIT 1   [ RunTime:0.0500s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0410s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('10279') AND a.is_del = 0  [ RunTime:0.0440s ]

[ 2018-09-20T13:30:45+08:00 ] ::1 /Dwin/Stock/checkStockInRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.003001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.004001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0390s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/checkstockinrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0310s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0520s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/checkstockinrecord','1537421444','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"status\":\"1\",\"type\":\"8\",\"params\":[{\"id\":\"10279\",\"stock_in_id\":\"WGRK-10279\",\"s_id\":\"CGD-10017\",\"cate\":\"8\",\"print_time\":\"0\",\"cate_name\":\"\\u5916\\u8d2d\\u5165\\u5e93\",\"batch\":\"1\",\"create_id\":\"394\",\"create_name\":\"zengyongtai\",\"c_time\":\"2018-09-20 13:12:05\",\"update_time\":\"2018-09-20 13:24:55\",\"tips\":\"\",\"audit_status\":\"2\",\"keep_id\":\"198\",\"keep_name\":\"\\u9093\\u6587\",\"check_id\":\"252\",\"check_name\":\"\\u94b1\\u5fd7\\u4f1f\",\"other_bill\":\"0791\"}]}') [ RunTime:0.0790s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0200s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176420' ORDER BY id desc  LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stock_audit` [ RunTime:0.0560s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_stock_in_purchase` WHERE `id` = '10279' LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_stock_in_purchase` WHERE `id` = '10279'  [ RunTime:0.0090s ]
SQL: UPDATE `crm_stock_in_purchase` SET `audit_status`='3',`update_time`='1537421444' WHERE `id` = '10279' [ RunTime:0.0100s ]
SQL: show full fields from crm_stock_in_purchase [ RunTime:0.0200s ]
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 600 行.
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 600 行.
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `before_data`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Stock/checkStockInRecord',
                                        'crm_stock_in_purchase',
                                        '{"id":"主键","cate":"*分类","cate_name":"*分类名","stock_in_id":"*入库单编号","source_id":"*订单表主键","other_bill":"对方单据","pay_time":"付款时间","pay_condition":"付款条件","Intercourse_subject":"往来科目","print_time":"*打印次数","batch":"*入库批次","create_id":"*制单人id","create_name":"*制单人姓名","create_time":"*创建时间","tips":"*入库备注","auditor":"*审核人ID","auditor_name":"*审核人姓名","audit_status":"*0-为审核 1-审核不合格 2-审核合格","audit_tips":"*审核备注","audit_time":"*审核时间","keep_id":"*保管人ID","keep_name":"*保管人姓名","charge_id":"负责人id","charge_name":"负责人姓名","check_id":"*验收人id","check_name":"*验收人姓名","update_time":"*更新时间","is_del":"0-未删除 1-已删除","account_id":"记账人id","account_name":"记账人姓名","business_id":"业务员id","business_name":"业务员姓名"}',
                                        2,
                                        '10279',
                                        '[{"id":"10279","cate":"8","cate_name":"外购入库","stock_in_id":"WGRK-10279","source_id":"10017","other_bill":"0791","pay_time":"1537545600","pay_condition":"","intercourse_subject":"","print_time":"0","batch":"1","create_id":"394","create_name":"zengyongtai","create_time":"1537420325","tips":"","auditor":"392","auditor_name":"李炫龙","audit_status":"2","audit_tips":"","audit_time":null,"keep_id":"198","keep_name":"邓文","charge_id":null,"charge_name":"","check_id":"252","check_name":"钱志伟","update_time":"1537421095","is_del":"0","account_id":null,"account_name":"","business_id":null,"business_name":""}]',
                                        '[{"audit_status":3,"update_time":1537421444,"id":["eq","10279"],"cate":"8","cate_name":"外购入库","stock_in_id":"WGRK-10279","source_id":"10017","other_bill":"0791","pay_time":"1537545600","pay_condition":"","intercourse_subject":"","print_time":"0","batch":"1","create_id":"394","create_name":"zengyongtai","create_time":"1537420325","tips":"","auditor":"392","auditor_name":"李炫龙","audit_tips":"","audit_time":null,"keep_id":"198","keep_name":"邓文","charge_id":null,"charge_name":"","check_id":"252","check_name":"钱志伟","is_del":"0","account_id":null,"account_name":"","business_id":null,"business_name":""}]',
                                        1537421444
                                    ); [ RunTime:0.0410s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stock_in_record` WHERE `source_id` = '10279' AND `is_del` = 0  [ RunTime:0.0110s ]
SQL: UPDATE `crm_stock_in_record` SET `status`='1',`update_time`='1537421444' WHERE `source_id` = '10279' AND `is_del` = 0 [ RunTime:0.0080s ]
SQL: show full fields from crm_stock_in_record [ RunTime:0.0200s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `before_data`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Stock/checkStockInRecord',
                                        'crm_stock_in_record',
                                        '{"id":"","source_id":"出入库源单主键id crm_stock_in主键id","source_pid":"crm_stock_material表主键id","product_id":"物料表主键","num":"制单出入库数量","cate_id":"入库分类（冗余，跟stock_in类型一致）","repertory_id":"入库库房id","create_time":"创建时间","update_time":"更新时间","status":"审核状态：0-未审核 1-不合格 2-通过,已入库","is_del":"是否被删除 0 未删除 1 已删除","batch":"入库批次"}',
                                        2,
                                        '0000000038,0000000039',
                                        '[{"id":"0000000038","source_id":"10279","source_pid":"138","product_id":"209","num":"100","cate_id":"8","repertory_id":"K001","create_time":"1537421095","update_time":"1537421095","status":"0","is_del":"0","batch":"1"},{"id":"0000000039","source_id":"10279","source_pid":"139","product_id":"15521","num":"3","cate_id":"8","repertory_id":"K001","create_time":"1537421095","update_time":"1537421095","status":"0","is_del":"0","batch":"1"}]',
                                        '[{"status":1,"update_time":1537421444,"id":"0000000038","source_id":"10279","source_pid":"138","product_id":"209","num":"100","cate_id":"8","repertory_id":"K001","create_time":"1537421095","is_del":"0","batch":"1"},{"status":1,"update_time":1537421444,"id":"0000000039","source_id":"10279","source_pid":"139","product_id":"15521","num":"3","cate_id":"8","repertory_id":"K001","create_time":"1537421095","is_del":"0","batch":"1"}]',
                                        1537421444
                                    ); [ RunTime:0.0080s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('10279') AND a.is_del = 0  [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stock` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_stock` WHERE `product_id` = '209' AND `warehouse_number` = 'K001' LIMIT 1   [ RunTime:0.0040s ]
SQL: INSERT INTO `crm_stock` (`product_id`,`warehouse_number`,`warehouse_name`,`update_time`) VALUES ('209','K001','元器件A库','1537421444') [ RunTime:0.0140s ]
SQL: show full fields from crm_stock [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stock` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_stock` WHERE `id` <= '18803' ORDER BY id desc  LIMIT 1   [ RunTime:0.0120s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Stock/checkStockInRecord',
                                        'crm_stock',
                                        '{"id":"主键id","product_id":"物料表主键ID","warehouse_number":"仓库编号","warehouse_name":"仓库名","stock_number":"可用库存","o_audit":"锁库数量（待出库，下销货单，领料单，其它出库单后增加）","i_audit":"待入库","out_processing":"出库中（提交出库记录，数量增加，对应待出库数量减少）","update_time":"更新时间","tips":"备注"}',
                                        1,
                                        '18803',
                                        '[{"id":"18803","product_id":"209","warehouse_number":"K001","warehouse_name":"元器件A库","stock_number":"0","o_audit":"0","i_audit":"0","out_processing":"0","update_time":"1537421444","tips":null}]',
                                        1537421444
                                    ); [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock` [ RunTime:0.0240s ]
SQL: SELECT * FROM `crm_stock` WHERE `product_id` = '209' AND `warehouse_number` = 'K001'  [ RunTime:0.0040s ]
SQL: UPDATE `crm_stock` SET `stock_number`=stock_number + 100,`update_time`='1537421444' WHERE `product_id` = '209' AND `warehouse_number` = 'K001' [ RunTime:0.0220s ]
SQL: show full fields from crm_stock [ RunTime:0.0210s ]
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 600 行.
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 600 行.
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `before_data`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Stock/checkStockInRecord',
                                        'crm_stock',
                                        '{"id":"主键id","product_id":"物料表主键ID","warehouse_number":"仓库编号","warehouse_name":"仓库名","stock_number":"可用库存","o_audit":"锁库数量（待出库，下销货单，领料单，其它出库单后增加）","i_audit":"待入库","out_processing":"出库中（提交出库记录，数量增加，对应待出库数量减少）","update_time":"更新时间","tips":"备注"}',
                                        2,
                                        '18803',
                                        '[{"id":"18803","product_id":"209","warehouse_number":"K001","warehouse_name":"元器件A库","stock_number":"0","o_audit":"0","i_audit":"0","out_processing":"0","update_time":"1537421444","tips":null}]',
                                        '[{"stock_number":["exp","stock_number + 100"],"id":"18803","product_id":"209","warehouse_number":"K001","warehouse_name":"元器件A库","o_audit":"0","i_audit":"0","out_processing":"0","update_time":"1537421444","tips":null}]',
                                        1537421444
                                    ); [ RunTime:0.0250s ]
SQL: SELECT * FROM `crm_stock` WHERE `product_id` = '15521' AND `warehouse_number` = 'K001' LIMIT 1   [ RunTime:0.0060s ]
SQL: INSERT INTO `crm_stock` (`product_id`,`warehouse_number`,`warehouse_name`,`update_time`) VALUES ('15521','K001','元器件A库','1537421444') [ RunTime:0.0210s ]
SQL: show full fields from crm_stock [ RunTime:0.0260s ]
SQL: SHOW COLUMNS FROM `crm_stock` [ RunTime:0.0210s ]
SQL: SELECT * FROM `crm_stock` WHERE `id` <= '18804' ORDER BY id desc  LIMIT 1   [ RunTime:0.0060s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Stock/checkStockInRecord',
                                        'crm_stock',
                                        '{"id":"主键id","product_id":"物料表主键ID","warehouse_number":"仓库编号","warehouse_name":"仓库名","stock_number":"可用库存","o_audit":"锁库数量（待出库，下销货单，领料单，其它出库单后增加）","i_audit":"待入库","out_processing":"出库中（提交出库记录，数量增加，对应待出库数量减少）","update_time":"更新时间","tips":"备注"}',
                                        1,
                                        '18804',
                                        '[{"id":"18804","product_id":"15521","warehouse_number":"K001","warehouse_name":"元器件A库","stock_number":"0","o_audit":"0","i_audit":"0","out_processing":"0","update_time":"1537421444","tips":null}]',
                                        1537421444
                                    ); [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stock` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_stock` WHERE `product_id` = '15521' AND `warehouse_number` = 'K001'  [ RunTime:0.0070s ]
SQL: UPDATE `crm_stock` SET `stock_number`=stock_number + 3,`update_time`='1537421444' WHERE `product_id` = '15521' AND `warehouse_number` = 'K001' [ RunTime:0.0100s ]
SQL: show full fields from crm_stock [ RunTime:0.0140s ]
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 600 行.
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 600 行.
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `before_data`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Stock/checkStockInRecord',
                                        'crm_stock',
                                        '{"id":"主键id","product_id":"物料表主键ID","warehouse_number":"仓库编号","warehouse_name":"仓库名","stock_number":"可用库存","o_audit":"锁库数量（待出库，下销货单，领料单，其它出库单后增加）","i_audit":"待入库","out_processing":"出库中（提交出库记录，数量增加，对应待出库数量减少）","update_time":"更新时间","tips":"备注"}',
                                        2,
                                        '18804',
                                        '[{"id":"18804","product_id":"15521","warehouse_number":"K001","warehouse_name":"元器件A库","stock_number":"0","o_audit":"0","i_audit":"0","out_processing":"0","update_time":"1537421444","tips":null}]',
                                        '[{"stock_number":["exp","stock_number + 3"],"id":"18804","product_id":"15521","warehouse_number":"K001","warehouse_name":"元器件A库","o_audit":"0","i_audit":"0","out_processing":"0","update_time":"1537421444","tips":null}]',
                                        1537421444
                                    ); [ RunTime:0.0160s ]

[ 2018-09-20T13:30:45+08:00 ] ::1 /Dwin/Stock/showStockInAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0700s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0210s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinauditindex','1537421445','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"3\",\"columns\":[{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"type\":\"8\"}') [ RunTime:0.0940s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176421' ORDER BY id desc  LIMIT 1   [ RunTime:0.0460s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0340s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0110s ]
SQL: SELECT a.id,a.stock_in_id,ifnull(o.purchase_order_id,'无源单') s_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,a.other_bill FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 ORDER BY stock_in_id desc LIMIT 0,10   [ RunTime:0.0260s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0200s ]

[ 2018-09-20T13:30:52+08:00 ] ::1 /Dwin/Stock/showStockInRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0180s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0400s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinrecord','1537421450','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.1630s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0310s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176423' ORDER BY id desc  LIMIT 1   [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_stock_in` [ RunTime:0.5550s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:1.1201s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0230s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0210s ]
SQL: SELECT a.id,a.stock_in_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,task.task_id s_id FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id LEFT JOIN crm_stock_in_record record ON record.source_id = a.id  WHERE a.is_del = 0 AND a.audit_status = 3 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ord.purchase_order_id 
                              FROM crm_stock_in_purchase a 
                              LEFT JOIN crm_purchase_order ord ON ord.id = a.source_id 
                              LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                              WHERE a.audit_status = 3 AND a.is_del = 0 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ifnull(a.source_id,'无') 
                          FROM crm_stock_in_other a 
                          LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                          WHERE a.audit_status = 3 and a.is_del = 0 
                          ORDER BY cate_name desc 
                          LIMIT 0,10 [ RunTime:0.2380s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0320s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0220s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0160s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0050s ]

[ 2018-09-20T13:30:54+08:00 ] ::1 /Dwin/Stock/showStockInRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0180s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0420s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinrecord','1537421454','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.0870s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0280s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0210s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176424' ORDER BY id desc  LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stock_in` [ RunTime:0.0440s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0130s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0240s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0150s ]
SQL: SELECT a.id,a.stock_in_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,task.task_id s_id FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id LEFT JOIN crm_stock_in_record record ON record.source_id = a.id  WHERE a.is_del = 0 AND a.audit_status = 3 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ord.purchase_order_id 
                              FROM crm_stock_in_purchase a 
                              LEFT JOIN crm_purchase_order ord ON ord.id = a.source_id 
                              LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                              WHERE a.audit_status = 3 AND a.is_del = 0 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ifnull(a.source_id,'无') 
                          FROM crm_stock_in_other a 
                          LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                          WHERE a.audit_status = 3 and a.is_del = 0 
                          ORDER BY cate_name desc 
                          LIMIT 0,10 [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0220s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0180s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0120s ]

[ 2018-09-20T13:31:53+08:00 ] ::1 /Dwin/Stock/purchaseAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0530s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0210s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseauditindex','1537421513','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"auditor_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"pay_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"other_bill\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0610s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0280s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0270s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176428' ORDER BY id desc  LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0200s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 0 LIMIT 1   [ RunTime:0.0130s ]
SQL: SELECT a.id,a.cate,a.cate_name,a.stock_in_id,a.source_id,a.other_bill,from_unixtime(a.pay_time) pay_time,a.pay_condition,a.intercourse_subject,a.print_time,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) create_time,a.tips,a.auditor,a.auditor_name,a.audit_status,a.audit_tips,from_unixtime(a.audit_time) audit_time,a.keep_id,a.keep_name,a.charge_id,a.charge_name,a.account_id,a.account_name,a.check_id,a.check_name,a.business_id,a.business_name,from_unixtime(a.update_time) update_time,o.supplier_name,o.purchase_order_id,o.purchase_mode,o.purchase_type FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 0 ORDER BY stock_in_id asc LIMIT 0,25   [ RunTime:0.0360s ]

[ 2018-09-20T13:31:53+08:00 ] ::1 /Dwin/Stock/purchaseOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0190s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0580s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseorderindex','1537421513','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0840s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0260s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176429' ORDER BY id desc  LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0130s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 LIMIT 1   [ RunTime:0.0120s ]
SQL: SELECT a.id,a.supplier_name,a.purchase_order_id,from_unixtime(a.create_time) create_time,a.create_id,u.name create_name,from_unixtime(a.update_time) update_time,from_unixtime(a.order_time) order_time,a.billing_method,a.purchase_mode,a.purchase_type,c.contract_id,a.audit_status,a.stock_status FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 ORDER BY order_time asc LIMIT 0,25   [ RunTime:0.0140s ]

[ 2018-09-20T13:31:58+08:00 ] ::1 /Dwin/Stock/getOrderProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0470s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getorderproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0290s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getorderproduct','1537421517','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10017\"}') [ RunTime:0.1050s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0170s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176430' ORDER BY id desc  LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0290s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10017' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0120s ]

[ 2018-09-20T13:32:01+08:00 ] ::1 /Dwin/Stock/getOrderProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0360s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getorderproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getorderproduct','1537421520','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10017\"}') [ RunTime:0.0750s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176431' ORDER BY id desc  LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0160s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10017' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0090s ]

[ 2018-09-20T13:32:07+08:00 ] ::1 /Dwin/Stock/purchaseAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0180s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.2870s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0200s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseauditindex','1537421527','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"auditor_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"pay_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"other_bill\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0870s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0470s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176433' ORDER BY id desc  LIMIT 1   [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0150s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 0 LIMIT 1   [ RunTime:0.0110s ]
SQL: SELECT a.id,a.cate,a.cate_name,a.stock_in_id,a.source_id,a.other_bill,from_unixtime(a.pay_time) pay_time,a.pay_condition,a.intercourse_subject,a.print_time,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) create_time,a.tips,a.auditor,a.auditor_name,a.audit_status,a.audit_tips,from_unixtime(a.audit_time) audit_time,a.keep_id,a.keep_name,a.charge_id,a.charge_name,a.account_id,a.account_name,a.check_id,a.check_name,a.business_id,a.business_name,from_unixtime(a.update_time) update_time,o.supplier_name,o.purchase_order_id,o.purchase_mode,o.purchase_type FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 0 ORDER BY stock_in_id asc LIMIT 0,25   [ RunTime:0.0270s ]

[ 2018-09-20T13:32:14+08:00 ] ::1 /Dwin/Stock/showStockInAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0160s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0370s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinauditindex','1537421534','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"type\":\"3\"}') [ RunTime:0.1070s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176435' ORDER BY id desc  LIMIT 1   [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT a.id,a.stock_in_id,ifnull(task.task_id,'无源单') s_id,a.print_time,a.cate,a.cate_name,`batch`,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,a.production_line_name,a.production_group_name FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 ORDER BY stock_in_id desc LIMIT 0,10   [ RunTime:0.0070s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0050s ]

[ 2018-09-20T13:32:19+08:00 ] ::1 /Dwin/Stock/showStockInAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0300s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinauditindex','1537421539','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"type\":\"8\"}') [ RunTime:0.0790s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176436' ORDER BY id desc  LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT a.id,a.stock_in_id,ifnull(o.purchase_order_id,'无源单') s_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,a.other_bill FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 ORDER BY stock_in_id desc LIMIT 0,10   [ RunTime:0.0060s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0030s ]

[ 2018-09-20T13:32:25+08:00 ] ::1 /Dwin/Stock/showStockInRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0180s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinrecord','1537421544','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.0690s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176438' ORDER BY id desc  LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_in` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0070s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0090s ]
SQL: SELECT a.id,a.stock_in_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,task.task_id s_id FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id LEFT JOIN crm_stock_in_record record ON record.source_id = a.id  WHERE a.is_del = 0 AND a.audit_status = 3 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ord.purchase_order_id 
                              FROM crm_stock_in_purchase a 
                              LEFT JOIN crm_purchase_order ord ON ord.id = a.source_id 
                              LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                              WHERE a.audit_status = 3 AND a.is_del = 0 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ifnull(a.source_id,'无') 
                          FROM crm_stock_in_other a 
                          LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                          WHERE a.audit_status = 3 and a.is_del = 0 
                          ORDER BY cate_name desc 
                          LIMIT 0,10 [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0030s ]

[ 2018-09-20T13:32:36+08:00 ] ::1 /Dwin/Stock/getStockInDetail
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0220s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockindetail%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockindetail','1537421556','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10279\"}') [ RunTime:0.1120s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0710s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0460s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176439' ORDER BY id desc  LIMIT 1   [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0260s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('10279') AND a.is_del = 0  [ RunTime:0.0110s ]

[ 2018-09-20T13:33:17+08:00 ] ::1 /Dwin/Stock/showStockInRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0140s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0610s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0580s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0350s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinrecord','1537421596','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.2770s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0160s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176440' ORDER BY id desc  LIMIT 1   [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stock_in` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0180s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0250s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0150s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0150s ]
SQL: SELECT a.id,a.stock_in_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,task.task_id s_id FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id LEFT JOIN crm_stock_in_record record ON record.source_id = a.id  WHERE a.is_del = 0 AND a.audit_status = 3 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ord.purchase_order_id 
                              FROM crm_stock_in_purchase a 
                              LEFT JOIN crm_purchase_order ord ON ord.id = a.source_id 
                              LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                              WHERE a.audit_status = 3 AND a.is_del = 0 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ifnull(a.source_id,'无') 
                          FROM crm_stock_in_other a 
                          LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                          WHERE a.audit_status = 3 and a.is_del = 0 
                          ORDER BY cate_name desc 
                          LIMIT 0,10 [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0300s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0180s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0240s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0060s ]

[ 2018-09-20T13:33:25+08:00 ] ::1 /Dwin/Stock/getStockInDetail
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0170s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0360s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockindetail%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockindetail','1537421605','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10279\"}') [ RunTime:0.3970s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0260s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176441' ORDER BY id desc  LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0200s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('10279') AND a.is_del = 0  [ RunTime:0.0060s ]

[ 2018-09-20T13:33:28+08:00 ] ::1 /Dwin/Stock/getStockInDetail
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0140s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0220s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockindetail%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockindetail','1537421608','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10279\"}') [ RunTime:0.0680s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0240s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176442' ORDER BY id desc  LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0240s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('10279') AND a.is_del = 0  [ RunTime:0.0070s ]

[ 2018-09-20T13:33:34+08:00 ] ::1 /Dwin/Stock/getStockInDetail
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0250s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockindetail%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockindetail','1537421614','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10143\"}') [ RunTime:0.0790s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176443' ORDER BY id desc  LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0080s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('10143') AND a.is_del = 0  [ RunTime:0.0030s ]

[ 2018-09-20T13:33:39+08:00 ] ::1 /Dwin/Stock/getStockInDetail
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0150s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0420s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockindetail%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0290s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0260s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockindetail','1537421619','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10279\"}') [ RunTime:0.0780s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176444' ORDER BY id desc  LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0250s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('10279') AND a.is_del = 0  [ RunTime:0.0080s ]

[ 2018-09-20T13:33:50+08:00 ] ::1 /Dwin/Stock/showStockInRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0500s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinrecord','1537421630','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.0880s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0180s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176446' ORDER BY id desc  LIMIT 1   [ RunTime:0.0630s ]
SQL: SHOW COLUMNS FROM `crm_stock_in` [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0320s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0340s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0130s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0190s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0240s ]
SQL: SELECT a.id,a.stock_in_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,task.task_id s_id FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id LEFT JOIN crm_stock_in_record record ON record.source_id = a.id  WHERE a.is_del = 0 AND a.audit_status = 3 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ord.purchase_order_id 
                              FROM crm_stock_in_purchase a 
                              LEFT JOIN crm_purchase_order ord ON ord.id = a.source_id 
                              LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                              WHERE a.audit_status = 3 AND a.is_del = 0 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ifnull(a.source_id,'无') 
                          FROM crm_stock_in_other a 
                          LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                          WHERE a.audit_status = 3 and a.is_del = 0 
                          ORDER BY cate_name desc 
                          LIMIT 0,10 [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0260s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0200s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0180s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0070s ]

[ 2018-09-20T13:33:58+08:00 ] ::1 /Dwin/Stock/showStockInAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0500s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinauditindex','1537421638','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"type\":\"3\"}') [ RunTime:0.0830s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0190s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176448' ORDER BY id desc  LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0210s ]
SQL: SELECT a.id,a.stock_in_id,ifnull(task.task_id,'无源单') s_id,a.print_time,a.cate,a.cate_name,`batch`,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,a.production_line_name,a.production_group_name FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 ORDER BY stock_in_id desc LIMIT 0,10   [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0140s ]

[ 2018-09-20T13:34:02+08:00 ] ::1 /Dwin/Stock/purchaseAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0170s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0210s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0340s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0190s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseauditindex','1537421642','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"auditor_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"pay_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"other_bill\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0560s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0270s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0320s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176450' ORDER BY id desc  LIMIT 1   [ RunTime:0.0200s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0130s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 0 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT a.id,a.cate,a.cate_name,a.stock_in_id,a.source_id,a.other_bill,from_unixtime(a.pay_time) pay_time,a.pay_condition,a.intercourse_subject,a.print_time,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) create_time,a.tips,a.auditor,a.auditor_name,a.audit_status,a.audit_tips,from_unixtime(a.audit_time) audit_time,a.keep_id,a.keep_name,a.charge_id,a.charge_name,a.account_id,a.account_name,a.check_id,a.check_name,a.business_id,a.business_name,from_unixtime(a.update_time) update_time,o.supplier_name,o.purchase_order_id,o.purchase_mode,o.purchase_type FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 0 ORDER BY stock_in_id asc LIMIT 0,25   [ RunTime:0.0140s ]

[ 2018-09-20T13:34:09+08:00 ] ::1 /Dwin/Stock/purchaseOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0300s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseorderindex','1537421649','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0860s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0160s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176452' ORDER BY id desc  LIMIT 1   [ RunTime:0.0200s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT a.id,a.supplier_name,a.purchase_order_id,from_unixtime(a.create_time) create_time,a.create_id,u.name create_name,from_unixtime(a.update_time) update_time,from_unixtime(a.order_time) order_time,a.billing_method,a.purchase_mode,a.purchase_type,c.contract_id,a.audit_status,a.stock_status FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 ORDER BY order_time asc LIMIT 0,25   [ RunTime:0.0250s ]

[ 2018-09-20T13:34:10+08:00 ] ::1 /Dwin/Stock/otherStockInApplyIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0160s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0240s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/otherstockinapplyindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0220s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/otherstockinapplyindex','1537421650','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"receipt_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"storage_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"storage_division\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"storage_former_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"single_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"single_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"storage_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0740s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176454' ORDER BY id desc  LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other_apply` [ RunTime:0.0350s ]
SQL: SELECT COUNT(a.id) AS tp_count FROM crm_stock_in_other_apply a WHERE a.stock_status = 0 AND a.is_del = 0 LIMIT 1   [ RunTime:0.0130s ]
SQL: SELECT a.id,a.apply_id receipt_number,a.source_id,a.type_id storage_type,a.apply_dept_name storage_division,a.create_id,a.create_name single_name,from_unixtime(a.create_time) single_time,a.stock_status storage_status,a.auditor,a.auditor_name,b.sale_number storage_former_number FROM crm_stock_in_other_apply a LEFT JOIN crm_salerecord b ON b.sid = a.source_id  WHERE a.stock_status = 0 AND a.is_del = 0 ORDER BY receipt_number asc LIMIT 0,25   [ RunTime:0.0240s ]
SQL: SELECT COUNT(a.id) AS tp_count FROM crm_stock_in_other_apply a WHERE a.stock_status = 0 AND a.is_del = 0 LIMIT 1   [ RunTime:0.0170s ]

[ 2018-09-20T13:34:19+08:00 ] ::1 /Dwin/Production/productionTaskIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0180s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0240s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productiontaskindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productiontaskindex','1537421658','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"task_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"task_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"task_line_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"task_group_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"task_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"complete_quantity\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"actual_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"0,1,2\"}') [ RunTime:0.0820s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0300s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176456' ORDER BY id desc  LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0170s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0120s ]
NOTIC: [8] Undefined index: a.pid F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\ProductionLineModel.class.php 第 69 行.
SQL: SELECT a.id,a.production_line group_name,a.pid,a.manufacturability group_ability,b.production_line line_name FROM crm_production_line a LEFT JOIN crm_production_line b ON b.id = a.pid  WHERE a.is_del = 0 AND a.pid <> 0 LIMIT 0,100   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT task.id,from_unixtime(task.create_time) create_time,task.task_id,task.product_no,task.product_id,material.warehouse_id default_rep_id,task.task_number,task.task_line,task.task_group,task.production_type,from_unixtime(task.task_start_time,'%y-%m-%d') start_t,from_unixtime(task.task_end_time,'%y-%m-%d') end_t,task.production_status,sum(ifnull(sip.in_num,0)) complete_quantity,ifnull(from_unixtime(task.actual_end_time,'%y-%m-%d'),' ') actual_t,task.tips,task.create_id,task.create_name,line1.production_line task_line_name,line2.production_line task_group_name,produce_order.production_code order_code FROM crm_production_task task LEFT JOIN crm_production_line line1 ON line1.id = task_line LEFT JOIN crm_production_line line2 ON line2.id = task_group LEFT JOIN crm_material material ON material.product_id = task.product_id LEFT JOIN crm_production_order produce_order ON task.order_pid = produce_order.id LEFT JOIN (select a.*,sum(ifnull(b.num,0)) in_num from crm_stock_in_production a left join crm_stock_in_record b on a.id = b.source_id group by a.id) sip ON task.id = sip.source_id and sip.is_del = 0  WHERE task.task_group IN ('100','101','102','103','104','105','106','107','108') AND task.production_status IN ('0','1','2') AND task.is_del = 0 GROUP BY task.id ORDER BY start_t desc LIMIT 0,10   [ RunTime:0.0150s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_task task WHERE task.task_group IN ('100','101','102','103','104','105','106','107','108') AND task.production_status IN ('0','1','2') LIMIT 1   [ RunTime:0.0190s ]

[ 2018-09-20T13:34:21+08:00 ] ::1 /Dwin/Stock/purchaseOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0180s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0200s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseorderindex','1537421661','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0550s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176458' ORDER BY id desc  LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0120s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT a.id,a.supplier_name,a.purchase_order_id,from_unixtime(a.create_time) create_time,a.create_id,u.name create_name,from_unixtime(a.update_time) update_time,from_unixtime(a.order_time) order_time,a.billing_method,a.purchase_mode,a.purchase_type,c.contract_id,a.audit_status,a.stock_status FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 ORDER BY order_time asc LIMIT 0,25   [ RunTime:0.0160s ]

[ 2018-09-20T13:34:36+08:00 ] ::1 /Dwin/stock/showAuditTransferList
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.2380s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.4070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.3460s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.6460s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showaudittransferlist%' ORDER BY log_level desc LIMIT 1   [ RunTime:1.0111s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0930s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showaudittransferlist','1537421675','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"transfer_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"source_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.1100s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0810s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.1200s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176460' ORDER BY id desc  LIMIT 1   [ RunTime:0.3520s ]
SQL: SHOW COLUMNS FROM `crm_stock_transfer` [ RunTime:0.1650s ]
SQL: SELECT COUNT(*) AS tp_count FROM `crm_stock_transfer` WHERE `create_id` IN ('394') AND `audit_status` = 0 LIMIT 1   [ RunTime:0.0560s ]
SQL: SELECT COUNT(*) AS tp_count FROM `crm_stock_transfer` WHERE `create_id` IN ('394') AND `audit_status` = 0 LIMIT 1   [ RunTime:0.1580s ]
SQL: SELECT `id`,`transfer_id`,from_unixtime(create_time) create_time,`create_id`,`create_name`,`source_type`,`audit_status`,`print_time`,`check_id`,`check_name`,`keep_id`,`keep_name`,from_unixtime(update_time) update_time,`tips` FROM `crm_stock_transfer` WHERE `create_id` IN ('394') AND `audit_status` = 0 ORDER BY create_time desc LIMIT 0,10   [ RunTime:0.1460s ]

[ 2018-09-20T13:34:41+08:00 ] ::1 /Dwin/Stock/getSelectInfo
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.2250s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.1800s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0290s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:1.1741s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getselectinfo%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.1290s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.1030s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getselectinfo','1537421679','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"type\":\"getDept\"}') [ RunTime:0.1490s ]
SQL: show full fields from crm_stafflog [ RunTime:0.3870s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.1080s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176461' ORDER BY id desc  LIMIT 1   [ RunTime:0.0850s ]
SQL: SHOW COLUMNS FROM `crm_repertorylist` [ RunTime:0.1170s ]
SQL: SELECT rep_id warehouse_id,repertory_name warehouse_name,concat_ws(',',`warehouse_manager_id`,logistics_staff_id) auditor_ids FROM `crm_repertorylist` WHERE `cate_flag` = '1'  [ RunTime:0.0710s ]
SQL: SHOW COLUMNS FROM `crm_staff` [ RunTime:0.2230s ]
SQL: SELECT id auditor_id,name auditor_name FROM `crm_staff` WHERE `id` IN ('241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393')  [ RunTime:0.0810s ]
SQL: SHOW COLUMNS FROM `crm_auth_role` [ RunTime:0.0540s ]
SQL: SELECT `role_id`,`staff_ids` FROM `crm_auth_role` WHERE `role_id` IN (1,2,3,8,13,16,34,37,40,43,44,45,46,47,48,49,51,21)  [ RunTime:0.0540s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT `id`,`name` FROM `crm_staff` WHERE `id` IN ('65','1','394','395','223','','197','214','227','228','229','198','199','200','201','202','203','204','205','216','','226','392','241','242','243','244','245','246','247','248','249','250','251','252','253','254','233','235','236','237','238','239','240','234','')  [ RunTime:0.0270s ]
SQL: SHOW COLUMNS FROM `crm_dept` [ RunTime:0.1130s ]
SQL: SELECT `id`,`name` FROM `crm_dept`  [ RunTime:0.4780s ]

[ 2018-09-20T13:34:45+08:00 ] ::1 /Dwin/stock/showAuditTransferList
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0180s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0930s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0920s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.2070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showaudittransferlist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0690s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.1180s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showaudittransferlist','1537421684','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"transfer_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"source_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.0980s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0770s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0600s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176463' ORDER BY id desc  LIMIT 1   [ RunTime:0.0260s ]
SQL: SHOW COLUMNS FROM `crm_stock_transfer` [ RunTime:0.0570s ]
SQL: SELECT COUNT(*) AS tp_count FROM `crm_stock_transfer` WHERE `create_id` IN ('394') AND `audit_status` = 0 LIMIT 1   [ RunTime:0.0670s ]
SQL: SELECT COUNT(*) AS tp_count FROM `crm_stock_transfer` WHERE `create_id` IN ('394') AND `audit_status` = 0 LIMIT 1   [ RunTime:0.0350s ]
SQL: SELECT `id`,`transfer_id`,from_unixtime(create_time) create_time,`create_id`,`create_name`,`source_type`,`audit_status`,`print_time`,`check_id`,`check_name`,`keep_id`,`keep_name`,from_unixtime(update_time) update_time,`tips` FROM `crm_stock_transfer` WHERE `create_id` IN ('394') AND `audit_status` = 0 ORDER BY create_time desc LIMIT 0,10   [ RunTime:0.2760s ]

[ 2018-09-20T13:34:47+08:00 ] ::1 /Dwin/Stock/getSelectInfo
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0750s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0300s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0180s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0660s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getselectinfo%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.1070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0450s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getselectinfo','1537421686','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"type\":\"getDept\"}') [ RunTime:0.0960s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0860s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0690s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176464' ORDER BY id desc  LIMIT 1   [ RunTime:0.1470s ]
SQL: SHOW COLUMNS FROM `crm_repertorylist` [ RunTime:0.0560s ]
SQL: SELECT rep_id warehouse_id,repertory_name warehouse_name,concat_ws(',',`warehouse_manager_id`,logistics_staff_id) auditor_ids FROM `crm_repertorylist` WHERE `cate_flag` = '1'  [ RunTime:0.0390s ]
SQL: SHOW COLUMNS FROM `crm_staff` [ RunTime:0.0690s ]
SQL: SELECT id auditor_id,name auditor_name FROM `crm_staff` WHERE `id` IN ('241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393')  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_role` [ RunTime:0.0330s ]
SQL: SELECT `role_id`,`staff_ids` FROM `crm_auth_role` WHERE `role_id` IN (1,2,3,8,13,16,34,37,40,43,44,45,46,47,48,49,51,21)  [ RunTime:0.0390s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT `id`,`name` FROM `crm_staff` WHERE `id` IN ('65','1','394','395','223','','197','214','227','228','229','198','199','200','201','202','203','204','205','216','','226','392','241','242','243','244','245','246','247','248','249','250','251','252','253','254','233','235','236','237','238','239','240','234','')  [ RunTime:0.0560s ]
SQL: SHOW COLUMNS FROM `crm_dept` [ RunTime:0.0080s ]
SQL: SELECT `id`,`name` FROM `crm_dept`  [ RunTime:0.0190s ]

[ 2018-09-20T13:35:00+08:00 ] ::1 /Dwin/Stock/showPendingOrderList
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0460s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showpendingorderlist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`auth_rule_name`,`level`,`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('待出库订单',NULL,'394','::1','stock/showpendingorderlist','1537421699','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"cpo_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"type_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"finance_audit_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"staname\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"staff_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cusname\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_status_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"log_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"ware_house\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_batch_delivery\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"logistices_tip\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"pendingData\":\"3\",\"orderLimit\":\"1\"}') [ RunTime:0.0820s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176466' ORDER BY id desc  LIMIT 1   [ RunTime:0.0370s ]
SQL: SHOW COLUMNS FROM `crm_orderform` [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_auth_role` [ RunTime:0.0170s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 1 LIMIT 1   [ RunTime:0.0110s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 2 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 3 LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 8 LIMIT 1   [ RunTime:0.0140s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 13 LIMIT 1   [ RunTime:0.0200s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 16 LIMIT 1   [ RunTime:0.0160s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 34 LIMIT 1   [ RunTime:0.0090s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 37 LIMIT 1   [ RunTime:0.0150s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 40 LIMIT 1   [ RunTime:0.0140s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 43 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 44 LIMIT 1   [ RunTime:0.0090s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 45 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 46 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 47 LIMIT 1   [ RunTime:0.0100s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 48 LIMIT 1   [ RunTime:0.0090s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 49 LIMIT 1   [ RunTime:0.0130s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 51 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 21 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT COUNT(id) AS tp_count FROM `crm_orderform` WHERE `check_status` = '4' AND `stock_status` IN ('0','1','2') LIMIT 1   [ RunTime:0.0120s ]
SQL: SELECT COUNT(id) AS tp_count FROM `crm_orderform` WHERE `check_status` = '4' AND `stock_status` IN ('0','1','2') LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_orderform` [ RunTime:0.0120s ]
SQL: SELECT crm_orderform.id,`cpo_id`,d.order_type_name type_name,from_unixtime(settlement_time) finance_audit_time,pic_name staname,pic_phone staff_phone,if (LENGTH(cus_name) < 7,`cus_name`,REPLACE(cus_name,SUBSTRING(cus_name,3,4),"****")) cusname,j.check_type_name check_status_name,stock_status stock_out_status,f.logistics_type_name log_type,GROUP_CONCAT(distinct b.repertory_name) ware_house,`is_batch_delivery`,`logistices_tip` FROM `crm_orderform` LEFT JOIN `crm_repertorylist` b ON FIND_IN_SET(b.rep_id,delivery_ware_house) LEFT JOIN `crm_settlementlist` c ON c.settle_id = settlement_method LEFT JOIN `crm_order_type` d ON d.type_id = crm_orderform.order_type LEFT JOIN `crm_order_performance_type` e ON e.type_id = crm_orderform.static_type LEFT JOIN `crm_order_logistics_type` f ON f.type_id = crm_orderform.logistics_type LEFT JOIN `crm_order_freight_payment_type` g ON g.type_id = crm_orderform.freight_payment_method LEFT JOIN `crm_order_invoice` h ON h.type_id =crm_orderform.invoice_type LEFT JOIN `crm_order_invoice_situation` i ON i.type_id = crm_orderform.invoice_situation LEFT JOIN `crm_order_check_status` j ON j.type_id = crm_orderform.check_status  WHERE `check_status` = '4' AND `stock_status` IN ('0','1','2') GROUP BY crm_orderform.id ORDER BY cpo_id asc LIMIT 0,10   [ RunTime:0.2330s ]

[ 2018-09-20T13:35:03+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0180s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0250s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0360s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537421703','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\"}') [ RunTime:0.1020s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0190s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176468' ORDER BY id desc  LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0140s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0150s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num) FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY start_t desc LIMIT 0,10   [ RunTime:0.0360s ]

[ 2018-09-20T13:35:06+08:00 ] ::1 /Dwin/Stock/otherStockOutApplyList
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0190s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0380s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/otherstockoutapplylist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/otherstockoutapplylist','1537421706','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"apply_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"picking_kind\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"apply_dept_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"apply_reason\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"apply_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_type\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"stockOutType\":\"1\",\"flag\":\"1\"}') [ RunTime:0.0690s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176470' ORDER BY id desc  LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_other_apply` [ RunTime:0.0100s ]
SQL: SELECT r.*,(case 
                        when ifnull(p.stock_out_id,0) = '0' then '未下推'
                        else '已下推'
                        end
                    ) as stock_out_type FROM crm_stock_out_other_apply r left join crm_stock_out_other p on r.id = p.source_id and p.is_del = 0  WHERE ifnull(p.stock_out_id,0) = '0' AND r.is_del = 0 ORDER BY apply_id asc LIMIT 0,25   [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_out_other_apply r left join crm_stock_out_other p on r.id = p.source_id and p.is_del = 0  WHERE ifnull(p.stock_out_id,0) = '0' AND r.is_del = 0 LIMIT 1   [ RunTime:0.0070s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_out_other_apply r left join crm_stock_out_other p on r.id = p.source_id and p.is_del = 0  WHERE ifnull(p.stock_out_id,0) = '0' AND r.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]

[ 2018-09-20T13:35:16+08:00 ] ::1 /Dwin/Stock/stockRecordQualifiedList
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0160s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0500s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/stockrecordqualifiedlist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.3100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/stockrecordqualifiedlist','1537421715','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"product_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"repertory_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"source_kind\":\"\",\"checkStatus\":\"1\",\"flag\":\"1\"}') [ RunTime:0.3000s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176472' ORDER BY id desc  LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0080s ]
SQL: SELECT r.*,(
                    CASE
                    WHEN r.cate_id = 1 THEN c.stock_out_id 
                    WHEN r.cate_id = 2 THEN o.stock_out_id 
                    WHEN r.cate_id = 3 THEN p.stock_out_id 
                    ELSE null
                    END 
                  ) AS stock_no,cs.stock_number,cs.o_audit,cs.out_processing,m.product_name,m.product_number FROM crm_stock_out_record r LEFT JOIN crm_stock_out_produce p ON p.id = r.source_id AND p.is_del = 0 LEFT JOIN crm_stock_out_orderform o ON o.id = r.source_id AND o.is_del = 0 LEFT JOIN crm_stock_out_other c ON c.id = r.source_id AND c.is_del = 0 left join crm_stock cs on cs.product_id = r.product_id and cs.warehouse_number = r.repertory_id left join crm_material m on m.product_id = r.product_id  WHERE r.status <> 2 AND r.is_del = 0 ORDER BY product_number asc LIMIT 0,25   [ RunTime:0.0240s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_out_record r LEFT JOIN crm_stock_out_produce p ON p.id = r.source_id AND p.is_del = 0 LEFT JOIN crm_stock_out_orderform o ON o.id = r.source_id AND o.is_del = 0 LEFT JOIN crm_stock_out_other c ON c.id = r.source_id AND c.is_del = 0 left join crm_stock cs on cs.product_id = r.product_id and cs.warehouse_number = r.repertory_id  WHERE r.status <> 2 AND r.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_out_record r LEFT JOIN crm_stock_out_produce p ON p.id = r.source_id AND p.is_del = 0 LEFT JOIN crm_stock_out_orderform o ON o.id = r.source_id AND o.is_del = 0 LEFT JOIN crm_stock_out_other c ON c.id = r.source_id AND c.is_del = 0 left join crm_stock cs on cs.product_id = r.product_id and cs.warehouse_number = r.repertory_id  WHERE r.status <> 2 AND r.is_del = 0 LIMIT 1   [ RunTime:0.0060s ]

[ 2018-09-20T13:35:16+08:00 ] ::1 /Dwin/Stock/getStockOutRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0150s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockoutrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockoutrecord','1537421716','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"\"}') [ RunTime:0.0520s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176473' ORDER BY id desc  LIMIT 1   [ RunTime:0.0190s ]

[ 2018-09-20T13:35:17+08:00 ] ::1 /Dwin/Stock/stockOutOtherMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0250s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0670s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/stockoutothermaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/stockoutothermaterial','1537421716','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"\"}') [ RunTime:0.0770s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0160s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176474' ORDER BY id desc  LIMIT 1   [ RunTime:0.0100s ]

[ 2018-09-20T13:35:25+08:00 ] ::1 /Dwin/Stock/stockRecordQualifiedList
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0270s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0360s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0910s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.1350s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/stockrecordqualifiedlist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0390s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0560s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/stockrecordqualifiedlist','1537421724','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"product_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"repertory_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"source_kind\":\"\",\"checkStatus\":\"1\",\"flag\":\"1\"}') [ RunTime:0.1500s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0900s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0850s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176476' ORDER BY id desc  LIMIT 1   [ RunTime:0.0860s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.6380s ]
SQL: SELECT r.*,(
                    CASE
                    WHEN r.cate_id = 1 THEN c.stock_out_id 
                    WHEN r.cate_id = 2 THEN o.stock_out_id 
                    WHEN r.cate_id = 3 THEN p.stock_out_id 
                    ELSE null
                    END 
                  ) AS stock_no,cs.stock_number,cs.o_audit,cs.out_processing,m.product_name,m.product_number FROM crm_stock_out_record r LEFT JOIN crm_stock_out_produce p ON p.id = r.source_id AND p.is_del = 0 LEFT JOIN crm_stock_out_orderform o ON o.id = r.source_id AND o.is_del = 0 LEFT JOIN crm_stock_out_other c ON c.id = r.source_id AND c.is_del = 0 left join crm_stock cs on cs.product_id = r.product_id and cs.warehouse_number = r.repertory_id left join crm_material m on m.product_id = r.product_id  WHERE r.status <> 2 AND r.is_del = 0 ORDER BY product_number asc LIMIT 0,25   [ RunTime:0.4380s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_out_record r LEFT JOIN crm_stock_out_produce p ON p.id = r.source_id AND p.is_del = 0 LEFT JOIN crm_stock_out_orderform o ON o.id = r.source_id AND o.is_del = 0 LEFT JOIN crm_stock_out_other c ON c.id = r.source_id AND c.is_del = 0 left join crm_stock cs on cs.product_id = r.product_id and cs.warehouse_number = r.repertory_id  WHERE r.status <> 2 AND r.is_del = 0 LIMIT 1   [ RunTime:0.0390s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_out_record r LEFT JOIN crm_stock_out_produce p ON p.id = r.source_id AND p.is_del = 0 LEFT JOIN crm_stock_out_orderform o ON o.id = r.source_id AND o.is_del = 0 LEFT JOIN crm_stock_out_other c ON c.id = r.source_id AND c.is_del = 0 left join crm_stock cs on cs.product_id = r.product_id and cs.warehouse_number = r.repertory_id  WHERE r.status <> 2 AND r.is_del = 0 LIMIT 1   [ RunTime:0.0400s ]

[ 2018-09-20T13:35:26+08:00 ] ::1 /Dwin/Stock/getStockOutRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0300s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0410s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0260s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.1780s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockoutrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0240s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockoutrecord','1537421726','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"\"}') [ RunTime:0.0650s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0510s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0580s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176477' ORDER BY id desc  LIMIT 1   [ RunTime:0.0440s ]

[ 2018-09-20T13:35:27+08:00 ] ::1 /Dwin/Stock/stockOutOtherMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0360s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0650s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.3140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/stockoutothermaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0490s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0390s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/stockoutothermaterial','1537421727','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"\"}') [ RunTime:0.1020s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0370s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.1080s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176478' ORDER BY id desc  LIMIT 1   [ RunTime:0.0930s ]

[ 2018-09-20T13:35:37+08:00 ] ::1 /Dwin/Stock/purchaseOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0170s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.1170s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0410s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.4420s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0240s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0540s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseorderindex','1537421736','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.1060s ]
SQL: show full fields from crm_stafflog [ RunTime:0.3740s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0360s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176480' ORDER BY id desc  LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0330s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 LIMIT 1   [ RunTime:0.0170s ]
SQL: SELECT a.id,a.supplier_name,a.purchase_order_id,from_unixtime(a.create_time) create_time,a.create_id,u.name create_name,from_unixtime(a.update_time) update_time,from_unixtime(a.order_time) order_time,a.billing_method,a.purchase_mode,a.purchase_type,c.contract_id,a.audit_status,a.stock_status FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 ORDER BY order_time asc LIMIT 0,25   [ RunTime:0.0260s ]

[ 2018-09-20T13:35:40+08:00 ] ::1 /Dwin/Stock/getOrderProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0210s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getorderproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getorderproduct','1537421740','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10017\"}') [ RunTime:0.1160s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0200s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176481' ORDER BY id desc  LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0100s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10017' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0070s ]

[ 2018-09-20T13:35:44+08:00 ] ::1 /Dwin/Stock/getSelectInfo.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0730s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getselectinfo%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0370s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0200s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getselectinfo','1537421744','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','[]') [ RunTime:0.0730s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0280s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0310s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176483' ORDER BY id desc  LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_repertorylist` [ RunTime:0.0230s ]
SQL: SELECT rep_id warehouse_id,repertory_name warehouse_name,concat_ws(',',`warehouse_manager_id`,logistics_staff_id) auditor_ids FROM `crm_repertorylist` WHERE `cate_flag` = '1'  [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_staff` [ RunTime:0.0090s ]
SQL: SELECT id auditor_id,name auditor_name FROM `crm_staff` WHERE `id` IN ('241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393')  [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_role` [ RunTime:0.0160s ]
SQL: SELECT `role_id`,`staff_ids` FROM `crm_auth_role` WHERE `role_id` IN (1,2,3,8,13,16,34,37,40,43,44,45,46,47,48,49,51,21)  [ RunTime:0.0100s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT `id`,`name` FROM `crm_staff` WHERE `id` IN ('65','1','394','395','223','','197','214','227','228','229','198','199','200','201','202','203','204','205','216','','226','392','241','242','243','244','245','246','247','248','249','250','251','252','253','254','233','235','236','237','238','239','240','234','')  [ RunTime:0.0100s ]

[ 2018-09-20T13:35:51+08:00 ] ::1 /Dwin/Stock/purchaseOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0380s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseorderindex','1537421751','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0760s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0190s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176484' ORDER BY id desc  LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT a.id,a.supplier_name,a.purchase_order_id,from_unixtime(a.create_time) create_time,a.create_id,u.name create_name,from_unixtime(a.update_time) update_time,from_unixtime(a.order_time) order_time,a.billing_method,a.purchase_mode,a.purchase_type,c.contract_id,a.audit_status,a.stock_status FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 ORDER BY order_time asc LIMIT 0,25   [ RunTime:0.0150s ]

[ 2018-09-20T13:36:00+08:00 ] ::1 /Dwin/Purchase/supplierIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0110s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/supplierindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/supplierindex','1537421759','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"supplier_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"charge_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"business_licence\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"enterprise_cate\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"legal_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_bank\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"second_audit\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"1\"}') [ RunTime:0.1120s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176486' ORDER BY id desc  LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0180s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 786 行.
SQL: SELECT p.*,crm_staff.name,(
                    CASE
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '0' THEN 0 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '2' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '20' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '02' THEN 2 
                    ELSE 1
                    END 
                  ) AS second_audit,group_concat(DISTINCT(a.status)) FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 0 GROUP BY a.supplier_pid ORDER BY supplier_id asc LIMIT 0,25   [ RunTime:0.0460s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 797 行.
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 0 GROUP BY a.supplier_pid  [ RunTime:0.0290s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 804 行.
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 0 GROUP BY a.supplier_pid  [ RunTime:0.0520s ]

[ 2018-09-20T13:36:03+08:00 ] ::1 /Dwin/Purchase/getSupplierAllMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0530s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getsupplierallmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0190s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getsupplierallmsg','1537421762','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10349\"}') [ RunTime:0.0990s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176487' ORDER BY id desc  LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_address` [ RunTime:0.0060s ]
SQL: SELECT crm_purchase_supplier_address.*,crm_staff.name FROM `crm_purchase_supplier_address` left join crm_staff on crm_staff.id = crm_purchase_supplier_address.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_contact` [ RunTime:0.0400s ]
SQL: SELECT crm_purchase_supplier_contact.*,crm_staff.name FROM `crm_purchase_supplier_contact` left join crm_staff on crm_staff.id = crm_purchase_supplier_contact.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_certification` [ RunTime:0.0160s ]
SQL: SELECT crm_purchase_supplier_certification.*,crm_staff.name,crm_file_upload.file_name,crm_file_upload.path as file_url,SUBSTRING_INDEX(crm_file_upload.path,'.',-1) as file_type FROM `crm_purchase_supplier_certification` left join crm_staff on crm_staff.id = crm_purchase_supplier_certification.create_id left join crm_file_upload on crm_file_upload.id = crm_purchase_supplier_certification.file_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0670s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_awards` [ RunTime:0.0460s ]
SQL: SELECT crm_purchase_supplier_awards.*,crm_staff.name,crm_file_upload.file_name,crm_file_upload.path as file_url,SUBSTRING_INDEX(crm_file_upload.path,'.',-1) as file_type FROM `crm_purchase_supplier_awards` left join crm_staff on crm_staff.id = crm_purchase_supplier_awards.create_id left join crm_file_upload on crm_file_upload.id = crm_purchase_supplier_awards.file_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_customer` [ RunTime:0.0140s ]
SQL: SELECT crm_purchase_supplier_customer.*,crm_staff.name FROM `crm_purchase_supplier_customer` left join crm_staff on crm_staff.id = crm_purchase_supplier_customer.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_equity` [ RunTime:0.0090s ]
SQL: SELECT crm_purchase_supplier_equity.*,crm_staff.name FROM `crm_purchase_supplier_equity` left join crm_staff on crm_staff.id = crm_purchase_supplier_equity.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_finance` [ RunTime:0.0260s ]
SQL: SELECT * FROM `crm_purchase_supplier_finance` WHERE `supplier_pid` = '10349' AND `is_del` = 0  [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_team` [ RunTime:0.0120s ]
SQL: SELECT crm_purchase_supplier_team.*,crm_staff.name FROM `crm_purchase_supplier_team` left join crm_staff on crm_staff.id = crm_purchase_supplier_team.create_id  WHERE `supplier_pid` = '10349' AND `is_del` = 0  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_cooperation` [ RunTime:0.0210s ]
SQL: SELECT crm_purchase_supplier_cooperation.*,crm_staff.name FROM `crm_purchase_supplier_cooperation` left join crm_staff on crm_staff.id = crm_purchase_supplier_cooperation.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_audit` [ RunTime:0.0170s ]
SQL: SELECT crm_purchase_supplier_audit.*,crm_variable_type.name as type_name,crm_staff.name,crm_file_upload.file_name,crm_file_upload.path as file_url,SUBSTRING_INDEX(crm_file_upload.path,'.',-1) as file_type FROM `crm_purchase_supplier_audit` INNER JOIN crm_variable_type on crm_variable_type.id = crm_purchase_supplier_audit.audit_id left join crm_staff on crm_staff.id = crm_purchase_supplier_audit.staff_id left join crm_file_upload on crm_file_upload.id = crm_purchase_supplier_audit.file_id  WHERE crm_purchase_supplier_audit.supplier_pid = '10349' AND crm_variable_type.status = 1  [ RunTime:0.0050s ]

[ 2018-09-20T13:36:06+08:00 ] ::1 /dwin/purchase/firstAuditSupplier
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0300s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0380s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0590s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/firstauditsupplier%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/firstauditsupplier','1537421766','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10349\",\"status\":\"2\"}') [ RunTime:0.0400s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0400s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176488' ORDER BY id desc  LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0680s ]
SQL: SELECT * FROM `crm_purchase_supplier` WHERE `id` = 10349 LIMIT 1   [ RunTime:0.0290s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0590s ]
SQL: SELECT * FROM `crm_purchase_supplier` WHERE `id` = 10349  [ RunTime:0.0180s ]
SQL: UPDATE `crm_purchase_supplier` SET `audit_status`='2',`updater`='394',`update_time`='1537421766' WHERE `id` = 10349 [ RunTime:0.0910s ]
SQL: show full fields from crm_purchase_supplier [ RunTime:0.0190s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `before_data`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'purchase/firstAuditSupplier',
                                        'crm_purchase_supplier',
                                        '{"id":"主键","supplier_id":"供应商编号","supplier_name":"供应商名称（必须与银行户名一致）","legal_name":"法人代表","registered_capital":"注册资本","paid_up_capital":"实收资本","business_scope":"营业范围","business_licence":"营业执照号码","start_date":"营业执照生效时间","end_date":"营业执照失效时间","is_listed":"是否上市 0-未上市 1 - 已上市","stock_code":"股票代码\t","account_bank":"开户行","account_number":"账号\t","websitea_address":"网站地址","enterprise_cate":"企业性质:国有、民营、合资合作、外资、政府机构","tips":"其他备注信息","audit_status":"0 未审核 1 不合格 2 合格","charger":"负责人id","charge_name":"负责人姓名","create_time":"创建时间","creater":"创建人","update_time":"更新时间","updater":"更新人","is_del":"是否删除：默认 0-未删除 0-已删除","supplier_cate":"合格供应商 不良 不合格 需考察等（需要跟采购确认）"}',
                                        2,
                                        '10349',
                                        '[{"id":"10349","supplier_id":"GYS10349","supplier_name":"python蟒蛇","legal_name":"姬如雪","registered_capital":"1000","paid_up_capital":"900","business_scope":"敲代码、写代码、学代码、看代码","business_licence":"100","start_date":"1537372800","end_date":"1538150400","is_listed":"1","stock_code":"1000","account_bank":"中国银行","account_number":"10000000000","websitea_address":"www.csdn.com","enterprise_cate":"国企","tips":"天生","audit_status":"0","charger":"394","charge_name":"zengyongtai","create_time":"1537350349","creater":"394","update_time":"1537350349","updater":"394","is_del":"0","supplier_cate":null}]',
                                        '[{"audit_status":2,"update_time":1537421766,"id":"10349","supplier_id":"GYS10349","supplier_name":"python蟒蛇","legal_name":"姬如雪","registered_capital":"1000","paid_up_capital":"900","business_scope":"敲代码、写代码、学代码、看代码","business_licence":"100","start_date":"1537372800","end_date":"1538150400","is_listed":"1","stock_code":"1000","account_bank":"中国银行","account_number":"10000000000","websitea_address":"www.csdn.com","enterprise_cate":"国企","tips":"天生","charger":"394","charge_name":"zengyongtai","create_time":"1537350349","creater":"394","updater":"394","is_del":"0","supplier_cate":null}]',
                                        1537421766
                                    ); [ RunTime:0.0590s ]

[ 2018-09-20T13:36:07+08:00 ] ::1 /Dwin/Purchase/supplierIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0150s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0330s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/supplierindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/supplierindex','1537421767','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"supplier_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"charge_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"business_licence\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"enterprise_cate\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"legal_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_bank\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"second_audit\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"1\"}') [ RunTime:0.0800s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0200s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176490' ORDER BY id desc  LIMIT 1   [ RunTime:0.0240s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 786 行.
SQL: SELECT p.*,crm_staff.name,(
                    CASE
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '0' THEN 0 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '2' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '20' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '02' THEN 2 
                    ELSE 1
                    END 
                  ) AS second_audit,group_concat(DISTINCT(a.status)) FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 0 GROUP BY a.supplier_pid ORDER BY supplier_id asc LIMIT 0,25   [ RunTime:0.0260s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 797 行.
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 0 GROUP BY a.supplier_pid  [ RunTime:0.0210s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 804 行.
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 0 GROUP BY a.supplier_pid  [ RunTime:0.0230s ]

[ 2018-09-20T13:36:09+08:00 ] ::1 /Dwin/Purchase/supplierIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0160s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/supplierindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0200s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/supplierindex','1537421769','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"supplier_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"charge_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"business_licence\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"enterprise_cate\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"legal_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_bank\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"second_audit\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"2\"}') [ RunTime:0.1030s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176491' ORDER BY id desc  LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0110s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 786 行.
SQL: SELECT p.*,crm_staff.name,(
                    CASE
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '0' THEN 0 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '2' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '20' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '02' THEN 2 
                    ELSE 1
                    END 
                  ) AS second_audit,group_concat(DISTINCT(a.status)) FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 2 GROUP BY a.supplier_pid ORDER BY supplier_id asc LIMIT 0,25   [ RunTime:0.0210s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 797 行.
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 2 GROUP BY a.supplier_pid  [ RunTime:0.0280s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 804 行.
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 2 GROUP BY a.supplier_pid  [ RunTime:0.0170s ]

[ 2018-09-20T13:36:12+08:00 ] ::1 /Dwin/Purchase/getSupplierAllMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0300s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0340s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getsupplierallmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getsupplierallmsg','1537421772','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10349\"}') [ RunTime:0.0570s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176492' ORDER BY id desc  LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_address` [ RunTime:0.0090s ]
SQL: SELECT crm_purchase_supplier_address.*,crm_staff.name FROM `crm_purchase_supplier_address` left join crm_staff on crm_staff.id = crm_purchase_supplier_address.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_contact` [ RunTime:0.0080s ]
SQL: SELECT crm_purchase_supplier_contact.*,crm_staff.name FROM `crm_purchase_supplier_contact` left join crm_staff on crm_staff.id = crm_purchase_supplier_contact.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_certification` [ RunTime:0.0110s ]
SQL: SELECT crm_purchase_supplier_certification.*,crm_staff.name,crm_file_upload.file_name,crm_file_upload.path as file_url,SUBSTRING_INDEX(crm_file_upload.path,'.',-1) as file_type FROM `crm_purchase_supplier_certification` left join crm_staff on crm_staff.id = crm_purchase_supplier_certification.create_id left join crm_file_upload on crm_file_upload.id = crm_purchase_supplier_certification.file_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_awards` [ RunTime:0.0110s ]
SQL: SELECT crm_purchase_supplier_awards.*,crm_staff.name,crm_file_upload.file_name,crm_file_upload.path as file_url,SUBSTRING_INDEX(crm_file_upload.path,'.',-1) as file_type FROM `crm_purchase_supplier_awards` left join crm_staff on crm_staff.id = crm_purchase_supplier_awards.create_id left join crm_file_upload on crm_file_upload.id = crm_purchase_supplier_awards.file_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_customer` [ RunTime:0.0080s ]
SQL: SELECT crm_purchase_supplier_customer.*,crm_staff.name FROM `crm_purchase_supplier_customer` left join crm_staff on crm_staff.id = crm_purchase_supplier_customer.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_equity` [ RunTime:0.0110s ]
SQL: SELECT crm_purchase_supplier_equity.*,crm_staff.name FROM `crm_purchase_supplier_equity` left join crm_staff on crm_staff.id = crm_purchase_supplier_equity.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_finance` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_purchase_supplier_finance` WHERE `supplier_pid` = '10349' AND `is_del` = 0  [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_team` [ RunTime:0.0060s ]
SQL: SELECT crm_purchase_supplier_team.*,crm_staff.name FROM `crm_purchase_supplier_team` left join crm_staff on crm_staff.id = crm_purchase_supplier_team.create_id  WHERE `supplier_pid` = '10349' AND `is_del` = 0  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_cooperation` [ RunTime:0.0110s ]
SQL: SELECT crm_purchase_supplier_cooperation.*,crm_staff.name FROM `crm_purchase_supplier_cooperation` left join crm_staff on crm_staff.id = crm_purchase_supplier_cooperation.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_audit` [ RunTime:0.0090s ]
SQL: SELECT crm_purchase_supplier_audit.*,crm_variable_type.name as type_name,crm_staff.name,crm_file_upload.file_name,crm_file_upload.path as file_url,SUBSTRING_INDEX(crm_file_upload.path,'.',-1) as file_type FROM `crm_purchase_supplier_audit` INNER JOIN crm_variable_type on crm_variable_type.id = crm_purchase_supplier_audit.audit_id left join crm_staff on crm_staff.id = crm_purchase_supplier_audit.staff_id left join crm_file_upload on crm_file_upload.id = crm_purchase_supplier_audit.file_id  WHERE crm_purchase_supplier_audit.supplier_pid = '10349' AND crm_variable_type.status = 1  [ RunTime:0.0080s ]

[ 2018-09-20T13:36:14+08:00 ] ::1 /dwin/purchase/supplierOtherMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0400s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/supplierothermsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0160s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/supplierothermsg','1537421774','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10349\",\"type\":\"audit\"}') [ RunTime:0.0700s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0280s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0240s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176493' ORDER BY id desc  LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_purchase_supplier` WHERE `id` = 10349 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_audit` [ RunTime:0.0170s ]
SQL: SELECT crm_purchase_supplier_audit.*,crm_variable_type.name as type_name,crm_staff.name,crm_file_upload.file_name,crm_file_upload.path as file_url,SUBSTRING_INDEX(crm_file_upload.path,'.',-1) as file_type FROM `crm_purchase_supplier_audit` INNER JOIN crm_variable_type on crm_variable_type.id = crm_purchase_supplier_audit.audit_id left join crm_staff on crm_staff.id = crm_purchase_supplier_audit.staff_id left join crm_file_upload on crm_file_upload.id = crm_purchase_supplier_audit.file_id  WHERE crm_purchase_supplier_audit.supplier_pid = '10349' AND crm_variable_type.status = 1  [ RunTime:0.0100s ]

[ 2018-09-20T13:36:37+08:00 ] ::1 /dwin/purchase/secondAuditSupplier
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0450s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/secondauditsupplier%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/secondauditsupplier','1537421796','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"supplierPid\":\"10349\",\"status\":\"2\",\"id\":\"318\",\"tips\":\"0920\\u6d4b\\u8bd5\",\"file_id\":\"252\"}') [ RunTime:0.0440s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.3110s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176495' ORDER BY id desc  LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_purchase_supplier` WHERE ( id = 10349 ) LIMIT 1   [ RunTime:0.0350s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_audit` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_purchase_supplier_audit` WHERE `id` = 318  [ RunTime:0.0070s ]
NOTIC: [8] Undefined index: status F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Controller\PurchaseController.class.php 第 506 行.
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_audit` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_purchase_supplier_audit` WHERE `id` = 318  [ RunTime:0.0060s ]
SQL: UPDATE `crm_purchase_supplier_audit` SET `staff_id`='394',`file_id`='252',`status`='2',`audit_time`='1537421797',`tips`='0920测试' WHERE `id` = 318 [ RunTime:0.0690s ]
SQL: show full fields from crm_purchase_supplier_audit [ RunTime:0.0080s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `before_data`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'purchase/secondAuditSupplier',
                                        'crm_purchase_supplier_audit',
                                        '{"id":"","audit_id":"审核类型id  => crm_variable_type id","supplier_pid":"供应商编号 =》 crm_puchase_supplier id","file_id":"审核上传附件  => crm_file_upload  id","tips":"审核备注","status":"0 未审核 1 不合格 2 合格","staff_id":"审核人员","audit_time":"审核时间"}',
                                        2,
                                        '318',
                                        '[{"id":"318","audit_id":"2","supplier_pid":"10349","file_id":null,"tips":null,"status":"0","staff_id":null,"audit_time":null}]',
                                        '[{"staff_id":394,"file_id":252,"status":2,"audit_time":1537421797,"tips":"0920测试","id":"318","audit_id":"2","supplier_pid":"10349"}]',
                                        1537421797
                                    ); [ RunTime:0.0510s ]

[ 2018-09-20T13:36:38+08:00 ] ::1 /dwin/purchase/supplierOtherMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.005000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0220s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.2340s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/supplierothermsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/supplierothermsg','1537421798','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10349\",\"type\":\"audit\"}') [ RunTime:0.0670s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176496' ORDER BY id desc  LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0160s ]
SQL: SELECT * FROM `crm_purchase_supplier` WHERE `id` = 10349 LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_audit` [ RunTime:0.0180s ]
SQL: SELECT crm_purchase_supplier_audit.*,crm_variable_type.name as type_name,crm_staff.name,crm_file_upload.file_name,crm_file_upload.path as file_url,SUBSTRING_INDEX(crm_file_upload.path,'.',-1) as file_type FROM `crm_purchase_supplier_audit` INNER JOIN crm_variable_type on crm_variable_type.id = crm_purchase_supplier_audit.audit_id left join crm_staff on crm_staff.id = crm_purchase_supplier_audit.staff_id left join crm_file_upload on crm_file_upload.id = crm_purchase_supplier_audit.file_id  WHERE crm_purchase_supplier_audit.supplier_pid = '10349' AND crm_variable_type.status = 1  [ RunTime:0.0030s ]

[ 2018-09-20T13:36:40+08:00 ] ::1 /Dwin/Purchase/supplierIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.003000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.004000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0190s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0150s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/supplierindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/supplierindex','1537421799','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"3\",\"columns\":[{\"data\":\"supplier_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"charge_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"business_licence\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"enterprise_cate\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"legal_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_bank\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"second_audit\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"2\"}') [ RunTime:0.0370s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176497' ORDER BY id desc  LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 786 行.
SQL: SELECT p.*,crm_staff.name,(
                    CASE
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '0' THEN 0 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '2' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '20' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '02' THEN 2 
                    ELSE 1
                    END 
                  ) AS second_audit,group_concat(DISTINCT(a.status)) FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 2 GROUP BY a.supplier_pid ORDER BY supplier_id asc LIMIT 0,25   [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 797 行.
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 2 GROUP BY a.supplier_pid  [ RunTime:0.0260s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 804 行.
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 2 GROUP BY a.supplier_pid  [ RunTime:0.0300s ]

[ 2018-09-20T13:36:42+08:00 ] ::1 /Dwin/Purchase/supplierIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0310s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/supplierindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/supplierindex','1537421801','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"4\",\"columns\":[{\"data\":\"supplier_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"charge_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"business_licence\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"enterprise_cate\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"legal_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_bank\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"second_audit\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"3\"}') [ RunTime:0.0450s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176498' ORDER BY id desc  LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0120s ]
SQL: SELECT p.*,crm_staff.name,(
                    CASE
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '0' THEN 0 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '2' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '20' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '02' THEN 2 
                    ELSE 1
                    END 
                  ) AS second_audit,group_concat(DISTINCT(a.status)) FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 2 GROUP BY a.supplier_pid HAVING REPLACE(group_concat(DISTINCT(a.status)),',','') in ('02' , '20', '2') ORDER BY supplier_id asc LIMIT 0,25   [ RunTime:0.0120s ]
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 2 GROUP BY a.supplier_pid HAVING REPLACE(group_concat(DISTINCT(a.status)),',','') in ('02' , '20', '2')  [ RunTime:0.0170s ]
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 2 GROUP BY a.supplier_pid HAVING REPLACE(group_concat(DISTINCT(a.status)),',','') in ('02' , '20', '2')  [ RunTime:0.0270s ]

[ 2018-09-20T13:36:43+08:00 ] ::1 /Dwin/Purchase/getSupplierAllMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0200s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0320s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getsupplierallmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getsupplierallmsg','1537421803','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10349\"}') [ RunTime:0.0720s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0200s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176499' ORDER BY id desc  LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_address` [ RunTime:0.0100s ]
SQL: SELECT crm_purchase_supplier_address.*,crm_staff.name FROM `crm_purchase_supplier_address` left join crm_staff on crm_staff.id = crm_purchase_supplier_address.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_contact` [ RunTime:0.0080s ]
SQL: SELECT crm_purchase_supplier_contact.*,crm_staff.name FROM `crm_purchase_supplier_contact` left join crm_staff on crm_staff.id = crm_purchase_supplier_contact.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_certification` [ RunTime:0.0090s ]
SQL: SELECT crm_purchase_supplier_certification.*,crm_staff.name,crm_file_upload.file_name,crm_file_upload.path as file_url,SUBSTRING_INDEX(crm_file_upload.path,'.',-1) as file_type FROM `crm_purchase_supplier_certification` left join crm_staff on crm_staff.id = crm_purchase_supplier_certification.create_id left join crm_file_upload on crm_file_upload.id = crm_purchase_supplier_certification.file_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_awards` [ RunTime:0.0110s ]
SQL: SELECT crm_purchase_supplier_awards.*,crm_staff.name,crm_file_upload.file_name,crm_file_upload.path as file_url,SUBSTRING_INDEX(crm_file_upload.path,'.',-1) as file_type FROM `crm_purchase_supplier_awards` left join crm_staff on crm_staff.id = crm_purchase_supplier_awards.create_id left join crm_file_upload on crm_file_upload.id = crm_purchase_supplier_awards.file_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_customer` [ RunTime:0.0140s ]
SQL: SELECT crm_purchase_supplier_customer.*,crm_staff.name FROM `crm_purchase_supplier_customer` left join crm_staff on crm_staff.id = crm_purchase_supplier_customer.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_equity` [ RunTime:0.0180s ]
SQL: SELECT crm_purchase_supplier_equity.*,crm_staff.name FROM `crm_purchase_supplier_equity` left join crm_staff on crm_staff.id = crm_purchase_supplier_equity.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_finance` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_purchase_supplier_finance` WHERE `supplier_pid` = '10349' AND `is_del` = 0  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_team` [ RunTime:0.0120s ]
SQL: SELECT crm_purchase_supplier_team.*,crm_staff.name FROM `crm_purchase_supplier_team` left join crm_staff on crm_staff.id = crm_purchase_supplier_team.create_id  WHERE `supplier_pid` = '10349' AND `is_del` = 0  [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_cooperation` [ RunTime:0.0110s ]
SQL: SELECT crm_purchase_supplier_cooperation.*,crm_staff.name FROM `crm_purchase_supplier_cooperation` left join crm_staff on crm_staff.id = crm_purchase_supplier_cooperation.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '10349'  [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_audit` [ RunTime:0.0170s ]
SQL: SELECT crm_purchase_supplier_audit.*,crm_variable_type.name as type_name,crm_staff.name,crm_file_upload.file_name,crm_file_upload.path as file_url,SUBSTRING_INDEX(crm_file_upload.path,'.',-1) as file_type FROM `crm_purchase_supplier_audit` INNER JOIN crm_variable_type on crm_variable_type.id = crm_purchase_supplier_audit.audit_id left join crm_staff on crm_staff.id = crm_purchase_supplier_audit.staff_id left join crm_file_upload on crm_file_upload.id = crm_purchase_supplier_audit.file_id  WHERE crm_purchase_supplier_audit.supplier_pid = '10349' AND crm_variable_type.status = 1  [ RunTime:0.0100s ]

[ 2018-09-20T13:36:54+08:00 ] ::1 /Dwin/Purchase/createContractId.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0360s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/createcontractid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/createcontractid','1537421813','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','GET','{\"\\/Dwin\\/Purchase\\/createContractId_html\":\"\"}') [ RunTime:0.0840s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0310s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176501' ORDER BY id desc  LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_max_id` [ RunTime:0.0210s ]
SQL: SELECT `max_id` FROM `crm_max_id` WHERE `table` = 'contract' LIMIT 1   FOR UPDATE  [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_max_id` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_max_id` WHERE `table` = 'contract'  [ RunTime:0.0080s ]
SQL: UPDATE `crm_max_id` SET `max_id`='10127' WHERE `table` = 'contract' [ RunTime:0.0510s ]
SQL: show full fields from crm_max_id [ RunTime:0.0080s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `before_data`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Purchase/createContractId',
                                        'crm_max_id',
                                        '{"id":"","table":"表名","max_id":"最大id"}',
                                        2,
                                        '16',
                                        '[{"id":"16","table":"contract","max_id":"10126"}]',
                                        '[{"max_id":10127,"id":"16","table":"contract"}]',
                                        1537421814
                                    ); [ RunTime:0.0380s ]

[ 2018-09-20T13:36:59+08:00 ] ::1 /Dwin/Purchase/getProductMsg.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0250s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getproductmsg','1537421819','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"\"}') [ RunTime:0.0740s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0270s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176502' ORDER BY id desc  LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0080s ]
SQL: SELECT `product_id`,`product_no`,`product_name`,`product_number`,`warehouse_id` FROM `crm_material` WHERE `product_no` LIKE '%%' OR `product_name` LIKE '%%' OR `product_number` LIKE '%%'  [ RunTime:0.2850s ]

[ 2018-09-20T13:37:01+08:00 ] ::1 /Dwin/Purchase/getProductMsg.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0200s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getproductmsg','1537421820','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"\"}') [ RunTime:0.0850s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0240s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176503' ORDER BY id desc  LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0230s ]
SQL: SELECT `product_id`,`product_no`,`product_name`,`product_number`,`warehouse_id` FROM `crm_material` WHERE `product_no` LIKE '%%' OR `product_name` LIKE '%%' OR `product_number` LIKE '%%'  [ RunTime:0.3860s ]

[ 2018-09-20T13:37:01+08:00 ] ::1 /Dwin/Purchase/getProductMsg.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0350s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getproductmsg','1537421821','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"q\"}') [ RunTime:0.0790s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176504' ORDER BY id desc  LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0160s ]
SQL: SELECT `product_id`,`product_no`,`product_name`,`product_number`,`warehouse_id` FROM `crm_material` WHERE `product_no` LIKE '%q%' OR `product_name` LIKE '%q%' OR `product_number` LIKE '%q%'  [ RunTime:0.0190s ]

[ 2018-09-20T13:38:34+08:00 ] ::1 /Dwin/Purchase/addContract.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0290s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/addcontract%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0250s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/addcontract','1537421914','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"contract\":{\"id\":\"10126\",\"supplier_pid\":\"10349\",\"contract_id\":\"DP2018092010126\",\"signing_time\":\"1537459200\",\"total_amount\":\"50000\",\"demand_side\":\"\\u6e56\\u5357\\u8fea\\u6587\\u79d1\\u6280\\u6709\\u9650\\u516c\\u53f8\",\"signing_place\":\"\\u6e56\\u5357\",\"supplier_name\":\"python\\u87d2\\u86c7\",\"supply_address\":\"\\u957f\\u9686\\u6e38\\u4e50\\u56ed\",\"demand_address\":\"\\u6e56\\u5357\\u7701\\u5e38\\u5fb7\\u5e02\\u6843\\u6e90\\u53bf\\u6f33\\u6c5f\\u521b\\u4e1a\\u56ed\\u521b\\u4e1a\\u5927\\u90538\\u53f7\",\"supplier_representative\":\"\\u59ec\\u5982\\u96ea\",\"purchaser_representative\":\"\\u4e0a\\u5b98\\u4e91\\u9619\",\"supplier_phone\":\"2\",\"purchaser_phone\":\"0791\",\"purchaser_fax\":\"0791\",\"supplier_fax\":\"2\",\"trading_location\":\"\\u9493\\u9c7c\\u5c9b\",\"receiver\":\"\\u65e5\\u672c\\u5929\\u7687\",\"receiving_phone\":\"120***0791\",\"billing_method\":\"\\u7ed3\\u7b97\\u65b9\\u5f0f\\u4e00\"},\"product\":[{\"product_id\":\"269\",\"product_no\":\"00269\",\"product_name\":\"DMT80480Q070-01WZ\",\"product_number\":\"DMT80480Q070-01WZ\",\"sort_id\":\"1\",\"unit\":\"1\",\"purchase_number\":\"100\",\"purchase_single_price\":\"100\",\"purchase_price\":\"10000\",\"deliver_time\":\"1537459200\"},{\"product_id\":\"267\",\"product_no\":\"00267\",\"product_name\":\"DMT32240Q035-01WZ\",\"product_number\":\"DMT32240Q035-01WZ\",\"sort_id\":\"2\",\"unit\":\"2\",\"purchase_number\":\"200\",\"purchase_single_price\":\"200\",\"purchase_price\":\"40000\",\"deliver_time\":\"1538150400\"}]}') [ RunTime:0.3370s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0240s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176505' ORDER BY id desc  LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract` [ RunTime:0.0250s ]
NOTIC: [8] Undefined index: validate F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1372 行.
SQL: SELECT * FROM `crm_purchase_contract` WHERE `contract_id` = 'DP2018092010126' AND `id` <> '10126' LIMIT 1   [ RunTime:0.0150s ]
NOTIC: [8] Undefined index: auto F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1315 行.
SQL: INSERT INTO `crm_purchase_contract` (`id`,`contract_id`,`supplier_pid`,`supplier_name`,`signing_time`,`signing_place`,`total_amount`,`receiver`,`trading_location`,`receiving_phone`,`billing_method`,`demand_side`,`supply_address`,`supplier_representative`,`supplier_phone`,`supplier_fax`,`demand_address`,`purchaser_representative`,`purchaser_phone`,`purchaser_fax`,`capital_amount`,`create_time`,`create_id`,`update_time`,`update_id`,`charger`,`charge_name`) VALUES ('10126','DP2018092010126','10349','python蟒蛇','1537459200','湖南','50000','日本天皇','钓鱼岛','120***0791','结算方式一','湖南迪文科技有限公司','长隆游乐园','姬如雪','2','2','湖南省常德市桃源县漳江创业园创业大道8号','上官云阙','0791','0791','伍万圆整','1537421914','394','1537421914','394','394','zengyongtai') [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract_product` [ RunTime:0.0180s ]
NOTIC: [8] Undefined index: validate F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1372 行.
NOTIC: [8] Undefined index: auto F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1315 行.
NOTIC: [8] Undefined index: validate F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1372 行.
NOTIC: [8] Undefined index: auto F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1315 行.
SQL: INSERT INTO `crm_purchase_contract_product` (`product_id`,`product_no`,`product_name`,`product_number`,`purchase_number`,`purchase_single_price`,`purchase_price`,`sort_id`,`unit`,`deliver_time`,`create_time`,`create_id`,`update_time`,`update_id`,`contract_pid`) VALUES ('269','00269','DMT80480Q070-01WZ','DMT80480Q070-01WZ','100','100','10000','1','1','1537459200','1537421914','394','1537421914','394','10126'),('267','00267','DMT32240Q035-01WZ','DMT32240Q035-01WZ','200','200','40000','2','2','1538150400','1537421914','394','1537421914','394','10126') [ RunTime:0.0170s ]
SQL: show full fields from crm_purchase_contract_product [ RunTime:0.0340s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract_product` [ RunTime:0.0170s ]
SQL: SELECT * FROM `crm_purchase_contract_product` WHERE `id` <= '58' ORDER BY id desc  LIMIT 2   [ RunTime:0.0160s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Purchase/addContract',
                                        'crm_purchase_contract_product',
                                        '{"id":"主键","contract_pid":"供应商合同表主键","product_id":"物料表主键","product_no":"物料编号","product_name":"物料型号","product_number":"物料名称","purchase_number":"购买数量","receipt_quantity":"实际收货数量","purchase_single_price":"购买单价","purchase_price":"数量*单价","sort_id":"排序id","unit":"单位","deliver_time":"交货时间","is_del":"是否删除：默认0 未删除","update_time":"更新时间","update_id":"更新人","create_id":"创建人","create_time":"创建时间"}',
                                        1,
                                        '58,57',
                                        '[{"id":"58","contract_pid":"10126","product_id":"269","product_no":"00269","product_name":"DMT80480Q070-01WZ","product_number":"DMT80480Q070-01WZ","purchase_number":"100","receipt_quantity":"0","purchase_single_price":"100.00","purchase_price":"10000.00","sort_id":"1","unit":"1","deliver_time":"1537459200","is_del":"0","update_time":"1537421914","update_id":"394","create_id":"394","create_time":"1537421914"},{"id":"57","contract_pid":"10125","product_id":"15521","product_no":"00141","product_name":"DW100A1","product_number":"DW100A1","purchase_number":"3","receipt_quantity":"0","purchase_single_price":"890.00","purchase_price":"2670.00","sort_id":"2","unit":"2","deliver_time":"1537545600","is_del":"0","update_time":"1537411636","update_id":"394","create_id":"394","create_time":"1537411636"}]',
                                        1537421914
                                    ); [ RunTime:0.0190s ]

[ 2018-09-20T13:38:35+08:00 ] ::1 /Dwin/Purchase/supplierIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0570s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/supplierindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0680s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0310s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/supplierindex','1537421915','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"5\",\"columns\":[{\"data\":\"supplier_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"charge_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"business_licence\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"enterprise_cate\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"legal_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_bank\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"second_audit\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"3\"}') [ RunTime:0.0800s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176506' ORDER BY id desc  LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0170s ]
SQL: SELECT p.*,crm_staff.name,(
                    CASE
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '0' THEN 0 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '2' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '20' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '02' THEN 2 
                    ELSE 1
                    END 
                  ) AS second_audit,group_concat(DISTINCT(a.status)) FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 2 GROUP BY a.supplier_pid HAVING REPLACE(group_concat(DISTINCT(a.status)),',','') in ('02' , '20', '2') ORDER BY supplier_id asc LIMIT 0,25   [ RunTime:0.0430s ]
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 2 GROUP BY a.supplier_pid HAVING REPLACE(group_concat(DISTINCT(a.status)),',','') in ('02' , '20', '2')  [ RunTime:0.0320s ]
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 2 GROUP BY a.supplier_pid HAVING REPLACE(group_concat(DISTINCT(a.status)),',','') in ('02' , '20', '2')  [ RunTime:0.0470s ]

[ 2018-09-20T13:38:37+08:00 ] ::1 /Dwin/Purchase/supplierIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0150s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0340s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/supplierindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/supplierindex','1537421917','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"6\",\"columns\":[{\"data\":\"supplier_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"charge_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"business_licence\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"enterprise_cate\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"legal_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_bank\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"second_audit\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"4\"}') [ RunTime:0.0650s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176507' ORDER BY id desc  LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0100s ]
SQL: SELECT p.*,crm_staff.name,(
                    CASE
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '0' THEN 0 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '2' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '20' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '02' THEN 2 
                    ELSE 1
                    END 
                  ) AS second_audit,group_concat(DISTINCT(a.status)) FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND (  a.status = 1 OR p.audit_status = 1 ) GROUP BY a.supplier_pid ORDER BY supplier_id asc LIMIT 0,25   [ RunTime:0.0150s ]
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND (  a.status = 1 OR p.audit_status = 1 ) GROUP BY a.supplier_pid  [ RunTime:0.0140s ]
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND (  a.status = 1 OR p.audit_status = 1 ) GROUP BY a.supplier_pid  [ RunTime:0.0150s ]

[ 2018-09-20T13:38:40+08:00 ] ::1 /Dwin/Purchase/supplierIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0290s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0220s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0370s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/supplierindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/supplierindex','1537421919','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"7\",\"columns\":[{\"data\":\"supplier_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"charge_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"business_licence\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"enterprise_cate\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"legal_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_bank\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"second_audit\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"3\"}') [ RunTime:0.0870s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0280s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0250s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176508' ORDER BY id desc  LIMIT 1   [ RunTime:0.0270s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0140s ]
SQL: SELECT p.*,crm_staff.name,(
                    CASE
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '0' THEN 0 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '2' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '20' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '02' THEN 2 
                    ELSE 1
                    END 
                  ) AS second_audit,group_concat(DISTINCT(a.status)) FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 2 GROUP BY a.supplier_pid HAVING REPLACE(group_concat(DISTINCT(a.status)),',','') in ('02' , '20', '2') ORDER BY supplier_id asc LIMIT 0,25   [ RunTime:0.0390s ]
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 2 GROUP BY a.supplier_pid HAVING REPLACE(group_concat(DISTINCT(a.status)),',','') in ('02' , '20', '2')  [ RunTime:0.0180s ]
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 2 GROUP BY a.supplier_pid HAVING REPLACE(group_concat(DISTINCT(a.status)),',','') in ('02' , '20', '2')  [ RunTime:0.0210s ]

[ 2018-09-20T13:39:04+08:00 ] ::1 /Dwin/Purchase/contractIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0330s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/contractindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/contractindex','1537421944','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"signing_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_return_contract\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"file_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0610s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176510' ORDER BY id desc  LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract` [ RunTime:0.0230s ]
SQL: SELECT c.*,s.name,u.file_name,u.path as file_url,IF(IFNULL(count( o.id ),0),1,0) AS order_status FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id left join crm_purchase_order o on o.contract_pid = c.id and o.is_del = 0  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 GROUP BY c.id ORDER BY contract_id asc LIMIT 0,25   [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]

[ 2018-09-20T13:39:09+08:00 ] ::1 /Dwin/Purchase/getContractProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0380s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getcontractproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getcontractproduct','1537421949','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10126\"}') [ RunTime:0.0750s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0200s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176511' ORDER BY id desc  LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract_product` [ RunTime:0.0110s ]
SQL: SELECT crm_purchase_contract_product.*,crm_staff.name FROM `crm_purchase_contract_product` left join crm_staff on crm_staff.id = crm_purchase_contract_product.create_id  WHERE `is_del` = 0 AND `contract_pid` = '10126'  [ RunTime:0.0070s ]

[ 2018-09-20T13:39:18+08:00 ] ::1 /Dwin/Purchase/contractIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0190s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/contractindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/contractindex','1537421958','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"signing_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_return_contract\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"file_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0600s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176513' ORDER BY id desc  LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract` [ RunTime:0.0140s ]
SQL: SELECT c.*,s.name,u.file_name,u.path as file_url,IF(IFNULL(count( o.id ),0),1,0) AS order_status FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id left join crm_purchase_order o on o.contract_pid = c.id and o.is_del = 0  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 GROUP BY c.id ORDER BY contract_id asc LIMIT 0,25   [ RunTime:0.0200s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0070s ]

[ 2018-09-20T13:39:24+08:00 ] ::1 /Dwin/Purchase/getContractProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0160s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0170s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0360s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getcontractproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getcontractproduct','1537421964','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10126\"}') [ RunTime:0.0700s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176514' ORDER BY id desc  LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract_product` [ RunTime:0.0110s ]
SQL: SELECT crm_purchase_contract_product.*,crm_staff.name FROM `crm_purchase_contract_product` left join crm_staff on crm_staff.id = crm_purchase_contract_product.create_id  WHERE `is_del` = 0 AND `contract_pid` = '10126'  [ RunTime:0.0090s ]

[ 2018-09-20T13:39:27+08:00 ] ::1 /Dwin/Purchase/auditContract.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0250s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/auditcontract%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0200s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/auditcontract','1537421966','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10126\",\"status\":\"2\"}') [ RunTime:0.0760s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0400s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176515' ORDER BY id desc  LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract` [ RunTime:0.0230s ]
SQL: SELECT `audit_status`,`file_id` FROM `crm_purchase_contract` WHERE `id` = 10126 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract` [ RunTime:0.0270s ]
SQL: SELECT * FROM `crm_purchase_contract` WHERE `id` = 10126  [ RunTime:0.0150s ]
SQL: UPDATE `crm_purchase_contract` SET `audit_status`='2',`update_id`='394',`update_time`='1537421966' WHERE `id` = 10126 [ RunTime:0.0480s ]
SQL: show full fields from crm_purchase_contract [ RunTime:0.0150s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `before_data`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Purchase/auditContract',
                                        'crm_purchase_contract',
                                        '{"id":"主键","contract_id":"合同编号","supplier_pid":"供应商表主键","supplier_name":"供方名称","charger":"负责人id","charge_name":"负责人姓名","create_time":"创建时间","create_id":"创建人","update_time":"更新时间","update_id":"更新人","is_del":"是否删除：默认0 未删除","signing_time":"签订时间","signing_place":"签订地点","total_amount":"总金额","capital_amount":"大写总金额","note":"备注","receiver":"收货人","trading_location":"交货地点","receiving_phone":"收货电话","billing_method":"结算方式","demand_side":"需方名称","supply_address":"供方地址","supplier_representative":"供方法定代表","supplier_phone":"供方代表电话","supplier_fax":"供方代表传真","demand_address":"需方地址","purchaser_representative":"需方法定代表","purchaser_phone":"需方电话","purchaser_fax":"需方传真","audit_status":"0 新提交 1 不合格 2 审核通过","is_return_contract":"是否回传合同 0 否 1 是","file_id":"回传合同附件 对应 crm_file_upload 中的id"}',
                                        2,
                                        '10126',
                                        '[{"id":"10126","contract_id":"DP2018092010126","supplier_pid":"10349","supplier_name":"python蟒蛇","charger":"394","charge_name":"zengyongtai","create_time":"1537421914","create_id":"394","update_time":"1537421914","update_id":"394","is_del":"0","signing_time":"1537459200","signing_place":"湖南","total_amount":"50000.00","capital_amount":"伍万圆整","note":null,"receiver":"日本天皇","trading_location":"钓鱼岛","receiving_phone":"120***0791","billing_method":"结算方式一","demand_side":"湖南迪文科技有限公司","supply_address":"长隆游乐园","supplier_representative":"姬如雪","supplier_phone":"2","supplier_fax":"2","demand_address":"湖南省常德市桃源县漳江创业园创业大道8号","purchaser_representative":"上官云阙","purchaser_phone":"0791","purchaser_fax":"0791","audit_status":"0","is_return_contract":"1","file_id":"253"}]',
                                        '[{"audit_status":2,"update_time":1537421966,"id":"10126","contract_id":"DP2018092010126","supplier_pid":"10349","supplier_name":"python蟒蛇","charger":"394","charge_name":"zengyongtai","create_time":"1537421914","create_id":"394","update_id":"394","is_del":"0","signing_time":"1537459200","signing_place":"湖南","total_amount":"50000.00","capital_amount":"伍万圆整","note":null,"receiver":"日本天皇","trading_location":"钓鱼岛","receiving_phone":"120***0791","billing_method":"结算方式一","demand_side":"湖南迪文科技有限公司","supply_address":"长隆游乐园","supplier_representative":"姬如雪","supplier_phone":"2","supplier_fax":"2","demand_address":"湖南省常德市桃源县漳江创业园创业大道8号","purchaser_representative":"上官云阙","purchaser_phone":"0791","purchaser_fax":"0791","is_return_contract":"1","file_id":"253"}]',
                                        1537421967
                                    ); [ RunTime:0.0340s ]

[ 2018-09-20T13:39:31+08:00 ] ::1 /Dwin/Purchase/contractIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.003000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.005000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0320s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/contractindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/contractindex','1537421971','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"3\",\"columns\":[{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"signing_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_return_contract\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"file_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"2\"}') [ RunTime:0.0700s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0170s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176516' ORDER BY id desc  LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract` [ RunTime:0.0100s ]
SQL: SELECT c.*,s.name,u.file_name,u.path as file_url,IF(IFNULL(count( o.id ),0),1,0) AS order_status FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id left join crm_purchase_order o on o.contract_pid = c.id and o.is_del = 0  WHERE c.audit_status = 2 AND c.charger = '394' AND c.is_del = 0 GROUP BY c.id ORDER BY contract_id asc LIMIT 0,25   [ RunTime:0.0170s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 2 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 2 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0060s ]

[ 2018-09-20T13:39:34+08:00 ] ::1 /Dwin/Purchase/contractIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0300s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/contractindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0330s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/contractindex','1537421974','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"4\",\"columns\":[{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"signing_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_return_contract\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"file_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0910s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176517' ORDER BY id desc  LIMIT 1   [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract` [ RunTime:0.0130s ]
SQL: SELECT c.*,s.name,u.file_name,u.path as file_url,IF(IFNULL(count( o.id ),0),1,0) AS order_status FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id left join crm_purchase_order o on o.contract_pid = c.id and o.is_del = 0  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 GROUP BY c.id ORDER BY contract_id asc LIMIT 0,25   [ RunTime:0.0300s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0200s ]

[ 2018-09-20T13:41:56+08:00 ] ::1 /Dwin/Purchase/contractIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0190s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/contractindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/contractindex','1537422115','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"5\",\"columns\":[{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"signing_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_return_contract\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"file_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"2\"}') [ RunTime:0.1100s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176518' ORDER BY id desc  LIMIT 1   [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract` [ RunTime:0.0160s ]
SQL: SELECT c.*,s.name,u.file_name,u.path as file_url,IF(IFNULL(count( o.id ),0),1,0) AS order_status FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id left join crm_purchase_order o on o.contract_pid = c.id and o.is_del = 0  WHERE c.audit_status = 2 AND c.charger = '394' AND c.is_del = 0 GROUP BY c.id ORDER BY contract_id asc LIMIT 0,25   [ RunTime:0.0120s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 2 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 2 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]

[ 2018-09-20T13:41:57+08:00 ] ::1 /Dwin/Purchase/getContractProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0360s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getcontractproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getcontractproduct','1537422117','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10126\"}') [ RunTime:0.0890s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0310s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176519' ORDER BY id desc  LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract_product` [ RunTime:0.0070s ]
SQL: SELECT crm_purchase_contract_product.*,crm_staff.name FROM `crm_purchase_contract_product` left join crm_staff on crm_staff.id = crm_purchase_contract_product.create_id  WHERE `is_del` = 0 AND `contract_pid` = '10126'  [ RunTime:0.0090s ]

[ 2018-09-20T13:42:03+08:00 ] ::1 /Dwin/Purchase/createorderId.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0260s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/createorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/createorderid','1537422123','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','GET','{\"\\/Dwin\\/Purchase\\/createorderId_html\":\"\"}') [ RunTime:0.0720s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176521' ORDER BY id desc  LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_max_id` [ RunTime:0.0160s ]
SQL: SELECT `max_id` FROM `crm_max_id` WHERE `table` = 'order' LIMIT 1   FOR UPDATE  [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_max_id` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_max_id` WHERE `table` = 'order'  [ RunTime:0.0040s ]
SQL: UPDATE `crm_max_id` SET `max_id`='10019' WHERE `table` = 'order' [ RunTime:0.0330s ]
SQL: show full fields from crm_max_id [ RunTime:0.0070s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `before_data`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Purchase/createorderId',
                                        'crm_max_id',
                                        '{"id":"","table":"表名","max_id":"最大id"}',
                                        2,
                                        '17',
                                        '[{"id":"17","table":"order","max_id":"10018"}]',
                                        '[{"max_id":10019,"id":"17","table":"order"}]',
                                        1537422123
                                    ); [ RunTime:0.0410s ]

[ 2018-09-20T13:42:12+08:00 ] ::1 /Dwin/Purchase/createOrderWithContract.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0170s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0440s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/createorderwithcontract%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/createorderwithcontract','1537422131','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10018\",\"contractId\":\"10126\",\"orderId\":\"CGD-10018\",\"purchaseMode\":\"\\u666e\\u901a\\u91c7\\u8d2d\",\"purchaseType\":\"\\u8d4a\\u8d2d\"}') [ RunTime:0.3180s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176522' ORDER BY id desc  LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0260s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract` [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract` [ RunTime:0.0220s ]
SQL: SELECT * FROM `crm_purchase_contract` WHERE `id` = 10126 LIMIT 1   [ RunTime:0.0120s ]
NOTIC: [8] Undefined index: validate F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1372 行.
NOTIC: [8] Undefined index: auto F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1315 行.
SQL: INSERT INTO `crm_purchase_order` (`id`,`contract_pid`,`purchase_order_id`,`create_time`,`create_id`,`update_time`,`order_time`,`update_id`,`audit_status`,`is_del`,`supplier_pid`,`supplier_name`,`total_amount`,`capital_amount`,`note`,`receiver`,`trading_location`,`receiving_phone`,`billing_method`,`supply_address`,`supplier_representative`,`supplier_phone`,`supplier_fax`,`demand_address`,`purchaser_representative`,`purchaser_phone`,`purchaser_fax`,`purchase_mode`,`purchase_type`) VALUES ('10018','10126','CGD-10018','1537422132','394','1537422132','1537422132','394','0','0','10349','python蟒蛇','50000.00','伍万圆整',NULL,'日本天皇','钓鱼岛','120***0791','结算方式一','长隆游乐园','姬如雪','2','2','湖南省常德市桃源县漳江创业园创业大道8号','上官云阙','0791','0791','普通采购','赊购') [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract_product` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_purchase_contract_product` WHERE `contract_pid` = 10126 AND `is_del` = 0  [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0260s ]
NOTIC: [8] Undefined index: validate F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1372 行.
NOTIC: [8] Undefined index: auto F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1315 行.
NOTIC: [8] Undefined index: validate F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1372 行.
NOTIC: [8] Undefined index: auto F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1315 行.
SQL: INSERT INTO `crm_purchase_order_product` (`order_pid`,`product_id`,`product_no`,`product_name`,`product_number`,`number`,`stock_in_number`,`single_price`,`total_price`,`sort_id`,`deliver_time`,`is_del`,`create_time`,`update_time`,`update_id`) VALUES ('10018','269','00269','DMT80480Q070-01WZ','DMT80480Q070-01WZ','100','0','100','10000','1','1537459200','0','1537422132','1537422132','394'),('10018','267','00267','DMT32240Q035-01WZ','DMT32240Q035-01WZ','200','0','200','40000','2','1538150400','0','1537422132','1537422132','394') [ RunTime:0.0120s ]
SQL: show full fields from crm_purchase_order_product [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_purchase_order_product` WHERE `id` <= '13' ORDER BY id desc  LIMIT 2   [ RunTime:0.0830s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Purchase/createOrderWithContract',
                                        'crm_purchase_order_product',
                                        '{"id":"主键","order_pid":"供应商订单表主键","product_id":"物料表主键","product_no":"物料编号","product_name":"物料型号","product_number":"物料名称","number":"购买数量","stock_in_number":"已入库数量","single_price":"购买单价","total_price":"数量*单价","deliver_time":"交货时间","sort_id":"排序id","is_del":"是否删除：默认0 未删除","update_time":"更新时间","update_id":"更新人","create_id":"创建人","create_time":"创建时间"}',
                                        1,
                                        '13,12',
                                        '[{"id":"13","order_pid":"10018","product_id":"269","product_no":"00269","product_name":"DMT80480Q070-01WZ","product_number":"DMT80480Q070-01WZ","number":"100","stock_in_number":"0","single_price":"100","total_price":"10000","deliver_time":"1537459200","sort_id":"1","is_del":"0","update_time":"1537422132","update_id":"394","create_id":null,"create_time":"1537422132"},{"id":"12","order_pid":"10017","product_id":"15521","product_no":"00141","product_name":"DW100A1","product_number":"DW100A1","number":"3","stock_in_number":"0","single_price":"890","total_price":"2670","deliver_time":"1537545600","sort_id":"2","is_del":"0","update_time":"1537419871","update_id":"394","create_id":null,"create_time":"1537419871"}]',
                                        1537422132
                                    ); [ RunTime:0.0140s ]

[ 2018-09-20T13:42:13+08:00 ] ::1 /Dwin/Purchase/contractIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0140s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0230s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/contractindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/contractindex','1537422133','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"signing_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_return_contract\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"file_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0820s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0210s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176524' ORDER BY id desc  LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract` [ RunTime:0.0170s ]
SQL: SELECT c.*,s.name,u.file_name,u.path as file_url,IF(IFNULL(count( o.id ),0),1,0) AS order_status FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id left join crm_purchase_order o on o.contract_pid = c.id and o.is_del = 0  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 GROUP BY c.id ORDER BY contract_id asc LIMIT 0,25   [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]

[ 2018-09-20T13:42:18+08:00 ] ::1 /Dwin/Purchase/contractIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0290s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/contractindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/contractindex','1537422138','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"signing_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_return_contract\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"file_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"2\"}') [ RunTime:0.0740s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176525' ORDER BY id desc  LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract` [ RunTime:0.0110s ]
SQL: SELECT c.*,s.name,u.file_name,u.path as file_url,IF(IFNULL(count( o.id ),0),1,0) AS order_status FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id left join crm_purchase_order o on o.contract_pid = c.id and o.is_del = 0  WHERE c.audit_status = 2 AND c.charger = '394' AND c.is_del = 0 GROUP BY c.id ORDER BY contract_id asc LIMIT 0,25   [ RunTime:0.0150s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 2 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0120s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 2 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0020s ]

[ 2018-09-20T13:42:25+08:00 ] ::1 /Dwin/Purchase/getContractProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0290s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getcontractproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getcontractproduct','1537422145','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10126\"}') [ RunTime:0.0780s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176526' ORDER BY id desc  LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract_product` [ RunTime:0.0100s ]
SQL: SELECT crm_purchase_contract_product.*,crm_staff.name FROM `crm_purchase_contract_product` left join crm_staff on crm_staff.id = crm_purchase_contract_product.create_id  WHERE `is_del` = 0 AND `contract_pid` = '10126'  [ RunTime:0.0250s ]

[ 2018-09-20T13:42:32+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0270s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537422152','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0660s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176528' ORDER BY id desc  LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0130s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0120s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]

[ 2018-09-20T13:42:34+08:00 ] ::1 /Dwin/Purchase/getOrderProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0190s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0060s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0360s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getorderproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getorderproduct','1537422154','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10018\"}') [ RunTime:0.0750s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176529' ORDER BY id desc  LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0080s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10018' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0150s ]

[ 2018-09-20T13:42:37+08:00 ] ::1 /Dwin/Purchase/auditOrder.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0180s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0410s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/auditorder%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/auditorder','1537422157','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"orderId\":\"10018\",\"status\":\"2\"}') [ RunTime:0.0760s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0330s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176530' ORDER BY id desc  LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0130s ]
SQL: SELECT `audit_status` FROM `crm_purchase_order` WHERE `id` = 10018 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0160s ]
SQL: SELECT * FROM `crm_purchase_order` WHERE `id` = 10018  [ RunTime:0.0090s ]
SQL: UPDATE `crm_purchase_order` SET `audit_status`='2',`update_id`='394',`update_time`='1537422157' WHERE `id` = 10018 [ RunTime:0.0500s ]
SQL: show full fields from crm_purchase_order [ RunTime:0.0180s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `before_data`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Purchase/auditOrder',
                                        'crm_purchase_order',
                                        '{"id":"主键","contract_pid":"供应商合同表主键","supplier_pid":"供应商表主键","supplier_name":"供方名称","purchase_order_id":"订单编号","create_time":"创建时间","create_id":"创建人","update_time":"更新时间","update_id":"更新人","is_del":"是否删除：默认0 未删除","order_time":"订单时间","total_amount":"总金额","capital_amount":"大写总金额","note":"备注","receiver":"收货人","trading_location":"交货地点","receiving_phone":"收货电话","billing_method":"结算方式","supply_address":"供方地址","supplier_representative":"供方法定代表","supplier_phone":"供方代表电话","supplier_fax":"供方代表传真","demand_address":"需方地址","purchaser_representative":"需方法定代表","purchaser_phone":"需方电话","purchaser_fax":"需方传真","purchase_mode":"采购模式","purchase_type":"采购方式","audit_status":"2- 通过 1-不通过 0-未审核","stock_status":"0 未入库 1 入库中 2 入库完毕"}',
                                        2,
                                        '10018',
                                        '[{"id":"10018","contract_pid":"10126","supplier_pid":"10349","supplier_name":"python蟒蛇","purchase_order_id":"CGD-10018","create_time":"1537422132","create_id":"394","update_time":"1537422132","update_id":"394","is_del":"0","order_time":"1537422132","total_amount":"50000.00","capital_amount":"伍万圆整","note":null,"receiver":"日本天皇","trading_location":"钓鱼岛","receiving_phone":"120***0791","billing_method":"结算方式一","supply_address":"长隆游乐园","supplier_representative":"姬如雪","supplier_phone":"2","supplier_fax":"2","demand_address":"湖南省常德市桃源县漳江创业园创业大道8号","purchaser_representative":"上官云阙","purchaser_phone":"0791","purchaser_fax":"0791","purchase_mode":"普通采购","purchase_type":"赊购","audit_status":"0","stock_status":"0"}]',
                                        '[{"audit_status":2,"update_time":1537422157,"id":"10018","contract_pid":"10126","supplier_pid":"10349","supplier_name":"python蟒蛇","purchase_order_id":"CGD-10018","create_time":"1537422132","create_id":"394","update_id":"394","is_del":"0","order_time":"1537422132","total_amount":"50000.00","capital_amount":"伍万圆整","note":null,"receiver":"日本天皇","trading_location":"钓鱼岛","receiving_phone":"120***0791","billing_method":"结算方式一","supply_address":"长隆游乐园","supplier_representative":"姬如雪","supplier_phone":"2","supplier_fax":"2","demand_address":"湖南省常德市桃源县漳江创业园创业大道8号","purchaser_representative":"上官云阙","purchaser_phone":"0791","purchaser_fax":"0791","purchase_mode":"普通采购","purchase_type":"赊购","stock_status":"0"}]',
                                        1537422157
                                    ); [ RunTime:0.0660s ]

[ 2018-09-20T13:42:38+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0180s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0220s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537422157','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0440s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176531' ORDER BY id desc  LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0180s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0060s ]

[ 2018-09-20T13:42:40+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0200s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0260s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537422159','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"3\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"2\"}') [ RunTime:0.1120s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0190s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176532' ORDER BY id desc  LIMIT 1   [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0080s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 2 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0170s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 2 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0280s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 2 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0070s ]

[ 2018-09-20T13:42:42+08:00 ] ::1 /Dwin/Purchase/getOrderProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0220s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0340s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getorderproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0170s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getorderproduct','1537422161','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10018\"}') [ RunTime:0.0490s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176533' ORDER BY id desc  LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0210s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10018' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0050s ]

[ 2018-09-20T13:42:44+08:00 ] ::1 /Dwin/Stock/getSelectInfo.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0270s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getselectinfo%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getselectinfo','1537422164','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','[]') [ RunTime:0.0670s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176535' ORDER BY id desc  LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_repertorylist` [ RunTime:0.0110s ]
SQL: SELECT rep_id warehouse_id,repertory_name warehouse_name,concat_ws(',',`warehouse_manager_id`,logistics_staff_id) auditor_ids FROM `crm_repertorylist` WHERE `cate_flag` = '1'  [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_staff` [ RunTime:0.0150s ]
SQL: SELECT id auditor_id,name auditor_name FROM `crm_staff` WHERE `id` IN ('241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393')  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_role` [ RunTime:0.0130s ]
SQL: SELECT `role_id`,`staff_ids` FROM `crm_auth_role` WHERE `role_id` IN (1,2,3,8,13,16,34,37,40,43,44,45,46,47,48,49,51,21)  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT `id`,`name` FROM `crm_staff` WHERE `id` IN ('65','1','394','395','223','','197','214','227','228','229','198','199','200','201','202','203','204','205','216','','226','392','241','242','243','244','245','246','247','248','249','250','251','252','253','254','233','235','236','237','238','239','240','234','')  [ RunTime:0.0050s ]

[ 2018-09-20T13:43:17+08:00 ] ::1 /Dwin/Stock/addStockInWithPurchase.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0170s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0190s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/addstockinwithpurchase%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0200s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/addstockinwithpurchase','1537422196','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"base\":{\"source_id\":\"10018\",\"other_bill\":\"0791\",\"pay_time\":\"1537372800\",\"auditorArr\":\"392_\\u674e\\u70ab\\u9f99\",\"keepArr\":\"236_\\u674e\\u73b2\",\"checkArr\":\"394_zengyongtai\"},\"material\":[{\"product_id\":\"269\",\"product_no\":\"00269\",\"num\":\"10\",\"default_rep_id\":\"K004\",\"fail_rep_id\":\"K010\"},{\"product_id\":\"267\",\"product_no\":\"00267\",\"num\":\"10\",\"default_rep_id\":\"K004\",\"fail_rep_id\":\"K010\"}]}') [ RunTime:0.0590s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176536' ORDER BY id desc  LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0320s ]
SQL: SHOW COLUMNS FROM `crm_stock_io_cate` [ RunTime:0.0140s ]
SQL: SELECT * FROM `crm_stock_io_cate` WHERE `type` = 1  [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_stock_io_cate` WHERE `type` = 2  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0180s ]
SQL: SELECT crm_purchase_order.*,crm_staff.name FROM `crm_purchase_order` left join crm_staff on crm_staff.id = crm_purchase_order.create_id  WHERE crm_purchase_order.is_del = 0 AND crm_purchase_order.id = '10018' LIMIT 1   [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_max_id` [ RunTime:0.0080s ]
SQL: SELECT `max_id` FROM `crm_max_id` WHERE `table` = 'stock_in' LIMIT 1   FOR UPDATE  [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_max_id` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_max_id` WHERE `table` = 'stock_in'  [ RunTime:0.0040s ]
SQL: UPDATE `crm_max_id` SET `max_id`='10288' WHERE `table` = 'stock_in' [ RunTime:0.1090s ]
SQL: show full fields from crm_max_id [ RunTime:0.0150s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `before_data`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Stock/addStockInWithPurchase',
                                        'crm_max_id',
                                        '{"id":"","table":"表名","max_id":"最大id"}',
                                        2,
                                        '18',
                                        '[{"id":"18","table":"stock_in","max_id":"10287"}]',
                                        '[{"max_id":10288,"id":"18","table":"stock_in"}]',
                                        1537422196
                                    ); [ RunTime:0.0350s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10018' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0150s ]
NOTIC: [8] Undefined index: tips F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\StockInModel.class.php 第 91 行.
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0170s ]
SQL: SELECT COUNT(*) AS tp_count FROM `crm_stock_in_purchase` WHERE `is_del` = 0 AND `source_id` = '10018' LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stock_in_purchase` WHERE `stock_in_id` = 'WGRK-10287' AND `id` <> '10287' LIMIT 1   [ RunTime:0.0060s ]
NOTIC: [8] Undefined index: auto F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1315 行.
NOTIC: [8] Undefined index: validate F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1372 行.
NOTIC: [8] Undefined index: validate F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1372 行.
SQL: INSERT INTO `crm_stock_in_purchase` (`source_id`,`id`,`stock_in_id`,`cate`,`cate_name`,`tips`,`auditor`,`auditor_name`,`keep_id`,`keep_name`,`check_id`,`check_name`,`create_name`,`create_id`,`create_time`,`update_time`,`audit_status`,`batch`,`pay_time`,`other_bill`) VALUES ('10018','10287','WGRK-10287','8','外购入库','','392','李炫龙','236','李玲','394','zengyongtai','zengyongtai','394','1537422196','1537422196','0','1','1537372800','0791') [ RunTime:0.0060s ]
SQL: show full fields from crm_stock_in_purchase [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_stock_in_purchase` WHERE `id` <= '10287' ORDER BY id desc  LIMIT 1   [ RunTime:0.0200s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Stock/addStockInWithPurchase',
                                        'crm_stock_in_purchase',
                                        '{"id":"主键","cate":"*分类","cate_name":"*分类名","stock_in_id":"*入库单编号","source_id":"*订单表主键","other_bill":"对方单据","pay_time":"付款时间","pay_condition":"付款条件","Intercourse_subject":"往来科目","print_time":"*打印次数","batch":"*入库批次","create_id":"*制单人id","create_name":"*制单人姓名","create_time":"*创建时间","tips":"*入库备注","auditor":"*审核人ID","auditor_name":"*审核人姓名","audit_status":"*0-为审核 1-审核不合格 2-审核合格","audit_tips":"*审核备注","audit_time":"*审核时间","keep_id":"*保管人ID","keep_name":"*保管人姓名","charge_id":"负责人id","charge_name":"负责人姓名","check_id":"*验收人id","check_name":"*验收人姓名","update_time":"*更新时间","is_del":"0-未删除 1-已删除","account_id":"记账人id","account_name":"记账人姓名","business_id":"业务员id","business_name":"业务员姓名"}',
                                        1,
                                        '10287',
                                        '[{"id":"10287","cate":"8","cate_name":"外购入库","stock_in_id":"WGRK-10287","source_id":"10018","other_bill":"0791","pay_time":"1537372800","pay_condition":"","intercourse_subject":"","print_time":"0","batch":"1","create_id":"394","create_name":"zengyongtai","create_time":"1537422196","tips":"","auditor":"392","auditor_name":"李炫龙","audit_status":"0","audit_tips":"","audit_time":null,"keep_id":"236","keep_name":"李玲","charge_id":null,"charge_name":"","check_id":"394","check_name":"zengyongtai","update_time":"1537422196","is_del":"0","account_id":null,"account_name":"","business_id":null,"business_name":""}]',
                                        1537422197
                                    ); [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stock_material` (`source_id`,`product_id`,`product_no`,`num`,`rep_pid`,`unqualified_rep_pid`,`type`,`create_time`,`update_time`) VALUES ('10287','269','00269','10','K004','K010','1','1537422196','1537422196'),('10287','267','00267','10','K004','K010','1','1537422196','1537422196') [ RunTime:0.0070s ]
SQL: show full fields from crm_stock_material [ RunTime:0.0330s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0250s ]
SQL: SELECT * FROM `crm_stock_material` WHERE `id` <= '140' ORDER BY id desc  LIMIT 2   [ RunTime:0.0040s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                    `staff_id`,
                                    `staff_name`,
                                    `path`,
                                    `table_name`,
                                    `comment`,
                                    `type`,
                                    `major_key`,
                                    `now_data`,
                                    `create_time`
                                )
                                VALUES
                                    (
                                        394,
                                        'zengyongtai',
                                        'Stock/addStockInWithPurchase',
                                        'crm_stock_material',
                                        '{"id":"","source_id":"出入库源单主键id","product_id":"物料表主键","product_no":"物料编号","num":"制单出入库数量","type":"1:入库;2:出库;","rep_pid":"默认出入库仓库id","unqualified_rep_pid":"默认质检不合格入库仓库id;","tips":"备注","create_time":"创建时间","update_time":"更新时间","is_del":"是否被删除 0 未删除 1 已删除"}',
                                        1,
                                        '140,139',
                                        '[{"id":"140","source_id":"10287","product_id":"269","product_no":"00269","num":"10","type":"1","rep_pid":"K004","unqualified_rep_pid":"K010","tips":null,"create_time":"1537422196","update_time":"1537422196","is_del":"0"},{"id":"139","source_id":"10279","product_id":"15521","product_no":"00141","num":"3","type":"1","rep_pid":"K001","unqualified_rep_pid":"K20","tips":null,"create_time":"1537420325","update_time":"1537420325","is_del":"0"}]',
                                        1537422197
                                    ); [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0080s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10018' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0170s ]
NOTIC: [8] Undefined index: surplusnum F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseOrderModel.class.php 第 591 行.
NOTIC: [8] Undefined index: surplusnum F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseOrderModel.class.php 第 593 行.
NOTIC: [8] Undefined index: allnum F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseOrderModel.class.php 第 593 行.
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0500s ]
SQL: SELECT * FROM `crm_purchase_order` WHERE `id` = '10018'  [ RunTime:0.0130s ]
SQL: UPDATE `crm_purchase_order` SET `stock_status`='0',`id`='10018' WHERE `id` = '10018' [ RunTime:0.0160s ]

[ 2018-09-20T13:43:18+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0450s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537422197','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"4\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"2\"}') [ RunTime:0.1060s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176537' ORDER BY id desc  LIMIT 1   [ RunTime:0.0470s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0330s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 2 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0250s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 2 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 2 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]

[ 2018-09-20T13:43:21+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0190s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537422201','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"5\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"1\"}') [ RunTime:0.0460s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176538' ORDER BY id desc  LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0110s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 1 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0070s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 1 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 1 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]

[ 2018-09-20T13:43:22+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0410s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0180s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537422202','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"6\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"2\"}') [ RunTime:0.0750s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176539' ORDER BY id desc  LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0300s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 2 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 2 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 2 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]

[ 2018-09-20T13:43:27+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0160s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537422206','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0780s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0290s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176541' ORDER BY id desc  LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0200s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0130s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0100s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0140s ]

[ 2018-09-20T13:45:08+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0160s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0300s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537422308','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0480s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176543' ORDER BY id desc  LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0080s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0070s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0070s ]

[ 2018-09-20T13:47:43+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0210s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537422463','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.1290s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176545' ORDER BY id desc  LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0130s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0050s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0060s ]

[ 2018-09-20T13:51:11+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0180s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0200s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537422670','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0470s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176547' ORDER BY id desc  LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0100s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0070s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0140s ]

[ 2018-09-20T13:56:26+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0260s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537422986','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0660s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176549' ORDER BY id desc  LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0070s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0040s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0060s ]

[ 2018-09-20T13:56:33+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0480s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537422993','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"5\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0660s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176550' ORDER BY id desc  LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0090s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,5   [ RunTime:0.0090s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9') AND s.is_del = 0  [ RunTime:0.0070s ]

[ 2018-09-20T13:58:14+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0100s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0060s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423094','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0700s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176551' ORDER BY id desc  LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0140s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0050s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0070s ]

[ 2018-09-20T13:58:17+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0940s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0290s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0220s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0060s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423097','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"20\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0870s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176552' ORDER BY id desc  LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0080s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,20   [ RunTime:0.0050s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0050s ]

[ 2018-09-20T13:58:19+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0210s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423099','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"5\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0710s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176553' ORDER BY id desc  LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0210s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,5   [ RunTime:0.0090s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9') AND s.is_del = 0  [ RunTime:0.0040s ]

[ 2018-09-20T13:58:30+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0150s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423109','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.3230s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176554' ORDER BY id desc  LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0120s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0090s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0110s ]

[ 2018-09-20T13:58:32+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0240s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423111','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"20\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0720s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176555' ORDER BY id desc  LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0120s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,20   [ RunTime:0.0040s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0040s ]

[ 2018-09-20T13:58:36+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0410s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423116','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"5\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0790s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176556' ORDER BY id desc  LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0120s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,5   [ RunTime:0.0050s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9') AND s.is_del = 0  [ RunTime:0.0030s ]

[ 2018-09-20T13:59:14+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423154','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0830s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176558' ORDER BY id desc  LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0100s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0070s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0060s ]

[ 2018-09-20T13:59:47+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0250s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0260s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423187','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"5\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0770s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176559' ORDER BY id desc  LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0120s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,5   [ RunTime:0.0120s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9') AND s.is_del = 0  [ RunTime:0.0100s ]

[ 2018-09-20T14:03:30+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0100s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423409','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0610s ]
SQL: show full fields from crm_stafflog [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_stafflog` WHERE `id` <= '176570' ORDER BY id desc  LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0100s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0060s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0030s ]

[ 2018-09-20T14:04:38+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0160s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0280s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423478','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0750s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0240s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0110s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0070s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0090s ]

[ 2018-09-20T14:05:37+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423537','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"5\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0950s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0090s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,5   [ RunTime:0.0040s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0070s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9') AND s.is_del = 0  [ RunTime:0.0040s ]

[ 2018-09-20T14:05:40+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0200s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423540','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"2\",\"page_sizes\":\"5\",\"total\":\"2\",\"condition\":\"\"}') [ RunTime:0.0430s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0100s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 5,5   [ RunTime:0.0070s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0070s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0050s ]

[ 2018-09-20T14:05:41+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0370s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423541','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"5\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.1280s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0340s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,5   [ RunTime:0.0040s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0120s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9') AND s.is_del = 0  [ RunTime:0.0030s ]

[ 2018-09-20T14:05:43+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0160s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423543','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"2\",\"page_sizes\":\"5\",\"total\":\"2\",\"condition\":\"\"}') [ RunTime:0.0600s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0140s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 5,5   [ RunTime:0.0040s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0040s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0040s ]

[ 2018-09-20T14:05:44+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0110s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423544','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"5\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0700s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0110s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,5   [ RunTime:0.0090s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0110s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9') AND s.is_del = 0  [ RunTime:0.0040s ]

[ 2018-09-20T14:05:46+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0150s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0240s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423545','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"2\",\"page_sizes\":\"5\",\"total\":\"2\",\"condition\":\"\"}') [ RunTime:0.0630s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0110s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 5,5   [ RunTime:0.0220s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0050s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0100s ]

[ 2018-09-20T14:05:47+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423547','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"5\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0870s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0130s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,5   [ RunTime:0.0100s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0080s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9') AND s.is_del = 0  [ RunTime:0.0040s ]

[ 2018-09-20T14:05:49+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0150s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423549','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"2\",\"page_sizes\":\"5\",\"total\":\"2\",\"condition\":\"\"}') [ RunTime:0.0540s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0080s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 5,5   [ RunTime:0.0060s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0100s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0100s ]

[ 2018-09-20T14:05:52+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423551','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"5\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0560s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0120s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,5   [ RunTime:0.0240s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0080s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9') AND s.is_del = 0  [ RunTime:0.0030s ]

[ 2018-09-20T14:05:53+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0140s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0260s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423553','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"2\",\"page_sizes\":\"5\",\"total\":\"2\",\"condition\":\"\"}') [ RunTime:0.0700s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0110s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 5,5   [ RunTime:0.0050s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0080s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0050s ]

[ 2018-09-20T14:06:00+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0160s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423560','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"5\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0670s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0080s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,5   [ RunTime:0.0040s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0120s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9') AND s.is_del = 0  [ RunTime:0.0070s ]

[ 2018-09-20T14:08:20+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0190s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0150s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0410s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423699','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0560s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0380s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0060s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0280s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0050s ]

[ 2018-09-20T14:08:23+08:00 ] ::1 /Dwin/Index/checkPostInfo
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0160s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0230s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%index/checkpostinfo%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0200s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`auth_rule_name`,`level`,`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('系统检测菜单权限',NULL,'394','::1','index/checkpostinfo','1537423703','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"flag\":\"1\"}') [ RunTime:0.0810s ]

[ 2018-09-20T14:08:23+08:00 ] ::1 /Dwin/Index/getOrderMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0190s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0250s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0560s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%index/getordermsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`auth_rule_name`,`level`,`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('系统检测不合格订单',NULL,'394','::1','index/getordermsg','1537423703','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','[]') [ RunTime:0.0700s ]
SQL: SHOW COLUMNS FROM `crm_orderform` [ RunTime:0.0130s ]
SQL: SELECT `cus_name` FROM `crm_orderform` WHERE `picid` = '394' AND `check_status` = '2' AND `is_del` = 0  [ RunTime:0.0210s ]

[ 2018-09-20T14:08:27+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0160s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0530s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537423707','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0590s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0230s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0130s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0090s ]

[ 2018-09-20T14:08:29+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0190s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0480s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0220s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537423709','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0670s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0230s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0140s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0120s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0170s ]

[ 2018-09-20T14:10:11+08:00 ] ::1 /Dwin/Stock/purchaseOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0140s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0210s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseorderindex','1537423811','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0820s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0170s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT a.id,a.supplier_name,a.purchase_order_id,from_unixtime(a.create_time) create_time,a.create_id,u.name create_name,from_unixtime(a.update_time) update_time,from_unixtime(a.order_time) order_time,a.billing_method,a.purchase_mode,a.purchase_type,c.contract_id,a.audit_status,a.stock_status FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 ORDER BY order_time asc LIMIT 0,25   [ RunTime:0.0080s ]

[ 2018-09-20T14:11:55+08:00 ] ::1 /Dwin/Stock/getOrderProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.5590s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getorderproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0190s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getorderproduct','1537423915','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10018\"}') [ RunTime:0.3480s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0190s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10018' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0220s ]

[ 2018-09-20T14:12:06+08:00 ] ::1 /Dwin/Stock/getSelectInfo.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0190s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0410s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getselectinfo%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0280s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0230s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getselectinfo','1537423926','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','[]') [ RunTime:0.0750s ]
SQL: SHOW COLUMNS FROM `crm_repertorylist` [ RunTime:0.0210s ]
SQL: SELECT rep_id warehouse_id,repertory_name warehouse_name,concat_ws(',',`warehouse_manager_id`,logistics_staff_id) auditor_ids FROM `crm_repertorylist` WHERE `cate_flag` = '1'  [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_staff` [ RunTime:0.0120s ]
SQL: SELECT id auditor_id,name auditor_name FROM `crm_staff` WHERE `id` IN ('241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393','241','392','393')  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_role` [ RunTime:0.0120s ]
SQL: SELECT `role_id`,`staff_ids` FROM `crm_auth_role` WHERE `role_id` IN (1,2,3,8,13,16,34,37,40,43,44,45,46,47,48,49,51,21)  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT `id`,`name` FROM `crm_staff` WHERE `id` IN ('65','1','394','395','223','','197','214','227','228','229','198','199','200','201','202','203','204','205','216','','226','392','241','242','243','244','245','246','247','248','249','250','251','252','253','254','233','235','236','237','238','239','240','234','')  [ RunTime:0.0090s ]

[ 2018-09-20T14:12:47+08:00 ] ::1 /Dwin/Stock/addStockInWithPurchase.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0550s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/addstockinwithpurchase%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/addstockinwithpurchase','1537423966','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"base\":{\"source_id\":\"10018\",\"other_bill\":\"0791\",\"pay_time\":\"1538150400\",\"auditorArr\":\"392_\\u674e\\u70ab\\u9f99\",\"keepArr\":\"394_zengyongtai\",\"checkArr\":\"394_zengyongtai\"},\"material\":[{\"product_id\":\"269\",\"product_no\":\"00269\",\"num\":\"10\",\"default_rep_id\":\"K004\",\"fail_rep_id\":\"K010\"},{\"product_id\":\"267\",\"product_no\":\"00267\",\"num\":\"10\",\"default_rep_id\":\"K004\",\"fail_rep_id\":\"K010\"}]}') [ RunTime:0.0770s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_io_cate` [ RunTime:0.0190s ]
SQL: SELECT * FROM `crm_stock_io_cate` WHERE `type` = 1  [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stock_io_cate` WHERE `type` = 2  [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0200s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0080s ]
SQL: SELECT crm_purchase_order.*,crm_staff.name FROM `crm_purchase_order` left join crm_staff on crm_staff.id = crm_purchase_order.create_id  WHERE crm_purchase_order.is_del = 0 AND crm_purchase_order.id = '10018' LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_max_id` [ RunTime:0.0750s ]
SQL: SELECT `max_id` FROM `crm_max_id` WHERE `table` = 'stock_in' LIMIT 1   FOR UPDATE  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_max_id` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_max_id` WHERE `table` = 'stock_in'  [ RunTime:0.0100s ]
SQL: UPDATE `crm_max_id` SET `max_id`='10289' WHERE `table` = 'stock_in' [ RunTime:0.0870s ]
SQL: show full fields from crm_max_id [ RunTime:0.0090s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                `staff_id`,
                                `staff_name`,
                                `path`,
                                `table_name`,
                                `comment`,
                                `type`,
                                `major_key`,
                                `before_data`,
                                `now_data`,
                                `create_time`
                            )
                            VALUES
                                (
                                    394,
                                    'zengyongtai',
                                    'Stock/addStockInWithPurchase',
                                    'crm_max_id',
                                    '{"id":"","table":"表名","max_id":"最大id"}',
                                    2,
                                    '18',
                                    '[{"id":"18","table":"stock_in","max_id":"10288"}]',
                                    '[{"max_id":10289,"id":"18","table":"stock_in"}]',
                                    1537423966
                                ); [ RunTime:0.0390s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10018' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0090s ]
NOTIC: [8] Undefined index: tips F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\StockInModel.class.php 第 91 行.
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0180s ]
SQL: SELECT COUNT(*) AS tp_count FROM `crm_stock_in_purchase` WHERE `is_del` = 0 AND `source_id` = '10018' LIMIT 1   [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_stock_in_purchase` WHERE `stock_in_id` = 'WGRK-10288' AND `id` <> '10288' LIMIT 1   [ RunTime:0.0260s ]
NOTIC: [8] Undefined index: auto F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1301 行.
NOTIC: [8] Undefined index: validate F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1358 行.
NOTIC: [8] Undefined index: validate F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 1358 行.
SQL: INSERT INTO `crm_stock_in_purchase` (`source_id`,`id`,`stock_in_id`,`cate`,`cate_name`,`tips`,`auditor`,`auditor_name`,`keep_id`,`keep_name`,`check_id`,`check_name`,`create_name`,`create_id`,`create_time`,`update_time`,`audit_status`,`batch`,`pay_time`,`other_bill`) VALUES ('10018','10288','WGRK-10288','8','外购入库','','392','李炫龙','394','zengyongtai','394','zengyongtai','zengyongtai','394','1537423966','1537423966','0','2','1538150400','0791') [ RunTime:0.0070s ]
SQL: show full fields from crm_stock_in_purchase [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0140s ]
SQL: SELECT * FROM `crm_stock_in_purchase` WHERE `id` <= '10288' ORDER BY id desc  LIMIT 1   [ RunTime:0.0210s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                `staff_id`,
                                `staff_name`,
                                `path`,
                                `table_name`,
                                `comment`,
                                `type`,
                                `major_key`,
                                `now_data`,
                                `create_time`
                            )
                            VALUES
                                (
                                    394,
                                    'zengyongtai',
                                    'Stock/addStockInWithPurchase',
                                    'crm_stock_in_purchase',
                                    '{"id":"主键","cate":"*分类","cate_name":"*分类名","stock_in_id":"*入库单编号","source_id":"*订单表主键","other_bill":"对方单据","pay_time":"付款时间","pay_condition":"付款条件","Intercourse_subject":"往来科目","print_time":"*打印次数","batch":"*入库批次","create_id":"*制单人id","create_name":"*制单人姓名","create_time":"*创建时间","tips":"*入库备注","auditor":"*审核人ID","auditor_name":"*审核人姓名","audit_status":"*0-为审核 1-审核不合格 2-审核合格","audit_tips":"*审核备注","audit_time":"*审核时间","keep_id":"*保管人ID","keep_name":"*保管人姓名","charge_id":"负责人id","charge_name":"负责人姓名","check_id":"*验收人id","check_name":"*验收人姓名","update_time":"*更新时间","is_del":"0-未删除 1-已删除","account_id":"记账人id","account_name":"记账人姓名","business_id":"业务员id","business_name":"业务员姓名"}',
                                    1,
                                    '10288',
                                    '[{"id":"10288","cate":"8","cate_name":"外购入库","stock_in_id":"WGRK-10288","source_id":"10018","other_bill":"0791","pay_time":"1538150400","pay_condition":"","intercourse_subject":"","print_time":"0","batch":"2","create_id":"394","create_name":"zengyongtai","create_time":"1537423966","tips":"","auditor":"392","auditor_name":"李炫龙","audit_status":"0","audit_tips":"","audit_time":null,"keep_id":"394","keep_name":"zengyongtai","charge_id":null,"charge_name":"","check_id":"394","check_name":"zengyongtai","update_time":"1537423966","is_del":"0","account_id":null,"account_name":"","business_id":null,"business_name":""}]',
                                    1537423966
                                ); [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stock_material` (`source_id`,`product_id`,`product_no`,`num`,`rep_pid`,`unqualified_rep_pid`,`type`,`create_time`,`update_time`) VALUES ('10288','269','00269','10','K004','K010','1','1537423966','1537423966'),('10288','267','00267','10','K004','K010','1','1537423966','1537423966') [ RunTime:0.0090s ]
SQL: show full fields from crm_stock_material [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_stock_material` WHERE `id` <= '142' ORDER BY id desc  LIMIT 2   [ RunTime:0.0170s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                `staff_id`,
                                `staff_name`,
                                `path`,
                                `table_name`,
                                `comment`,
                                `type`,
                                `major_key`,
                                `now_data`,
                                `create_time`
                            )
                            VALUES
                                (
                                    394,
                                    'zengyongtai',
                                    'Stock/addStockInWithPurchase',
                                    'crm_stock_material',
                                    '{"id":"","source_id":"出入库源单主键id","product_id":"物料表主键","product_no":"物料编号","num":"制单出入库数量","type":"1:入库;2:出库;","rep_pid":"默认出入库仓库id","unqualified_rep_pid":"默认质检不合格入库仓库id;","tips":"备注","create_time":"创建时间","update_time":"更新时间","is_del":"是否被删除 0 未删除 1 已删除"}',
                                    1,
                                    '142,141',
                                    '[{"id":"142","source_id":"10288","product_id":"269","product_no":"00269","num":"10","type":"1","rep_pid":"K004","unqualified_rep_pid":"K010","tips":null,"create_time":"1537423966","update_time":"1537423966","is_del":"0"},{"id":"141","source_id":"10287","product_id":"267","product_no":"00267","num":"10","type":"1","rep_pid":"K004","unqualified_rep_pid":"K010","tips":null,"create_time":"1537422196","update_time":"1537422196","is_del":"0"}]',
                                    1537423966
                                ); [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0130s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10018' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0110s ]
NOTIC: [8] Undefined index: surplusnum F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseOrderModel.class.php 第 591 行.
NOTIC: [8] Undefined index: surplusnum F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseOrderModel.class.php 第 593 行.
NOTIC: [8] Undefined index: allnum F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseOrderModel.class.php 第 593 行.
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0140s ]
SQL: SELECT * FROM `crm_purchase_order` WHERE `id` = '10018'  [ RunTime:0.0220s ]
SQL: UPDATE `crm_purchase_order` SET `stock_status`='0',`id`='10018' WHERE `id` = '10018' [ RunTime:0.0210s ]

[ 2018-09-20T14:12:48+08:00 ] ::1 /Dwin/Stock/purchaseOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.003000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.004000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0140s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.3220s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0790s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.1650s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0180s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseorderindex','1537423968','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0970s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0150s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 LIMIT 1   [ RunTime:0.0220s ]
SQL: SELECT a.id,a.supplier_name,a.purchase_order_id,from_unixtime(a.create_time) create_time,a.create_id,u.name create_name,from_unixtime(a.update_time) update_time,from_unixtime(a.order_time) order_time,a.billing_method,a.purchase_mode,a.purchase_type,c.contract_id,a.audit_status,a.stock_status FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 ORDER BY order_time asc LIMIT 0,25   [ RunTime:0.0290s ]

[ 2018-09-20T14:12:52+08:00 ] ::1 /Dwin/Stock/purchaseOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0190s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0340s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseorderindex','1537423972','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.1030s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0160s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 LIMIT 1   [ RunTime:0.0350s ]
SQL: SELECT a.id,a.supplier_name,a.purchase_order_id,from_unixtime(a.create_time) create_time,a.create_id,u.name create_name,from_unixtime(a.update_time) update_time,from_unixtime(a.order_time) order_time,a.billing_method,a.purchase_mode,a.purchase_type,c.contract_id,a.audit_status,a.stock_status FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 ORDER BY order_time asc LIMIT 0,25   [ RunTime:0.0200s ]

[ 2018-09-20T14:12:56+08:00 ] ::1 /Dwin/Stock/getOrderProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0160s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0330s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0820s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getorderproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0220s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getorderproduct','1537423975','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10018\"}') [ RunTime:0.0800s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0080s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10018' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0140s ]

[ 2018-09-20T14:13:08+08:00 ] ::1 /Dwin/Stock/showStockInRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0150s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0370s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.1010s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinrecord','1537423988','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.1470s ]
SQL: SHOW COLUMNS FROM `crm_stock_in` [ RunTime:0.0460s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0150s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0570s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0180s ]
SQL: SELECT a.id,a.stock_in_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,task.task_id s_id FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id LEFT JOIN crm_stock_in_record record ON record.source_id = a.id  WHERE a.is_del = 0 AND a.audit_status = 3 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ord.purchase_order_id 
                              FROM crm_stock_in_purchase a 
                              LEFT JOIN crm_purchase_order ord ON ord.id = a.source_id 
                              LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                              WHERE a.audit_status = 3 AND a.is_del = 0 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ifnull(a.source_id,'无') 
                          FROM crm_stock_in_other a 
                          LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                          WHERE a.audit_status = 3 and a.is_del = 0 
                          ORDER BY cate_name desc 
                          LIMIT 0,10 [ RunTime:0.0200s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0270s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0260s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0030s ]

[ 2018-09-20T14:13:15+08:00 ] ::1 /Dwin/Stock/showStockInRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0210s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0350s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinrecord','1537423995','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.0900s ]
SQL: SHOW COLUMNS FROM `crm_stock_in` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0130s ]
SQL: SELECT a.id,a.stock_in_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,task.task_id s_id FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id LEFT JOIN crm_stock_in_record record ON record.source_id = a.id  WHERE a.is_del = 0 AND a.audit_status = 3 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ord.purchase_order_id 
                              FROM crm_stock_in_purchase a 
                              LEFT JOIN crm_purchase_order ord ON ord.id = a.source_id 
                              LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                              WHERE a.audit_status = 3 AND a.is_del = 0 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ifnull(a.source_id,'无') 
                          FROM crm_stock_in_other a 
                          LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                          WHERE a.audit_status = 3 and a.is_del = 0 
                          ORDER BY cate_name desc 
                          LIMIT 0,10 [ RunTime:0.0260s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0200s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0120s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0190s ]

[ 2018-09-20T14:13:24+08:00 ] ::1 /Dwin/Stock/purchaseAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0160s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0190s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.3160s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0640s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0320s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseauditindex','1537424003','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"auditor_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"pay_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"other_bill\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.1260s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0520s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 0 LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT a.id,a.cate,a.cate_name,a.stock_in_id,a.source_id,a.other_bill,from_unixtime(a.pay_time) pay_time,a.pay_condition,a.intercourse_subject,a.print_time,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) create_time,a.tips,a.auditor,a.auditor_name,a.audit_status,a.audit_tips,from_unixtime(a.audit_time) audit_time,a.keep_id,a.keep_name,a.charge_id,a.charge_name,a.account_id,a.account_name,a.check_id,a.check_name,a.business_id,a.business_name,from_unixtime(a.update_time) update_time,o.supplier_name,o.purchase_order_id,o.purchase_mode,o.purchase_type FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 0 ORDER BY stock_in_id asc LIMIT 0,25   [ RunTime:0.0300s ]

[ 2018-09-20T14:13:38+08:00 ] ::1 /Dwin/Stock/getStockInMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0240s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0360s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0600s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockinmaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0270s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockinmaterial','1537424018','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10287\"}') [ RunTime:0.0820s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0280s ]
SQL: SELECT m.id,m.product_id,m.product_no,`num`,cm.product_name,unqualified_rep_pid fail_rep_id,rep_pid default_rep_id FROM crm_stock_material m left join crm_material cm on cm.product_id = m.product_id  WHERE m.type = 1 AND m.is_del = 0 AND m.source_id = '10287'  [ RunTime:0.0130s ]

[ 2018-09-20T14:13:39+08:00 ] ::1 /Dwin/Stock/getStockInMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0370s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0660s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0850s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockinmaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0810s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0320s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockinmaterial','1537424019','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10288\"}') [ RunTime:0.0850s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0320s ]
SQL: SELECT m.id,m.product_id,m.product_no,`num`,cm.product_name,unqualified_rep_pid fail_rep_id,rep_pid default_rep_id FROM crm_stock_material m left join crm_material cm on cm.product_id = m.product_id  WHERE m.type = 1 AND m.is_del = 0 AND m.source_id = '10288'  [ RunTime:0.0090s ]

[ 2018-09-20T14:13:39+08:00 ] ::1 /Dwin/Stock/getStockInMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0200s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0220s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.2820s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockinmaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0500s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockinmaterial','1537424019','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10287\"}') [ RunTime:0.0910s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0190s ]
SQL: SELECT m.id,m.product_id,m.product_no,`num`,cm.product_name,unqualified_rep_pid fail_rep_id,rep_pid default_rep_id FROM crm_stock_material m left join crm_material cm on cm.product_id = m.product_id  WHERE m.type = 1 AND m.is_del = 0 AND m.source_id = '10287'  [ RunTime:0.0260s ]

[ 2018-09-20T14:13:41+08:00 ] ::1 /Dwin/Stock/getStockInMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0210s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0410s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockinmaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockinmaterial','1537424021','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10288\"}') [ RunTime:0.0480s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0120s ]
SQL: SELECT m.id,m.product_id,m.product_no,`num`,cm.product_name,unqualified_rep_pid fail_rep_id,rep_pid default_rep_id FROM crm_stock_material m left join crm_material cm on cm.product_id = m.product_id  WHERE m.type = 1 AND m.is_del = 0 AND m.source_id = '10288'  [ RunTime:0.0130s ]

[ 2018-09-20T14:13:44+08:00 ] ::1 /Dwin/Stock/getStockInMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0140s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0330s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockinmaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockinmaterial','1537424024','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10287\"}') [ RunTime:0.0760s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0240s ]
SQL: SELECT m.id,m.product_id,m.product_no,`num`,cm.product_name,unqualified_rep_pid fail_rep_id,rep_pid default_rep_id FROM crm_stock_material m left join crm_material cm on cm.product_id = m.product_id  WHERE m.type = 1 AND m.is_del = 0 AND m.source_id = '10287'  [ RunTime:0.0040s ]

[ 2018-09-20T14:13:45+08:00 ] ::1 /Dwin/Stock/getStockInMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0250s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0310s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0480s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockinmaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0250s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockinmaterial','1537424025','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10288\"}') [ RunTime:0.0720s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0190s ]
SQL: SELECT m.id,m.product_id,m.product_no,`num`,cm.product_name,unqualified_rep_pid fail_rep_id,rep_pid default_rep_id FROM crm_stock_material m left join crm_material cm on cm.product_id = m.product_id  WHERE m.type = 1 AND m.is_del = 0 AND m.source_id = '10288'  [ RunTime:0.0150s ]

[ 2018-09-20T14:13:46+08:00 ] ::1 /Dwin/Stock/getStockInMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0150s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0340s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockinmaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0170s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockinmaterial','1537424026','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10287\"}') [ RunTime:0.0730s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0250s ]
SQL: SELECT m.id,m.product_id,m.product_no,`num`,cm.product_name,unqualified_rep_pid fail_rep_id,rep_pid default_rep_id FROM crm_stock_material m left join crm_material cm on cm.product_id = m.product_id  WHERE m.type = 1 AND m.is_del = 0 AND m.source_id = '10287'  [ RunTime:0.0090s ]

[ 2018-09-20T14:13:47+08:00 ] ::1 /Dwin/Stock/getStockInMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0450s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockinmaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockinmaterial','1537424027','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10288\"}') [ RunTime:0.0780s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0210s ]
SQL: SELECT m.id,m.product_id,m.product_no,`num`,cm.product_name,unqualified_rep_pid fail_rep_id,rep_pid default_rep_id FROM crm_stock_material m left join crm_material cm on cm.product_id = m.product_id  WHERE m.type = 1 AND m.is_del = 0 AND m.source_id = '10288'  [ RunTime:0.0150s ]

[ 2018-09-20T14:13:51+08:00 ] ::1 /Dwin/Stock/getStockInMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0280s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0170s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0330s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockinmaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockinmaterial','1537424031','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10287\"}') [ RunTime:0.0810s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0150s ]
SQL: SELECT m.id,m.product_id,m.product_no,`num`,cm.product_name,unqualified_rep_pid fail_rep_id,rep_pid default_rep_id FROM crm_stock_material m left join crm_material cm on cm.product_id = m.product_id  WHERE m.type = 1 AND m.is_del = 0 AND m.source_id = '10287'  [ RunTime:0.0100s ]

[ 2018-09-20T14:13:52+08:00 ] ::1 /Dwin/Stock/getStockInMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0230s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0150s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0970s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockinmaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0180s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockinmaterial','1537424031','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10288\"}') [ RunTime:0.0780s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0200s ]
SQL: SELECT m.id,m.product_id,m.product_no,`num`,cm.product_name,unqualified_rep_pid fail_rep_id,rep_pid default_rep_id FROM crm_stock_material m left join crm_material cm on cm.product_id = m.product_id  WHERE m.type = 1 AND m.is_del = 0 AND m.source_id = '10288'  [ RunTime:0.0400s ]

[ 2018-09-20T14:14:04+08:00 ] ::1 /Dwin/Stock/addRecordWithPurchaseStockIn.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0440s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/addrecordwithpurchasestockin%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/addrecordwithpurchasestockin','1537424044','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"flag\":\"get\",\"id\":\"10288\"}') [ RunTime:0.0810s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0390s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0170s ]
SQL: SELECT a.id,a.cate,a.cate_name,a.stock_in_id,a.source_id,a.other_bill,from_unixtime(a.pay_time) pay_time,a.pay_condition,a.intercourse_subject,a.print_time,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) create_time,a.tips,a.auditor,a.auditor_name,a.audit_status,a.audit_tips,from_unixtime(a.audit_time) audit_time,a.keep_id,a.keep_name,a.charge_id,a.charge_name,a.account_id,a.account_name,a.check_id,a.check_name,a.business_id,a.business_name,from_unixtime(a.update_time) update_time,o.supplier_name,o.purchase_order_id,o.purchase_mode,o.purchase_type FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.id = '10288' LIMIT 1   [ RunTime:0.0180s ]
SQL: SELECT m.id,m.product_id,m.product_no,m.num -ifnull(sum(record.num),0) num,cm.product_name,m.unqualified_rep_pid fail_rep_id,m.rep_pid default_rep_id,rep1.repertory_name fail_rep_name,rep2.repertory_name default_rep_name FROM crm_stock_material m LEFT JOIN crm_material cm on cm.product_id = m.product_id LEFT JOIN crm_stock_in_record record ON record.source_pid = m.id LEFT JOIN crm_repertorylist rep1 ON rep1.rep_id = m.unqualified_rep_pid LEFT JOIN crm_repertorylist rep2 ON rep2.rep_id = m.rep_pid  WHERE m.is_del = 0 AND m.source_id = '10288' GROUP BY m.product_id  [ RunTime:0.0100s ]

[ 2018-09-20T14:14:12+08:00 ] ::1 /Dwin/Stock/addRecordWithPurchaseStockIn.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0670s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0400s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0170s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.1010s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/addrecordwithpurchasestockin%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/addrecordwithpurchasestockin','1537424052','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"flag\":\"post\",\"stockId\":\"10288\",\"material\":[{\"id\":\"143\",\"product_id\":\"267\",\"product_no\":\"00267\",\"num\":\"10\",\"product_name\":\"DMT32240Q035-01WZ\",\"fail_rep_id\":\"K010\",\"default_rep_id\":\"K004\",\"fail_rep_name\":\"\\u62a5\\u5e9f\\u54c1\\u5e93\",\"default_rep_name\":\"\\u6210\\u54c1\\u5e93-A\",\"success_num\":\"10\",\"fail_num\":\"0\"},{\"id\":\"142\",\"product_id\":\"269\",\"product_no\":\"00269\",\"num\":\"10\",\"product_name\":\"DMT80480Q070-01WZ\",\"fail_rep_id\":\"K010\",\"default_rep_id\":\"K004\",\"fail_rep_name\":\"\\u62a5\\u5e9f\\u54c1\\u5e93\",\"default_rep_name\":\"\\u6210\\u54c1\\u5e93-A\",\"success_num\":\"10\",\"fail_num\":\"0\"}]}') [ RunTime:0.0650s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0390s ]
SQL: SHOW COLUMNS FROM `crm_stock_material` [ RunTime:0.0400s ]
SQL: SELECT * FROM `crm_stock_in_purchase` WHERE `id` = 10288 LIMIT 1   [ RunTime:0.0220s ]
SQL: SELECT mat.id,mat.source_id,mat.product_id,mat.num insert_num,mat.rep_pid insert_rep_id,task.batch,task.cate cate_id FROM crm_stock_material mat LEFT JOIN crm_stock_in_purchase task ON task.id = mat.source_id  WHERE mat.source_id = '10288'  [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0190s ]
SQL: SELECT * FROM `crm_stock_in_purchase` WHERE `id` = 10288 LIMIT 1   [ RunTime:0.0320s ]
SQL: INSERT INTO `crm_stock_in_record` (`source_id`,`source_pid`,`product_id`,`num`,`cate_id`,`repertory_id`,`batch`,`create_time`,`update_time`,`status`) VALUES ('10288','143','267','10','8','K004','2','1537424052','1537424052','0'),('10288','142','269','10','8','K004','2','1537424052','1537424052','0') [ RunTime:0.0100s ]
SQL: show full fields from crm_stock_in_record [ RunTime:0.0200s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0250s ]
SQL: SELECT * FROM `crm_stock_in_record` WHERE `id` <= '40' ORDER BY id desc  LIMIT 2   [ RunTime:0.0400s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                `staff_id`,
                                `staff_name`,
                                `path`,
                                `table_name`,
                                `comment`,
                                `type`,
                                `major_key`,
                                `now_data`,
                                `create_time`
                            )
                            VALUES
                                (
                                    394,
                                    'zengyongtai',
                                    'Stock/addRecordWithPurchaseStockIn',
                                    'crm_stock_in_record',
                                    '{"id":"","source_id":"出入库源单主键id crm_stock_in主键id","source_pid":"crm_stock_material表主键id","product_id":"物料表主键","num":"制单出入库数量","cate_id":"入库分类（冗余，跟stock_in类型一致）","repertory_id":"入库库房id","create_time":"创建时间","update_time":"更新时间","status":"审核状态：0-未审核 1-不合格 2-通过,已入库","is_del":"是否被删除 0 未删除 1 已删除","batch":"入库批次"}',
                                    1,
                                    '0000000040,0000000039',
                                    '[{"id":"0000000040","source_id":"10288","source_pid":"143","product_id":"267","num":"10","cate_id":"8","repertory_id":"K004","create_time":"1537424052","update_time":"1537424052","status":"0","is_del":"0","batch":"2"},{"id":"0000000039","source_id":"10279","source_pid":"139","product_id":"15521","num":"3","cate_id":"8","repertory_id":"K001","create_time":"1537421095","update_time":"1537421444","status":"1","is_del":"0","batch":"1"}]',
                                    1537424052
                                ); [ RunTime:0.0510s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0260s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0380s ]
SQL: SELECT * FROM `crm_stock_in_purchase` WHERE `id` = '10288'  [ RunTime:0.0280s ]
SQL: UPDATE `crm_stock_in_purchase` SET `update_time`='1537424052',`audit_status`='2' WHERE `id` = '10288' [ RunTime:0.0110s ]
SQL: show full fields from crm_stock_in_purchase [ RunTime:0.0320s ]
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 590 行.
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 590 行.
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                `staff_id`,
                                `staff_name`,
                                `path`,
                                `table_name`,
                                `comment`,
                                `type`,
                                `major_key`,
                                `before_data`,
                                `now_data`,
                                `create_time`
                            )
                            VALUES
                                (
                                    394,
                                    'zengyongtai',
                                    'Stock/addRecordWithPurchaseStockIn',
                                    'crm_stock_in_purchase',
                                    '{"id":"主键","cate":"*分类","cate_name":"*分类名","stock_in_id":"*入库单编号","source_id":"*订单表主键","other_bill":"对方单据","pay_time":"付款时间","pay_condition":"付款条件","Intercourse_subject":"往来科目","print_time":"*打印次数","batch":"*入库批次","create_id":"*制单人id","create_name":"*制单人姓名","create_time":"*创建时间","tips":"*入库备注","auditor":"*审核人ID","auditor_name":"*审核人姓名","audit_status":"*0-为审核 1-审核不合格 2-审核合格","audit_tips":"*审核备注","audit_time":"*审核时间","keep_id":"*保管人ID","keep_name":"*保管人姓名","charge_id":"负责人id","charge_name":"负责人姓名","check_id":"*验收人id","check_name":"*验收人姓名","update_time":"*更新时间","is_del":"0-未删除 1-已删除","account_id":"记账人id","account_name":"记账人姓名","business_id":"业务员id","business_name":"业务员姓名"}',
                                    2,
                                    '10288',
                                    '[{"id":"10288","cate":"8","cate_name":"外购入库","stock_in_id":"WGRK-10288","source_id":"10018","other_bill":"0791","pay_time":"1538150400","pay_condition":"","intercourse_subject":"","print_time":"0","batch":"2","create_id":"394","create_name":"zengyongtai","create_time":"1537423966","tips":"","auditor":"392","auditor_name":"李炫龙","audit_status":"0","audit_tips":"","audit_time":null,"keep_id":"394","keep_name":"zengyongtai","charge_id":null,"charge_name":"","check_id":"394","check_name":"zengyongtai","update_time":"1537423966","is_del":"0","account_id":null,"account_name":"","business_id":null,"business_name":""}]',
                                    '[{"update_time":1537424052,"audit_status":2,"id":["EQ","10288"],"cate":"8","cate_name":"外购入库","stock_in_id":"WGRK-10288","source_id":"10018","other_bill":"0791","pay_time":"1538150400","pay_condition":"","intercourse_subject":"","print_time":"0","batch":"2","create_id":"394","create_name":"zengyongtai","create_time":"1537423966","tips":"","auditor":"392","auditor_name":"李炫龙","audit_tips":"","audit_time":null,"keep_id":"394","keep_name":"zengyongtai","charge_id":null,"charge_name":"","check_id":"394","check_name":"zengyongtai","is_del":"0","account_id":null,"account_name":"","business_id":null,"business_name":""}]',
                                    1537424052
                                ); [ RunTime:0.0150s ]

[ 2018-09-20T14:14:13+08:00 ] ::1 /Dwin/Stock/purchaseAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0150s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0350s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0200s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseauditindex','1537424053','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"auditor_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"pay_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"other_bill\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.1420s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0120s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 0 LIMIT 1   [ RunTime:0.0200s ]
SQL: SELECT a.id,a.cate,a.cate_name,a.stock_in_id,a.source_id,a.other_bill,from_unixtime(a.pay_time) pay_time,a.pay_condition,a.intercourse_subject,a.print_time,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) create_time,a.tips,a.auditor,a.auditor_name,a.audit_status,a.audit_tips,from_unixtime(a.audit_time) audit_time,a.keep_id,a.keep_name,a.charge_id,a.charge_name,a.account_id,a.account_name,a.check_id,a.check_name,a.business_id,a.business_name,from_unixtime(a.update_time) update_time,o.supplier_name,o.purchase_order_id,o.purchase_mode,o.purchase_type FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 0 ORDER BY stock_in_id asc LIMIT 0,25   [ RunTime:0.0130s ]

[ 2018-09-20T14:14:18+08:00 ] ::1 /Dwin/Stock/showStockInAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0250s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0230s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0650s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinauditindex','1537424058','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"type\":\"3\"}') [ RunTime:0.0920s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0170s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0230s ]
SQL: SELECT a.id,a.stock_in_id,ifnull(task.task_id,'无源单') s_id,a.print_time,a.cate,a.cate_name,`batch`,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,a.production_line_name,a.production_group_name FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 ORDER BY stock_in_id desc LIMIT 0,10   [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0220s ]

[ 2018-09-20T14:14:23+08:00 ] ::1 /Dwin/Stock/showStockInAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0360s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0170s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0350s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0290s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0280s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinauditindex','1537424063','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"type\":\"8\"}') [ RunTime:0.1060s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0170s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT a.id,a.stock_in_id,ifnull(o.purchase_order_id,'无源单') s_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,a.other_bill FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 ORDER BY stock_in_id desc LIMIT 0,10   [ RunTime:0.0180s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0120s ]

[ 2018-09-20T14:14:33+08:00 ] ::1 /Dwin/Stock/getStockInDetail
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0160s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0370s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockindetail%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0160s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockindetail','1537424073','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10288\"}') [ RunTime:0.3540s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0100s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('10288') AND a.is_del = 0  [ RunTime:0.0120s ]

[ 2018-09-20T14:15:44+08:00 ] ::1 /Dwin/Stock/showStockInAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0150s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0440s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinauditindex','1537424144','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"3\",\"columns\":[{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"type\":\"8\"}') [ RunTime:0.0820s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0180s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT a.id,a.stock_in_id,ifnull(o.purchase_order_id,'无源单') s_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,a.other_bill FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 ORDER BY stock_in_id desc LIMIT 0,10   [ RunTime:0.0070s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0050s ]

[ 2018-09-20T14:15:47+08:00 ] ::1 /Dwin/Stock/getStockInDetail
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0270s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0330s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockindetail%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockindetail','1537424146','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10269\"}') [ RunTime:0.0720s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0100s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('10269') AND a.is_del = 0  [ RunTime:0.0180s ]

[ 2018-09-20T14:15:47+08:00 ] ::1 /Dwin/Stock/getStockInDetail
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0420s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0330s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockindetail%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0490s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockindetail','1537424147','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10288\"}') [ RunTime:0.0850s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0130s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('10288') AND a.is_del = 0  [ RunTime:0.0040s ]

[ 2018-09-20T14:15:59+08:00 ] ::1 /Dwin/Stock/checkStockInRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0250s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0240s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0660s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/checkstockinrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/checkstockinrecord','1537424159','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"status\":\"1\",\"type\":\"8\",\"params\":[{\"id\":\"10288\",\"stock_in_id\":\"WGRK-10288\",\"s_id\":\"CGD-10018\",\"cate\":\"8\",\"print_time\":\"1\",\"cate_name\":\"\\u5916\\u8d2d\\u5165\\u5e93\",\"batch\":\"2\",\"create_id\":\"394\",\"create_name\":\"zengyongtai\",\"c_time\":\"2018-09-20 14:12:46\",\"update_time\":\"2018-09-20 14:14:12\",\"tips\":\"\",\"audit_status\":\"2\",\"keep_id\":\"394\",\"keep_name\":\"zengyongtai\",\"check_id\":\"394\",\"check_name\":\"zengyongtai\",\"other_bill\":\"0791\"}]}') [ RunTime:0.0810s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stock_audit` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0140s ]
SQL: SELECT * FROM `crm_stock_in_purchase` WHERE `id` = '10288' LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0210s ]
SQL: SELECT * FROM `crm_stock_in_purchase` WHERE `id` = '10288'  [ RunTime:0.0170s ]
SQL: UPDATE `crm_stock_in_purchase` SET `audit_status`='3',`update_time`='1537424159' WHERE `id` = '10288' [ RunTime:0.0100s ]
SQL: show full fields from crm_stock_in_purchase [ RunTime:0.0130s ]
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 590 行.
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 590 行.
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                `staff_id`,
                                `staff_name`,
                                `path`,
                                `table_name`,
                                `comment`,
                                `type`,
                                `major_key`,
                                `before_data`,
                                `now_data`,
                                `create_time`
                            )
                            VALUES
                                (
                                    394,
                                    'zengyongtai',
                                    'Stock/checkStockInRecord',
                                    'crm_stock_in_purchase',
                                    '{"id":"主键","cate":"*分类","cate_name":"*分类名","stock_in_id":"*入库单编号","source_id":"*订单表主键","other_bill":"对方单据","pay_time":"付款时间","pay_condition":"付款条件","Intercourse_subject":"往来科目","print_time":"*打印次数","batch":"*入库批次","create_id":"*制单人id","create_name":"*制单人姓名","create_time":"*创建时间","tips":"*入库备注","auditor":"*审核人ID","auditor_name":"*审核人姓名","audit_status":"*0-为审核 1-审核不合格 2-审核合格","audit_tips":"*审核备注","audit_time":"*审核时间","keep_id":"*保管人ID","keep_name":"*保管人姓名","charge_id":"负责人id","charge_name":"负责人姓名","check_id":"*验收人id","check_name":"*验收人姓名","update_time":"*更新时间","is_del":"0-未删除 1-已删除","account_id":"记账人id","account_name":"记账人姓名","business_id":"业务员id","business_name":"业务员姓名"}',
                                    2,
                                    '10288',
                                    '[{"id":"10288","cate":"8","cate_name":"外购入库","stock_in_id":"WGRK-10288","source_id":"10018","other_bill":"0791","pay_time":"1538150400","pay_condition":"","intercourse_subject":"","print_time":"1","batch":"2","create_id":"394","create_name":"zengyongtai","create_time":"1537423966","tips":"","auditor":"392","auditor_name":"李炫龙","audit_status":"2","audit_tips":"","audit_time":null,"keep_id":"394","keep_name":"zengyongtai","charge_id":null,"charge_name":"","check_id":"394","check_name":"zengyongtai","update_time":"1537424052","is_del":"0","account_id":null,"account_name":"","business_id":null,"business_name":""}]',
                                    '[{"audit_status":3,"update_time":1537424159,"id":["eq","10288"],"cate":"8","cate_name":"外购入库","stock_in_id":"WGRK-10288","source_id":"10018","other_bill":"0791","pay_time":"1538150400","pay_condition":"","intercourse_subject":"","print_time":"1","batch":"2","create_id":"394","create_name":"zengyongtai","create_time":"1537423966","tips":"","auditor":"392","auditor_name":"李炫龙","audit_tips":"","audit_time":null,"keep_id":"394","keep_name":"zengyongtai","charge_id":null,"charge_name":"","check_id":"394","check_name":"zengyongtai","is_del":"0","account_id":null,"account_name":"","business_id":null,"business_name":""}]',
                                    1537424159
                                ); [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_stock_in_record` WHERE `source_id` = '10288' AND `is_del` = 0  [ RunTime:0.0120s ]
SQL: UPDATE `crm_stock_in_record` SET `status`='1',`update_time`='1537424159' WHERE `source_id` = '10288' AND `is_del` = 0 [ RunTime:0.0060s ]
SQL: show full fields from crm_stock_in_record [ RunTime:0.0180s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                `staff_id`,
                                `staff_name`,
                                `path`,
                                `table_name`,
                                `comment`,
                                `type`,
                                `major_key`,
                                `before_data`,
                                `now_data`,
                                `create_time`
                            )
                            VALUES
                                (
                                    394,
                                    'zengyongtai',
                                    'Stock/checkStockInRecord',
                                    'crm_stock_in_record',
                                    '{"id":"","source_id":"出入库源单主键id crm_stock_in主键id","source_pid":"crm_stock_material表主键id","product_id":"物料表主键","num":"制单出入库数量","cate_id":"入库分类（冗余，跟stock_in类型一致）","repertory_id":"入库库房id","create_time":"创建时间","update_time":"更新时间","status":"审核状态：0-未审核 1-不合格 2-通过,已入库","is_del":"是否被删除 0 未删除 1 已删除","batch":"入库批次"}',
                                    2,
                                    '0000000040,0000000041',
                                    '[{"id":"0000000040","source_id":"10288","source_pid":"143","product_id":"267","num":"10","cate_id":"8","repertory_id":"K004","create_time":"1537424052","update_time":"1537424052","status":"0","is_del":"0","batch":"2"},{"id":"0000000041","source_id":"10288","source_pid":"142","product_id":"269","num":"10","cate_id":"8","repertory_id":"K004","create_time":"1537424052","update_time":"1537424052","status":"0","is_del":"0","batch":"2"}]',
                                    '[{"status":1,"update_time":1537424159,"id":"0000000040","source_id":"10288","source_pid":"143","product_id":"267","num":"10","cate_id":"8","repertory_id":"K004","create_time":"1537424052","is_del":"0","batch":"2"},{"status":1,"update_time":1537424159,"id":"0000000041","source_id":"10288","source_pid":"142","product_id":"269","num":"10","cate_id":"8","repertory_id":"K004","create_time":"1537424052","is_del":"0","batch":"2"}]',
                                    1537424159
                                ); [ RunTime:0.0060s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('10288') AND a.is_del = 0  [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_stock` WHERE `product_id` = '267' AND `warehouse_number` = 'K004' LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock` [ RunTime:0.0140s ]
SQL: SELECT * FROM `crm_stock` WHERE `product_id` = '267' AND `warehouse_number` = 'K004'  [ RunTime:0.0180s ]
SQL: UPDATE `crm_stock` SET `stock_number`=stock_number + 10,`update_time`='1537424159' WHERE `product_id` = '267' AND `warehouse_number` = 'K004' [ RunTime:0.0260s ]
SQL: show full fields from crm_stock [ RunTime:0.0130s ]
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 590 行.
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 590 行.
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                `staff_id`,
                                `staff_name`,
                                `path`,
                                `table_name`,
                                `comment`,
                                `type`,
                                `major_key`,
                                `before_data`,
                                `now_data`,
                                `create_time`
                            )
                            VALUES
                                (
                                    394,
                                    'zengyongtai',
                                    'Stock/checkStockInRecord',
                                    'crm_stock',
                                    '{"id":"主键id","product_id":"物料表主键ID","warehouse_number":"仓库编号","warehouse_name":"仓库名","stock_number":"可用库存","o_audit":"锁库数量（待出库，下销货单，领料单，其它出库单后增加）","i_audit":"待入库","out_processing":"出库中（提交出库记录，数量增加，对应待出库数量减少）","update_time":"更新时间","tips":"备注"}',
                                    2,
                                    '15631',
                                    '[{"id":"15631","product_id":"267","warehouse_number":"K004","warehouse_name":"成品库-A","stock_number":"0","o_audit":"0","i_audit":"0","out_processing":"0","update_time":"1516080336","tips":"汽车级，"}]',
                                    '[{"stock_number":["exp","stock_number + 10"],"update_time":1537424159,"id":"15631","product_id":"267","warehouse_number":"K004","warehouse_name":"成品库-A","o_audit":"0","i_audit":"0","out_processing":"0","tips":"汽车级，"}]',
                                    1537424159
                                ); [ RunTime:0.0200s ]
SQL: SELECT * FROM `crm_stock` WHERE `product_id` = '269' AND `warehouse_number` = 'K004' LIMIT 1   [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_stock` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_stock` WHERE `product_id` = '269' AND `warehouse_number` = 'K004'  [ RunTime:0.0040s ]
SQL: UPDATE `crm_stock` SET `stock_number`=stock_number + 10,`update_time`='1537424159' WHERE `product_id` = '269' AND `warehouse_number` = 'K004' [ RunTime:0.0050s ]
SQL: show full fields from crm_stock [ RunTime:0.0110s ]
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 590 行.
NOTIC: [8] Array to string conversion F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\ThinkPHP\Library\Think\Model.class.php 第 590 行.
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                `staff_id`,
                                `staff_name`,
                                `path`,
                                `table_name`,
                                `comment`,
                                `type`,
                                `major_key`,
                                `before_data`,
                                `now_data`,
                                `create_time`
                            )
                            VALUES
                                (
                                    394,
                                    'zengyongtai',
                                    'Stock/checkStockInRecord',
                                    'crm_stock',
                                    '{"id":"主键id","product_id":"物料表主键ID","warehouse_number":"仓库编号","warehouse_name":"仓库名","stock_number":"可用库存","o_audit":"锁库数量（待出库，下销货单，领料单，其它出库单后增加）","i_audit":"待入库","out_processing":"出库中（提交出库记录，数量增加，对应待出库数量减少）","update_time":"更新时间","tips":"备注"}',
                                    2,
                                    '15633',
                                    '[{"id":"15633","product_id":"269","warehouse_number":"K004","warehouse_name":"成品库-A","stock_number":"0","o_audit":"0","i_audit":"0","out_processing":"0","update_time":"1371195597","tips":"汽车级，"}]',
                                    '[{"stock_number":["exp","stock_number + 10"],"update_time":1537424159,"id":"15633","product_id":"269","warehouse_number":"K004","warehouse_name":"成品库-A","o_audit":"0","i_audit":"0","out_processing":"0","tips":"汽车级，"}]',
                                    1537424159
                                ); [ RunTime:0.0070s ]

[ 2018-09-20T14:16:00+08:00 ] ::1 /Dwin/Stock/showStockInAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0410s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinauditindex','1537424160','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"4\",\"columns\":[{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"type\":\"8\"}') [ RunTime:0.0850s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0180s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0260s ]
SQL: SELECT a.id,a.stock_in_id,ifnull(o.purchase_order_id,'无源单') s_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,a.other_bill FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 ORDER BY stock_in_id desc LIMIT 0,10   [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0050s ]

[ 2018-09-20T14:16:09+08:00 ] ::1 /Dwin/Stock/showStockInRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0420s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinrecord','1537424168','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.0910s ]
SQL: SHOW COLUMNS FROM `crm_stock_in` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0230s ]
SQL: SELECT a.id,a.stock_in_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,task.task_id s_id FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id LEFT JOIN crm_stock_in_record record ON record.source_id = a.id  WHERE a.is_del = 0 AND a.audit_status = 3 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ord.purchase_order_id 
                              FROM crm_stock_in_purchase a 
                              LEFT JOIN crm_purchase_order ord ON ord.id = a.source_id 
                              LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                              WHERE a.audit_status = 3 AND a.is_del = 0 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ifnull(a.source_id,'无') 
                          FROM crm_stock_in_other a 
                          LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                          WHERE a.audit_status = 3 and a.is_del = 0 
                          ORDER BY cate_name desc 
                          LIMIT 0,10 [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0150s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0160s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0220s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0070s ]

[ 2018-09-20T14:16:12+08:00 ] ::1 /Dwin/Stock/showStockInRecord
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0180s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0350s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinrecord%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0460s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinrecord','1537424172','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.0730s ]
SQL: SHOW COLUMNS FROM `crm_stock_in` [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0150s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0210s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0120s ]
SQL: SELECT a.id,a.stock_in_id,a.cate,a.print_time,a.cate_name,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,task.task_id s_id FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id LEFT JOIN crm_stock_in_record record ON record.source_id = a.id  WHERE a.is_del = 0 AND a.audit_status = 3 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ord.purchase_order_id 
                              FROM crm_stock_in_purchase a 
                              LEFT JOIN crm_purchase_order ord ON ord.id = a.source_id 
                              LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                              WHERE a.audit_status = 3 AND a.is_del = 0 UNION ALL SELECT 
            a.id,
            a.stock_in_id,
            a.cate,
            a.print_time,
            a.cate_name,
            a.batch,
            a.create_id,
            a.create_name,
            from_unixtime(a.create_time) c_time,
            from_unixtime(a.update_time) update_time,
            a.tips,
            a.audit_status,
            a.keep_id,
            a.keep_name,
            a.check_id,
            a.check_name,ifnull(a.source_id,'无') 
                          FROM crm_stock_in_other a 
                          LEFT JOIN crm_stock_in_record record ON record.source_id = a.id 
                          WHERE a.audit_status = 3 and a.is_del = 0 
                          ORDER BY cate_name desc 
                          LIMIT 0,10 [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0180s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0170s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_other a WHERE a.is_del = 0 AND a.audit_status = 3 LIMIT 1   [ RunTime:0.0060s ]

[ 2018-09-20T14:16:16+08:00 ] ::1 /Dwin/Stock/getStockInDetail
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0210s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.1310s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockindetail%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockindetail','1537424176','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10288\"}') [ RunTime:0.0820s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0180s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('10288') AND a.is_del = 0  [ RunTime:0.0050s ]

[ 2018-09-20T14:16:16+08:00 ] ::1 /Dwin/Stock/getStockInDetail
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0200s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockindetail%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockindetail','1537424176','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10288\"}') [ RunTime:0.0730s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0140s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('10288') AND a.is_del = 0  [ RunTime:0.0170s ]

[ 2018-09-20T14:16:52+08:00 ] ::1 /Dwin/Product/getProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0350s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%product/getproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`auth_rule_name`,`level`,`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('产品页面',NULL,'394','::1','product/getproduct','1537424210','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"platform_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"material_type\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"repertory_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"false\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"status\":\"0\"}') [ RunTime:0.0520s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM `crm_material` LIMIT 1   [ RunTime:0.9001s ]
SQL: SHOW COLUMNS FROM `crm_repertorylist` [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_auth_role` [ RunTime:0.0230s ]
SQL: SELECT max(stock_level) max FROM `crm_auth_role` WHERE ( find_in_set(394, staff_ids) )  [ RunTime:0.0190s ]
SQL: SELECT * FROM `crm_repertorylist` WHERE `cate_flag` IN ('1','4') AND `is_del` = 0 AND (  `display_level` <= '3' OR ( find_in_set(394, logistics_staff_id) ) )  [ RunTime:0.0260s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT COUNT(*) AS tp_count FROM `crm_material` WHERE `status` = 0 LIMIT 1   [ RunTime:0.9111s ]
SQL: SELECT product.*,screen_cate.name cate_name,`repertory_name`,platform.name platform_name FROM crm_material product left join crm_screen_category as screen_cate on product.parent_id = screen_cate.id left join crm_screen_category as platform on product.platform_id = platform.id LEFT JOIN crm_repertorylist rep ON rep.rep_id = product.warehouse_id  WHERE `status` = 0 ORDER BY product_no asc LIMIT 0,10   [ RunTime:0.2760s ]

[ 2018-09-20T14:17:00+08:00 ] ::1 /Dwin/Product/getEditRequest
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0170s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0340s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0160s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0320s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%product/geteditrequest%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.8721s ]
SQL: INSERT INTO `crm_stafflog` (`auth_rule_name`,`level`,`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('查看修改产品请求',NULL,'394','::1','product/geteditrequest','1537424217','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"newproduct_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"changemanname\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"info\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"false\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"action_type\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"auditor_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"false\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"3\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"mySearch\":{\"auditor_id\":\"myID\"}}') [ RunTime:0.2980s ]
SQL: SHOW COLUMNS FROM `crm_prochangerecord` [ RunTime:0.5770s ]
NOTIC: [8] Undefined index: action_type F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Controller\ProductController.class.php 第 147 行.
SQL: SELECT COUNT(*) AS tp_count FROM `crm_prochangerecord` WHERE `auditor_id` = '394' LIMIT 1   [ RunTime:0.9121s ]
SQL: SELECT COUNT(*) AS tp_count FROM `crm_prochangerecord` WHERE `auditor_id` = '394' LIMIT 1   [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_prochangerecord` WHERE `auditor_id` = '394' ORDER BY create_time desc LIMIT 0,10   [ RunTime:0.2650s ]

[ 2018-09-20T14:17:11+08:00 ] ::1 /Dwin/Bom/materialAllMsgList
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0560s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%bom/materialallmsglist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','bom/materialallmsglist','1537424231','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.2150s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0310s ]
SQL: SELECT * FROM `crm_material` ORDER BY product_no asc LIMIT 0,25   [ RunTime:0.0990s ]
SQL: SELECT COUNT(*) AS tp_count FROM `crm_material` LIMIT 1   [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM `crm_material` LIMIT 1   [ RunTime:0.0060s ]

[ 2018-09-20T14:17:19+08:00 ] ::1 /Dwin/SaleService/showSaleRepairing
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%saleservice/showsalerepairing%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`auth_rule_name`,`level`,`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('维修记录显示',NULL,'394','::1','saleservice/showsalerepairing','1537424238','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"sale_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"courier_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cusname\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"salename\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"sale_commissioner_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"reperson_question\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_ok\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_show\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_repairorder\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"over_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_over\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}') [ RunTime:0.3710s ]
SQL: SHOW COLUMNS FROM `crm_salerecord` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_staff` [ RunTime:0.0120s ]
SQL: SELECT `rule_ids` FROM `crm_staff` WHERE `id` = 394 LIMIT 1   [ RunTime:0.0070s ]
NOTIC: [8] Undefined index: prj_order_type F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Controller\SaleServiceController.class.php 第 273 行.
NOTIC: [8] Undefined index: prj_order_over F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Controller\SaleServiceController.class.php 第 274 行.
SQL: SELECT crm_staff.id,min(b.pid),`cus_child_id` FROM `crm_staff` LEFT JOIN crm_auth_role b ON FIND_IN_SET(crm_staff.id,b.staff_ids)  WHERE crm_staff.id IN ('394') GROUP BY crm_staff.id  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT crm_staff.id,min(b.pid),`cus_child_id` FROM `crm_staff` LEFT JOIN crm_auth_role b ON FIND_IN_SET(crm_staff.id,b.staff_ids)  WHERE crm_staff.id IN ('118','115','69','98','207','62','63','64','61','173','210') GROUP BY crm_staff.id  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT crm_staff.id,min(b.pid),`cus_child_id` FROM `crm_staff` LEFT JOIN crm_auth_role b ON FIND_IN_SET(crm_staff.id,b.staff_ids)  WHERE crm_staff.id IN ('68','25','22','19','20','42','49','50','44','55','59','53','112','104','108','100','101','102','23','39','56','47','112','93','117','101','39','56','47','28','60','75','124','125','108','51','48','26','58','95','84','124','128','125','120','119','54','58','177','174','175','176') GROUP BY crm_staff.id  [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT crm_staff.id,min(b.pid),`cus_child_id` FROM `crm_staff` LEFT JOIN crm_auth_role b ON FIND_IN_SET(crm_staff.id,b.staff_ids)  WHERE crm_staff.id IN ('108','120','71','123','81','83','97','96','25','39','47','88','100','105','47','102','109','33','77','48','42','35','110','107','94','91','87','28','86','58','119','93','128','76','29','30','73','104','26','127','126','178','179','180','181','182','183','187','184','188','185','189','186','230','190','67','191','192') GROUP BY crm_staff.id  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT crm_staff.id,min(b.pid),`cus_child_id` FROM `crm_staff` LEFT JOIN crm_auth_role b ON FIND_IN_SET(crm_staff.id,b.staff_ids)  WHERE crm_staff.id IN ('51','26','19','49','74','72','92','89','83','97','96','25','39','47','88','77','48','42','35','56','114','32','231','232') GROUP BY crm_staff.id  [ RunTime:0.0050s ]
SQL: SELECT crm_staff.id,min(b.pid),`sale_child_id` FROM `crm_staff` LEFT JOIN crm_auth_role b ON FIND_IN_SET(crm_staff.id,b.staff_ids)  WHERE crm_staff.id IN ('394') GROUP BY crm_staff.id  [ RunTime:0.0050s ]
SQL: SELECT COUNT(*) AS tp_count FROM `crm_salerecord` WHERE ( 1 = 1 ) AND (  `yid` IN ('118','115','69','98','207','62','63','64','61','173','210','68','25','22','19','20','42','49','50','44','55','59','53','112','104','108','100','101','102','23','39','56','47','112','93','117','101','39','56','47','28','60','75','124','125','108','51','48','26','58','95','84','124','128','125','120','119','54','58','177','174','175','176','108','120','71','123','81','83','97','96','25','39','47','88','100','105','47','102','109','33','77','48','42','35','110','107','94','91','87','28','86','58','119','93','128','76','29','30','73','104','26','127','126','178','179','180','181','182','183','187','184','188','185','189','186','230','190','67','191','192','51','26','19','49','74','72','92','89','83','97','96','25','39','47','88','77','48','42','35','56','114','32','231','232','394') OR `sale_commissioner` IN ('394') ) LIMIT 1   [ RunTime:0.3340s ]
SQL: SELECT COUNT(*) AS tp_count FROM `crm_salerecord` WHERE ( 1 = 1 ) AND (  `yid` IN ('118','115','69','98','207','62','63','64','61','173','210','68','25','22','19','20','42','49','50','44','55','59','53','112','104','108','100','101','102','23','39','56','47','112','93','117','101','39','56','47','28','60','75','124','125','108','51','48','26','58','95','84','124','128','125','120','119','54','58','177','174','175','176','108','120','71','123','81','83','97','96','25','39','47','88','100','105','47','102','109','33','77','48','42','35','110','107','94','91','87','28','86','58','119','93','128','76','29','30','73','104','26','127','126','178','179','180','181','182','183','187','184','188','185','189','186','230','190','67','191','192','51','26','19','49','74','72','92','89','83','97','96','25','39','47','88','77','48','42','35','56','114','32','231','232','394') OR `sale_commissioner` IN ('394') ) LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT crm_salerecord.sid,crm_salerecord.sale_number,crm_salerecord.cusname,crm_salerecord.salename,from_unixtime(c.start_date) start_t,e.name as reperson_question,crm_salerecord.is_over,crm_salerecord.is_repairorder,from_unixtime(crm_salerecord.over_time) over_t,crm_salerecord.sale_commissioner_name,i.name as is_ok,crm_salerecord.courier_number,crm_salerecord.is_audit,crm_salerecord.is_show FROM `crm_salerecord`  LEFT JOIN `crm_repairperson` c ON crm_salerecord.sid = c.pid   LEFT JOIN `crm_salerecord_isok` i ON crm_salerecord.is_ok = i.id   LEFT JOIN `crm_staff` a ON crm_salerecord.sale_commissioner = a.id   LEFT JOIN `crm_repairperson_repersonquestion` e ON c.reperson_question = e.id   WHERE ( 1 = 1 ) AND (  `yid` IN ('118','115','69','98','207','62','63','64','61','173','210','68','25','22','19','20','42','49','50','44','55','59','53','112','104','108','100','101','102','23','39','56','47','112','93','117','101','39','56','47','28','60','75','124','125','108','51','48','26','58','95','84','124','128','125','120','119','54','58','177','174','175','176','108','120','71','123','81','83','97','96','25','39','47','88','100','105','47','102','109','33','77','48','42','35','110','107','94','91','87','28','86','58','119','93','128','76','29','30','73','104','26','127','126','178','179','180','181','182','183','187','184','188','185','189','186','230','190','67','191','192','51','26','19','49','74','72','92','89','83','97','96','25','39','47','88','77','48','42','35','56','114','32','231','232','394') OR `sale_commissioner` IN ('394') ) GROUP BY crm_salerecord.sid ORDER BY sale_number desc LIMIT 0,10   [ RunTime:0.6620s ]

[ 2018-09-20T14:17:32+08:00 ] ::1 /Dwin/SaleService/callbackRes
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0160s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.1860s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.2130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%saleservice/callbackres%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0250s ]
SQL: INSERT INTO `crm_stafflog` (`auth_rule_name`,`level`,`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('回访结果',NULL,'394','::1','saleservice/callbackres','1537424252','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"order\":[\"assign_time\",\"desc\"],\"page\":\"1\",\"pageSize\":\"10\",\"total\":\"0\"}') [ RunTime:0.0920s ]
NOTIC: [8] Undefined index: flag F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Controller\SaleServiceController.class.php 第 2702 行.
SQL: SHOW COLUMNS FROM `crm_cus_callback` [ RunTime:0.0250s ]
NOTIC: [8] Undefined index: where F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Controller\SaleServiceController.class.php 第 2706 行.
SQL: SELECT `cus_name`,`u_name`,`assign_time`,`question_4flag`,`question_4tip` FROM `crm_cus_callback` ORDER BY assign_time desc LIMIT 0,10   [ RunTime:0.0230s ]
NOTIC: [8] Undefined index: where F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Controller\SaleServiceController.class.php 第 2707 行.
SQL: SELECT COUNT(*) AS tp_count FROM `crm_cus_callback` LIMIT 1   [ RunTime:0.0160s ]
SQL: SELECT COUNT(*) AS tp_count FROM `crm_cus_callback` WHERE `question_4` is not null AND `question_4flag` = '有' ORDER BY assign_time desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT COUNT(*) AS tp_count FROM `crm_cus_callback` WHERE `question_4` is not null ORDER BY assign_time desc LIMIT 1   [ RunTime:0.0130s ]

[ 2018-09-20T14:17:58+08:00 ] ::1 /Dwin/Bom/bomIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0060s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0320s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%bom/bomindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','bom/bomindex','1537424278','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_type_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remark\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0710s ]
SQL: SHOW COLUMNS FROM `crm_material_bom` [ RunTime:0.0070s ]
NOTIC: [8] Undefined index: bom_status F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Controller\BomController.class.php 第 32 行.
SQL: SELECT b.*,crm_staff.name,m.product_name,m.product_number FROM crm_material_bom b left join crm_staff on crm_staff.id = b.create_id left join crm_material m on m.product_id = b.product_id left join crm_material_bom_sub bs on bs.bom_pid = b.id and bs.is_del = 0 left join crm_material sm on sm.product_id = bs.product_id  WHERE b.is_del = 0 AND b.bom_status = 0 GROUP BY b.id ORDER BY product_no asc LIMIT 0,25   [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_material_bom b left join crm_staff on crm_staff.id = b.create_id left join crm_material m on m.product_id = b.product_id  WHERE b.is_del = 0 AND b.bom_status = 0 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT * FROM crm_material_bom b left join crm_staff on crm_staff.id = b.create_id left join crm_material m on m.product_id = b.product_id left join crm_material_bom_sub bs on bs.bom_pid = b.id and bs.is_del = 0 left join crm_material sm on sm.product_id = bs.product_id  WHERE b.is_del = 0 AND b.bom_status = 0 GROUP BY b.id  [ RunTime:0.0110s ]

[ 2018-09-20T14:21:18+08:00 ] ::1 /Dwin/Bom/createBom
ERR: SQLSTATE[HY000] [2002] ӷһʱûȷ𸴻ӵûзӦӳʧܡ


[ 2018-09-20T14:24:32+08:00 ] ::1 /Dwin/Bom/createBom
ERR: SQLSTATE[HY000] [2002] ӷһʱûȷ𸴻ӵûзӦӳʧܡ


[ 2018-09-20T14:25:38+08:00 ] ::1 /Dwin/Bom/bomIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0160s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0190s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%bom/bomindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','bom/bomindex','1537424738','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_type_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remark\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.3360s ]
SQL: SHOW COLUMNS FROM `crm_material_bom` [ RunTime:0.0110s ]
NOTIC: [8] Undefined index: bom_status F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Controller\BomController.class.php 第 32 行.
SQL: SELECT b.*,crm_staff.name,m.product_name,m.product_number FROM crm_material_bom b left join crm_staff on crm_staff.id = b.create_id left join crm_material m on m.product_id = b.product_id left join crm_material_bom_sub bs on bs.bom_pid = b.id and bs.is_del = 0 left join crm_material sm on sm.product_id = bs.product_id  WHERE b.is_del = 0 AND b.bom_status = 0 GROUP BY b.id ORDER BY product_no asc LIMIT 0,25   [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_material_bom b left join crm_staff on crm_staff.id = b.create_id left join crm_material m on m.product_id = b.product_id  WHERE b.is_del = 0 AND b.bom_status = 0 LIMIT 1   [ RunTime:0.0170s ]
SQL: SELECT * FROM crm_material_bom b left join crm_staff on crm_staff.id = b.create_id left join crm_material m on m.product_id = b.product_id left join crm_material_bom_sub bs on bs.bom_pid = b.id and bs.is_del = 0 left join crm_material sm on sm.product_id = bs.product_id  WHERE b.is_del = 0 AND b.bom_status = 0 GROUP BY b.id  [ RunTime:0.0260s ]

[ 2018-09-20T14:25:40+08:00 ] ::1 /Dwin/bom/bomSumMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0340s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%bom/bomsummsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','bom/bomsummsg','1537424740','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"5\"}') [ RunTime:0.0850s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0230s ]
SQL: SELECT b.*,m.product_name,m.product_number,cs.stock_number,cs.o_audit,cs.out_processing FROM crm_material_bom_sub b left join crm_material m on m.product_id = b.product_id left join crm_stock cs on cs.product_id = b.product_id and cs.warehouse_number = 'K004'  WHERE `is_del` = 0 AND `bom_pid` = '5'  [ RunTime:0.0320s ]

[ 2018-09-20T14:25:50+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0190s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537424750','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"\"}') [ RunTime:0.0790s ]

[ 2018-09-20T14:25:52+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0190s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537424751','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"\"}') [ RunTime:0.0370s ]

[ 2018-09-20T14:25:53+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0380s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0210s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0480s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537424753','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.1230s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0140s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0170s ]

[ 2018-09-20T14:33:30+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0210s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0880s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537425210','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"\"}') [ RunTime:0.0900s ]

[ 2018-09-20T14:33:31+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0340s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0160s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0390s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0180s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537425211','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"\"}') [ RunTime:0.0860s ]

[ 2018-09-20T14:33:32+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0150s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0260s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0370s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537425211','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"\"}') [ RunTime:0.0900s ]

[ 2018-09-20T14:33:32+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0320s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0210s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0540s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0290s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0180s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537425212','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"\"}') [ RunTime:0.0740s ]

[ 2018-09-20T14:33:33+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0140s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0330s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0620s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537425212','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"p\"}') [ RunTime:0.0440s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0070s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%p%' OR a.product_name LIKE '%p%' OR a.product_number LIKE '%p%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0290s ]

[ 2018-09-20T14:33:34+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.1020s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0320s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0220s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0470s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537425214','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"\"}') [ RunTime:0.0870s ]

[ 2018-09-20T14:36:36+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.1250s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.2490s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.1280s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.2540s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0760s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0960s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537425395','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.1010s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.1890s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.1310s ]

[ 2018-09-20T14:47:20+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0170s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0340s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0500s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.1340s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0330s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0510s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426039','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"5\"}') [ RunTime:0.0760s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0730s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%5%' OR a.product_name LIKE '%5%' OR a.product_number LIKE '%5%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0590s ]

[ 2018-09-20T14:47:22+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0140s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.2770s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0450s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.4500s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.4530s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.1280s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426041','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"\"}') [ RunTime:0.0690s ]

[ 2018-09-20T14:47:23+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0150s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0550s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426042','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"b\"}') [ RunTime:0.3840s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0160s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%b%' OR a.product_name LIKE '%b%' OR a.product_number LIKE '%b%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0150s ]

[ 2018-09-20T14:48:11+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0280s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0590s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0230s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426091','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0790s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0400s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0460s ]

[ 2018-09-20T14:48:39+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0360s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0420s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426119','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0780s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0190s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0150s ]

[ 2018-09-20T14:48:57+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0180s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0360s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426137','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"q\"}') [ RunTime:0.1190s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0100s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%q%' OR a.product_name LIKE '%q%' OR a.product_number LIKE '%q%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0420s ]

[ 2018-09-20T14:49:30+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0390s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0790s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0480s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0320s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0210s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426170','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.1680s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0490s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.3720s ]

[ 2018-09-20T14:50:17+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.3550s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.2390s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.1550s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.3620s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0950s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0900s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426217','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.1010s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0160s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0190s ]

[ 2018-09-20T14:50:36+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0400s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0180s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426236','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0540s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0100s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0080s ]

[ 2018-09-20T14:51:32+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.2380s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.2800s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.4240s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:3.7032s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.2420s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.7740s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426288','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"4\"}') [ RunTime:0.4470s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.6270s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%4%' OR a.product_name LIKE '%4%' OR a.product_number LIKE '%4%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:2.0841s ]

[ 2018-09-20T14:51:39+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.3190s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.3750s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.3360s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:2.6101s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.2400s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0160s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426299','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"h\"}') [ RunTime:0.1250s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0180s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%h%' OR a.product_name LIKE '%h%' OR a.product_number LIKE '%h%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0450s ]

[ 2018-09-20T14:51:40+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0170s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.2610s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0260s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426300','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"\"}') [ RunTime:0.0960s ]

[ 2018-09-20T14:51:41+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0170s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0180s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0910s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0730s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.1700s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426300','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.1500s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.3210s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.1470s ]

[ 2018-09-20T14:52:56+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0180s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0300s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0450s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0740s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426376','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"t\"}') [ RunTime:0.0830s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0100s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%t%' OR a.product_name LIKE '%t%' OR a.product_number LIKE '%t%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0180s ]

[ 2018-09-20T14:54:12+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0560s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0660s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0170s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426452','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"f\"}') [ RunTime:0.1020s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0170s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%f%' OR a.product_name LIKE '%f%' OR a.product_number LIKE '%f%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0290s ]

[ 2018-09-20T14:54:57+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0190s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0320s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426497','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0720s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0170s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0470s ]

[ 2018-09-20T14:55:16+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0350s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426516','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0740s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0140s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0250s ]

[ 2018-09-20T14:55:37+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0270s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0300s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0460s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426537','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0820s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0170s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0190s ]

[ 2018-09-20T14:55:46+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0460s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426546','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0620s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0180s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0150s ]

[ 2018-09-20T14:56:10+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0990s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426569','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0560s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0090s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0260s ]

[ 2018-09-20T14:57:43+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0720s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0370s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0190s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426662','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0820s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0370s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0130s ]

[ 2018-09-20T14:58:42+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.1250s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0400s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0350s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426722','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0950s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0340s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0350s ]

[ 2018-09-20T14:59:16+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0150s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0330s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426756','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0930s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0080s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0150s ]

[ 2018-09-20T14:59:45+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0240s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537426784','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0690s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0090s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0280s ]

[ 2018-09-20T15:17:17+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0260s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537427837','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"\"}') [ RunTime:0.0750s ]

[ 2018-09-20T15:17:19+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0320s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0190s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537427839','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"\"}') [ RunTime:0.0370s ]

[ 2018-09-20T15:17:20+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0160s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0160s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537427839','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0430s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0100s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0120s ]

[ 2018-09-20T15:18:12+08:00 ] ::1 /Dwin/Stock/getProductMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0270s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getproductmsg','1537427892','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0880s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0190s ]
SQL: SELECT a.product_id,a.product_no,a.product_name,a.product_number,a.warehouse_id,re.repertory_name warehouse_name,ifnull((st.stock_number + st.o_audit),0) stock_total_number FROM crm_material a LEFT JOIN crm_repertorylist re ON re.rep_id = warehouse_id LEFT JOIN crm_stock st ON (st.product_id = a.product_id and a.warehouse_id = st.warehouse_number)  WHERE ( a.product_no LIKE '%a%' OR a.product_name LIKE '%a%' OR a.product_number LIKE '%a%' ) ORDER BY product_name desc LIMIT 0,20   [ RunTime:0.0090s ]

[ 2018-09-20T15:18:30+08:00 ] ::1 /Dwin/Bom/bomIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0260s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%bom/bomindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','bom/bomindex','1537427910','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"3\",\"columns\":[{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_type_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remark\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0780s ]
SQL: SHOW COLUMNS FROM `crm_material_bom` [ RunTime:0.0110s ]
NOTIC: [8] Undefined index: bom_status F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Controller\BomController.class.php 第 32 行.
SQL: SELECT b.*,crm_staff.name,m.product_name,m.product_number FROM crm_material_bom b left join crm_staff on crm_staff.id = b.create_id left join crm_material m on m.product_id = b.product_id left join crm_material_bom_sub bs on bs.bom_pid = b.id and bs.is_del = 0 left join crm_material sm on sm.product_id = bs.product_id  WHERE b.is_del = 0 AND b.bom_status = 0 GROUP BY b.id ORDER BY product_no asc LIMIT 0,25   [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_material_bom b left join crm_staff on crm_staff.id = b.create_id left join crm_material m on m.product_id = b.product_id  WHERE b.is_del = 0 AND b.bom_status = 0 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT * FROM crm_material_bom b left join crm_staff on crm_staff.id = b.create_id left join crm_material m on m.product_id = b.product_id left join crm_material_bom_sub bs on bs.bom_pid = b.id and bs.is_del = 0 left join crm_material sm on sm.product_id = bs.product_id  WHERE b.is_del = 0 AND b.bom_status = 0 GROUP BY b.id  [ RunTime:0.0120s ]

[ 2018-09-20T15:18:52+08:00 ] ::1 /Dwin/Product/getProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0150s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0410s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%product/getproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0280s ]
SQL: INSERT INTO `crm_stafflog` (`auth_rule_name`,`level`,`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('产品页面',NULL,'394','::1','product/getproduct','1537427931','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"platform_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"material_type\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"repertory_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"false\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"status\":\"0\"}') [ RunTime:0.0670s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM `crm_material` LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_repertorylist` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_auth_role` [ RunTime:0.0080s ]
SQL: SELECT max(stock_level) max FROM `crm_auth_role` WHERE ( find_in_set(394, staff_ids) )  [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_repertorylist` WHERE `cate_flag` IN ('1','4') AND `is_del` = 0 AND (  `display_level` <= '3' OR ( find_in_set(394, logistics_staff_id) ) )  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT COUNT(*) AS tp_count FROM `crm_material` WHERE `status` = 0 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT product.*,screen_cate.name cate_name,`repertory_name`,platform.name platform_name FROM crm_material product left join crm_screen_category as screen_cate on product.parent_id = screen_cate.id left join crm_screen_category as platform on product.platform_id = platform.id LEFT JOIN crm_repertorylist rep ON rep.rep_id = product.warehouse_id  WHERE `status` = 0 ORDER BY product_no asc LIMIT 0,10   [ RunTime:0.0110s ]

[ 2018-09-20T15:19:01+08:00 ] ::1 /Dwin/Purchase/supplierIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0370s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/supplierindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0210s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/supplierindex','1537427941','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"supplier_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"charge_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"business_licence\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"enterprise_cate\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"legal_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_bank\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"second_audit\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"1\"}') [ RunTime:0.0740s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 786 行.
SQL: SELECT p.*,crm_staff.name,(
                    CASE
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '0' THEN 0 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '2' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '20' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '02' THEN 2 
                    ELSE 1
                    END 
                  ) AS second_audit,group_concat(DISTINCT(a.status)) FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 0 GROUP BY a.supplier_pid ORDER BY supplier_id asc LIMIT 0,25   [ RunTime:0.0310s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 797 行.
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 0 GROUP BY a.supplier_pid  [ RunTime:0.0340s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 804 行.
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 0 GROUP BY a.supplier_pid  [ RunTime:0.0280s ]

[ 2018-09-20T15:19:05+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0170s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0280s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0190s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537427945','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0950s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0110s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0120s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0070s ]

[ 2018-09-20T15:19:06+08:00 ] ::1 /Dwin/Purchase/getOrderProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0280s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0440s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0250s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getorderproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0380s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0210s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getorderproduct','1537427946','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10016\"}') [ RunTime:0.0760s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0330s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10016' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0300s ]

[ 2018-09-20T15:19:25+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0150s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537427964','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0770s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0100s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0160s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0070s ]

[ 2018-09-20T15:19:26+08:00 ] ::1 /Dwin/Purchase/getOrderProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0220s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getorderproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getorderproduct','1537427966','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10016\"}') [ RunTime:0.0410s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0070s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10016' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0050s ]

[ 2018-09-20T15:19:31+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0150s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0160s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537427971','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0710s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0150s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0070s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0050s ]

[ 2018-09-20T15:19:33+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0160s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0310s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0790s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537427973','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0840s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0230s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0420s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0070s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','11','12','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0050s ]

[ 2018-09-20T15:19:38+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0210s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537427978','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0670s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0170s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0110s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0050s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','11','12','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0080s ]

[ 2018-09-20T15:19:41+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0150s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0220s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537427981','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0780s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0130s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0050s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0070s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','11','12','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0120s ]

[ 2018-09-20T15:19:47+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0160s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0240s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0180s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537427987','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0880s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0170s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0100s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0090s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','11','12','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0160s ]

[ 2018-09-20T15:19:55+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0250s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0980s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0230s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537427995','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0880s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0160s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0170s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0130s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','11','12','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0140s ]

[ 2018-09-20T15:19:57+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0380s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537427997','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0840s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0380s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0060s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0080s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','11','12','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0120s ]

[ 2018-09-20T15:20:00+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0190s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0280s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0160s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537427999','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0540s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0230s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0100s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0180s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','11','12','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0150s ]

[ 2018-09-20T15:20:08+08:00 ] ::1 /Dwin/Purchase/supplierIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0290s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/supplierindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/supplierindex','1537428008','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"supplier_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"charge_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"business_licence\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"enterprise_cate\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"legal_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_bank\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"account_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"second_audit\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"1\"}') [ RunTime:0.0700s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 786 行.
SQL: SELECT p.*,crm_staff.name,(
                    CASE
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '0' THEN 0 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '2' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '20' THEN 2 
                        WHEN REPLACE(group_concat(DISTINCT(a.status)),',','')  = '02' THEN 2 
                    ELSE 1
                    END 
                  ) AS second_audit,group_concat(DISTINCT(a.status)) FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 0 GROUP BY a.supplier_pid ORDER BY supplier_id asc LIMIT 0,25   [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 797 行.
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 0 GROUP BY a.supplier_pid  [ RunTime:0.0180s ]
NOTIC: [8] Undefined variable: having F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\PurchaseSupplierModel.class.php 第 804 行.
SQL: SELECT * FROM crm_purchase_supplier p left join crm_staff on crm_staff.id = p.creater left join crm_purchase_supplier_audit a on a.supplier_pid = p.id  WHERE p.charger = '394' AND p.is_del = 0 AND p.audit_status = 0 GROUP BY a.supplier_pid  [ RunTime:0.0200s ]

[ 2018-09-20T15:20:10+08:00 ] ::1 /Dwin/Purchase/getSupplierAllMsg
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0140s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0250s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getsupplierallmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0370s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getsupplierallmsg','1537428010','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"70\"}') [ RunTime:0.0730s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier` [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_address` [ RunTime:0.0130s ]
SQL: SELECT crm_purchase_supplier_address.*,crm_staff.name FROM `crm_purchase_supplier_address` left join crm_staff on crm_staff.id = crm_purchase_supplier_address.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '70'  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_contact` [ RunTime:0.0130s ]
SQL: SELECT crm_purchase_supplier_contact.*,crm_staff.name FROM `crm_purchase_supplier_contact` left join crm_staff on crm_staff.id = crm_purchase_supplier_contact.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '70'  [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_certification` [ RunTime:0.0120s ]
SQL: SELECT crm_purchase_supplier_certification.*,crm_staff.name,crm_file_upload.file_name,crm_file_upload.path as file_url,SUBSTRING_INDEX(crm_file_upload.path,'.',-1) as file_type FROM `crm_purchase_supplier_certification` left join crm_staff on crm_staff.id = crm_purchase_supplier_certification.create_id left join crm_file_upload on crm_file_upload.id = crm_purchase_supplier_certification.file_id  WHERE `is_del` = 0 AND `supplier_pid` = '70'  [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_awards` [ RunTime:0.0070s ]
SQL: SELECT crm_purchase_supplier_awards.*,crm_staff.name,crm_file_upload.file_name,crm_file_upload.path as file_url,SUBSTRING_INDEX(crm_file_upload.path,'.',-1) as file_type FROM `crm_purchase_supplier_awards` left join crm_staff on crm_staff.id = crm_purchase_supplier_awards.create_id left join crm_file_upload on crm_file_upload.id = crm_purchase_supplier_awards.file_id  WHERE `is_del` = 0 AND `supplier_pid` = '70'  [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_customer` [ RunTime:0.0150s ]
SQL: SELECT crm_purchase_supplier_customer.*,crm_staff.name FROM `crm_purchase_supplier_customer` left join crm_staff on crm_staff.id = crm_purchase_supplier_customer.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '70'  [ RunTime:0.0310s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_equity` [ RunTime:0.0090s ]
SQL: SELECT crm_purchase_supplier_equity.*,crm_staff.name FROM `crm_purchase_supplier_equity` left join crm_staff on crm_staff.id = crm_purchase_supplier_equity.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '70'  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_finance` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_purchase_supplier_finance` WHERE `supplier_pid` = '70' AND `is_del` = 0  [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_team` [ RunTime:0.0220s ]
SQL: SELECT crm_purchase_supplier_team.*,crm_staff.name FROM `crm_purchase_supplier_team` left join crm_staff on crm_staff.id = crm_purchase_supplier_team.create_id  WHERE `supplier_pid` = '70' AND `is_del` = 0  [ RunTime:0.0200s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_cooperation` [ RunTime:0.0120s ]
SQL: SELECT crm_purchase_supplier_cooperation.*,crm_staff.name FROM `crm_purchase_supplier_cooperation` left join crm_staff on crm_staff.id = crm_purchase_supplier_cooperation.create_id  WHERE `is_del` = 0 AND `supplier_pid` = '70'  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_purchase_supplier_audit` [ RunTime:0.0150s ]
SQL: SELECT crm_purchase_supplier_audit.*,crm_variable_type.name as type_name,crm_staff.name,crm_file_upload.file_name,crm_file_upload.path as file_url,SUBSTRING_INDEX(crm_file_upload.path,'.',-1) as file_type FROM `crm_purchase_supplier_audit` INNER JOIN crm_variable_type on crm_variable_type.id = crm_purchase_supplier_audit.audit_id left join crm_staff on crm_staff.id = crm_purchase_supplier_audit.staff_id left join crm_file_upload on crm_file_upload.id = crm_purchase_supplier_audit.file_id  WHERE crm_purchase_supplier_audit.supplier_pid = '70' AND crm_variable_type.status = 1  [ RunTime:0.0050s ]

[ 2018-09-20T15:20:20+08:00 ] ::1 /Dwin/Purchase/contractIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0300s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/contractindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/contractindex','1537428020','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"signing_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_return_contract\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"file_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0500s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract` [ RunTime:0.0240s ]
SQL: SELECT c.*,s.name,u.file_name,u.path as file_url,IF(IFNULL(count( o.id ),0),1,0) AS order_status FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id left join crm_purchase_order o on o.contract_pid = c.id and o.is_del = 0  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 GROUP BY c.id ORDER BY contract_id asc LIMIT 0,25   [ RunTime:0.0260s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0070s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0070s ]

[ 2018-09-20T15:20:22+08:00 ] ::1 /Dwin/Purchase/getContractProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0150s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getcontractproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getcontractproduct','1537428021','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"30\"}') [ RunTime:0.3830s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract_product` [ RunTime:0.0190s ]
SQL: SELECT crm_purchase_contract_product.*,crm_staff.name FROM `crm_purchase_contract_product` left join crm_staff on crm_staff.id = crm_purchase_contract_product.create_id  WHERE `is_del` = 0 AND `contract_pid` = '30'  [ RunTime:0.0100s ]

[ 2018-09-20T15:20:24+08:00 ] ::1 /Dwin/Purchase/contractIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0310s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/contractindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/contractindex','1537428024','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"signing_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_return_contract\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"file_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"2\"}') [ RunTime:0.0820s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract` [ RunTime:0.0190s ]
SQL: SELECT c.*,s.name,u.file_name,u.path as file_url,IF(IFNULL(count( o.id ),0),1,0) AS order_status FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id left join crm_purchase_order o on o.contract_pid = c.id and o.is_del = 0  WHERE c.audit_status = 2 AND c.charger = '394' AND c.is_del = 0 GROUP BY c.id ORDER BY contract_id asc LIMIT 0,25   [ RunTime:0.0200s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 2 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 2 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0110s ]

[ 2018-09-20T15:20:25+08:00 ] ::1 /Dwin/Purchase/getContractProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0200s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0370s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getcontractproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0170s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getcontractproduct','1537428025','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10124\"}') [ RunTime:0.0920s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract_product` [ RunTime:0.0140s ]
SQL: SELECT crm_purchase_contract_product.*,crm_staff.name FROM `crm_purchase_contract_product` left join crm_staff on crm_staff.id = crm_purchase_contract_product.create_id  WHERE `is_del` = 0 AND `contract_pid` = '10124'  [ RunTime:0.0070s ]

[ 2018-09-20T15:20:32+08:00 ] ::1 /Dwin/Purchase/getContractProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0250s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getcontractproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getcontractproduct','1537428032','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10126\"}') [ RunTime:0.0730s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract_product` [ RunTime:0.0100s ]
SQL: SELECT crm_purchase_contract_product.*,crm_staff.name FROM `crm_purchase_contract_product` left join crm_staff on crm_staff.id = crm_purchase_contract_product.create_id  WHERE `is_del` = 0 AND `contract_pid` = '10126'  [ RunTime:0.0230s ]

[ 2018-09-20T15:20:39+08:00 ] ::1 /Dwin/Purchase/getContractProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0460s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getcontractproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getcontractproduct','1537428039','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10126\"}') [ RunTime:0.0840s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract_product` [ RunTime:0.0100s ]
SQL: SELECT crm_purchase_contract_product.*,crm_staff.name FROM `crm_purchase_contract_product` left join crm_staff on crm_staff.id = crm_purchase_contract_product.create_id  WHERE `is_del` = 0 AND `contract_pid` = '10126'  [ RunTime:0.0170s ]

[ 2018-09-20T15:20:41+08:00 ] ::1 /Dwin/Purchase/getContractProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getcontractproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getcontractproduct','1537428041','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"28\"}') [ RunTime:0.1220s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract_product` [ RunTime:0.0160s ]
SQL: SELECT crm_purchase_contract_product.*,crm_staff.name FROM `crm_purchase_contract_product` left join crm_staff on crm_staff.id = crm_purchase_contract_product.create_id  WHERE `is_del` = 0 AND `contract_pid` = '28'  [ RunTime:0.0070s ]

[ 2018-09-20T15:20:48+08:00 ] ::1 /Dwin/Purchase/getContractProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0350s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getcontractproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getcontractproduct','1537428048','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"40\"}') [ RunTime:0.1100s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract_product` [ RunTime:0.0160s ]
SQL: SELECT crm_purchase_contract_product.*,crm_staff.name FROM `crm_purchase_contract_product` left join crm_staff on crm_staff.id = crm_purchase_contract_product.create_id  WHERE `is_del` = 0 AND `contract_pid` = '40'  [ RunTime:0.0100s ]

[ 2018-09-20T15:21:05+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0450s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0780s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0480s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537428065','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0880s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0250s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0050s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0280s ]

[ 2018-09-20T15:21:08+08:00 ] ::1 /Dwin/Purchase/getOrderProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0190s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0200s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getorderproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getorderproduct','1537428068','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10016\"}') [ RunTime:0.0700s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0130s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10016' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0200s ]

[ 2018-09-20T15:21:16+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0220s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0320s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0260s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537428076','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0790s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0140s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0150s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0190s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0080s ]

[ 2018-09-20T15:21:44+08:00 ] ::1 /Dwin/Purchase/getOrderProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0260s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getorderproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0300s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getorderproduct','1537428104','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10016\"}') [ RunTime:0.0650s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0140s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10016' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0150s ]

[ 2018-09-20T15:21:48+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0210s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537428108','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"3\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0850s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0100s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0160s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0110s ]

[ 2018-09-20T15:25:10+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0250s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0160s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537428310','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0660s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0150s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0570s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0070s ]

[ 2018-09-20T15:25:12+08:00 ] ::1 /Dwin/Purchase/getOrderProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0200s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0170s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0190s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getorderproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0520s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getorderproduct','1537428312','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"10016\"}') [ RunTime:0.0660s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_product` [ RunTime:0.0090s ]
SQL: SELECT p.sort_id,p.id,p.product_id,p.single_price,p.total_price,p.number,crm_material.product_no,crm_material.product_name,crm_material.product_number,p.number allnum,ifnull(sum(st.num),0) as allinnum,(p.number-ifnull(sum(st.num),0)) as surplusnum,crm_material.warehouse_id FROM crm_purchase_order_product p LEFT JOIN crm_material on crm_material.product_id = p.product_id LEFT JOIN crm_stock_in_purchase pur ON pur.source_id = p.order_pid LEFT JOIN crm_stock_material st ON ((st.source_id = pur.id and p.product_id = st.product_id) and st.type = 1)  WHERE p.is_del = 0 AND p.order_pid = '10016' GROUP BY p.product_id ORDER BY p.sort_id asc  [ RunTime:0.0070s ]

[ 2018-09-20T15:26:56+08:00 ] ::1 /Dwin/Purchase/getProductMsg.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.3060s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.2230s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getproductmsg','1537428415','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.1440s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0070s ]
SQL: SELECT `product_id`,`product_no`,`product_name`,`product_number`,`warehouse_id` FROM `crm_material` WHERE `product_no` LIKE '%a%' OR `product_name` LIKE '%a%' OR `product_number` LIKE '%a%'  [ RunTime:0.0310s ]

[ 2018-09-20T15:27:49+08:00 ] ::1 /Dwin/Purchase/getProductMsg.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0310s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0060s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getproductmsg','1537428469','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0540s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0110s ]
SQL: SELECT `product_id`,`product_no`,`product_name`,`product_number`,`warehouse_id` FROM `crm_material` WHERE `product_no` LIKE '%a%' OR `product_name` LIKE '%a%' OR `product_number` LIKE '%a%'  [ RunTime:0.0300s ]

[ 2018-09-20T15:29:01+08:00 ] ::1 /Dwin/Purchase/getProductMsg.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0200s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.3080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getproductmsg','1537428540','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0790s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0080s ]
SQL: SELECT `product_id`,`product_no`,`product_name`,`product_number`,`warehouse_id` FROM `crm_material` WHERE `product_no` LIKE '%a%' OR `product_name` LIKE '%a%' OR `product_number` LIKE '%a%'  [ RunTime:0.5790s ]

[ 2018-09-20T15:30:13+08:00 ] ::1 /Dwin/Purchase/getProductMsg.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getproductmsg','1537428613','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0840s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0070s ]
SQL: SELECT `product_id`,`product_no`,`product_name`,`product_number`,`warehouse_id` FROM `crm_material` WHERE `product_no` LIKE '%a%' OR `product_name` LIKE '%a%' OR `product_number` LIKE '%a%'  [ RunTime:0.0270s ]

[ 2018-09-20T15:30:55+08:00 ] ::1 /Dwin/Purchase/getProductMsg.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0180s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getproductmsg','1537428655','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0760s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0130s ]
SQL: SELECT `product_id`,`product_no`,`product_name`,`product_number`,`warehouse_id` FROM `crm_material` WHERE `product_no` LIKE '%a%' OR `product_name` LIKE '%a%' OR `product_number` LIKE '%a%'  [ RunTime:0.0390s ]

[ 2018-09-20T15:31:23+08:00 ] ::1 /Dwin/Purchase/getProductMsg.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0230s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getproductmsg','1537428682','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.3910s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.9131s ]
SQL: SELECT `product_id`,`product_no`,`product_name`,`product_number`,`warehouse_id` FROM `crm_material` WHERE `product_no` LIKE '%a%' OR `product_name` LIKE '%a%' OR `product_number` LIKE '%a%'  [ RunTime:0.2360s ]

[ 2018-09-20T15:32:43+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0240s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537428762','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0680s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0180s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0130s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 0 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]

[ 2018-09-20T15:32:46+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0060s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0320s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537428766','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"3\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"2\"}') [ RunTime:0.0670s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0160s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 2 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0050s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 2 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 2 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]

[ 2018-09-20T15:32:48+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0210s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537428768','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"4\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"1\"}') [ RunTime:0.0500s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0090s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 1 AND o.create_id = '394' AND o.is_del = 0 ORDER BY purchase_order_id asc LIMIT 0,25   [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 1 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 1 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]

[ 2018-09-20T15:32:49+08:00 ] ::1 /Dwin/Purchase/orderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0160s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderindex','1537428769','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"5\",\"columns\":[{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"1\"}') [ RunTime:0.0860s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0150s ]
SQL: SELECT o.*,s.name FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 1 AND o.create_id = '394' AND o.is_del = 0 ORDER BY name asc LIMIT 0,25   [ RunTime:0.0060s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 1 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order o left join crm_staff s on s.id = o.create_id  WHERE o.audit_status = 1 AND o.create_id = '394' AND o.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]

[ 2018-09-20T15:32:54+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0060s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537428774','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0860s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0100s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0040s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0040s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0040s ]

[ 2018-09-20T15:32:58+08:00 ] ::1 /Dwin/Purchase/orderScheduleList.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0170s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0060s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/orderschedulelist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/orderschedulelist','1537428777','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"current_page\":\"1\",\"page_sizes\":\"10\",\"total\":\"1\",\"condition\":\"\"}') [ RunTime:0.0710s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order_schedule` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0130s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id ORDER BY p.update_time desc LIMIT 0,10   [ RunTime:0.0040s ]
SQL: SELECT p.id,o.create_time,p.product_no,p.product_id,`product_number`,p.number,p.deliver_time,ifnull(sum(sm.num),0) as stock_in_num FROM crm_purchase_order o INNER JOIN crm_purchase_order_product p on p.order_pid = o.id and p.is_del = 0 left join crm_stock_in_purchase si on si.source_id = p.order_pid and si.is_del = 0 left join crm_stock_material sm on sm.source_id = si.id and p.product_id = sm.product_id and sm.type = 1 and sm.is_del = 0  WHERE o.is_del = 0 GROUP BY p.product_id  [ RunTime:0.0100s ]
SQL: SELECT * FROM crm_purchase_order_schedule s WHERE s.source_pid IN ('14','13','12','11','9','8','7','6','4','1') AND s.is_del = 0  [ RunTime:0.0140s ]

[ 2018-09-20T15:33:02+08:00 ] ::1 /Dwin/Purchase/contractIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/contractindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/contractindex','1537428782','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"signing_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"total_amount\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_representative\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_return_contract\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"order_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"file_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"function\":\"undefined\",\"staffLimit\":\"1\",\"audit_status\":\"0\"}') [ RunTime:0.0740s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract` [ RunTime:0.0080s ]
SQL: SELECT c.*,s.name,u.file_name,u.path as file_url,IF(IFNULL(count( o.id ),0),1,0) AS order_status FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id left join crm_purchase_order o on o.contract_pid = c.id and o.is_del = 0  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 GROUP BY c.id ORDER BY contract_id asc LIMIT 0,25   [ RunTime:0.0060s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0070s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_contract c left join crm_staff s on s.id = c.create_id left join crm_file_upload u on u.id = c.file_id  WHERE c.audit_status = 0 AND c.charger = '394' AND c.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]

[ 2018-09-20T15:33:03+08:00 ] ::1 /Dwin/Purchase/getContractProduct
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0160s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getcontractproduct%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getcontractproduct','1537428783','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"34\"}') [ RunTime:0.0570s ]
SQL: SHOW COLUMNS FROM `crm_purchase_contract_product` [ RunTime:0.0140s ]
SQL: SELECT crm_purchase_contract_product.*,crm_staff.name FROM `crm_purchase_contract_product` left join crm_staff on crm_staff.id = crm_purchase_contract_product.create_id  WHERE `is_del` = 0 AND `contract_pid` = '34'  [ RunTime:0.0040s ]

[ 2018-09-20T15:33:55+08:00 ] ::1 /Dwin/Purchase/getProductMsg.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0480s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%purchase/getproductmsg%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','purchase/getproductmsg','1537428835','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"condition\":\"a\"}') [ RunTime:0.0740s ]
SQL: SHOW COLUMNS FROM `crm_material` [ RunTime:0.0120s ]
SQL: SELECT `product_id`,`product_no`,`product_name`,`product_number`,`warehouse_id` FROM `crm_material` WHERE `product_no` LIKE '%a%' OR `product_name` LIKE '%a%' OR `product_number` LIKE '%a%'  [ RunTime:0.0240s ]

[ 2018-09-20T15:35:37+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537428937','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\"}') [ RunTime:0.1260s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num) FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0170s ]

[ 2018-09-20T15:40:44+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0240s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.9131s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.3520s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0250s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0240s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537429242','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"2\"}') [ RunTime:0.0530s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.9201s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.production_line IN ('1','2','3') AND ord.production_status IN ('2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0220s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num) FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.production_line IN ('1','2','3') AND ord.production_status IN ('2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.2390s ]

[ 2018-09-20T15:47:40+08:00 ] ::1 /Dwin/Production/productionIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0260s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0190s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionindex','1537429659','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"product_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"actual_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"delivery_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_order\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"staff_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"production_line\":\"\"}') [ RunTime:0.0650s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_plan plan WHERE `production_line_name` IN ('生产线','SMT线','装配线','生产线') AND plan.is_del = 0 AND plan.production_status = 3 AND plan.scheduled_status IN ('0','1') LIMIT 1   [ RunTime:0.0200s ]
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE `production_line_name` IN ('生产线','SMT线','装配线','生产线') AND plan.is_del = 0 AND plan.production_status = 3 AND plan.scheduled_status IN ('0','1') GROUP BY plan.id ORDER BY staff_name desc LIMIT 0,10   [ RunTime:0.0590s ]
SQL: SHOW COLUMNS FROM `crm_material_bom` [ RunTime:0.0090s ]
SQL: SELECT `bom_type_name`,`product_no`,`bom_id`,`id` FROM `crm_material_bom` WHERE `product_id` = '10858' AND `bom_status` = 2 AND `is_del` = 0  [ RunTime:0.0050s ]
SQL: SELECT `bom_type_name`,`product_no`,`bom_id`,`id` FROM `crm_material_bom` WHERE `product_id` = '10612' AND `bom_status` = 2 AND `is_del` = 0  [ RunTime:0.0050s ]
SQL: SELECT `bom_type_name`,`product_no`,`bom_id`,`id` FROM `crm_material_bom` WHERE `product_id` = '10912' AND `bom_status` = 2 AND `is_del` = 0  [ RunTime:0.0100s ]
SQL: SELECT `bom_type_name`,`product_no`,`bom_id`,`id` FROM `crm_material_bom` WHERE `product_id` = '10709' AND `bom_status` = 2 AND `is_del` = 0  [ RunTime:0.0060s ]
SQL: SELECT `bom_type_name`,`product_no`,`bom_id`,`id` FROM `crm_material_bom` WHERE `product_id` = '10846' AND `bom_status` = 2 AND `is_del` = 0  [ RunTime:0.0050s ]
SQL: SELECT `bom_type_name`,`product_no`,`bom_id`,`id` FROM `crm_material_bom` WHERE `product_id` = '15077' AND `bom_status` = 2 AND `is_del` = 0  [ RunTime:0.0080s ]
SQL: SELECT `bom_type_name`,`product_no`,`bom_id`,`id` FROM `crm_material_bom` WHERE `product_id` = '15414' AND `bom_status` = 2 AND `is_del` = 0  [ RunTime:0.0030s ]
SQL: SELECT `bom_type_name`,`product_no`,`bom_id`,`id` FROM `crm_material_bom` WHERE `product_id` = '617' AND `bom_status` = 2 AND `is_del` = 0  [ RunTime:0.0050s ]
SQL: SELECT `bom_type_name`,`product_no`,`bom_id`,`id` FROM `crm_material_bom` WHERE `product_id` = '1376' AND `bom_status` = 2 AND `is_del` = 0  [ RunTime:0.0040s ]
SQL: SELECT `bom_type_name`,`product_no`,`bom_id`,`id` FROM `crm_material_bom` WHERE `product_id` = '15077' AND `bom_status` = 2 AND `is_del` = 0  [ RunTime:0.0160s ]

[ 2018-09-20T15:48:13+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0150s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537429693','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\"}') [ RunTime:0.0650s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0200s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0070s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num) FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY production_status desc LIMIT 0,10   [ RunTime:0.0180s ]

[ 2018-09-20T15:56:52+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0100s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537430212','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0780s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0130s ]
ERR: 1054:Unknown column 'ordaudit_status' in 'where clause'
 [ SQL语句 ] : SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE `ordaudit_status` = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1  
ERR: 1054:Unknown column 'ordaudit_status' in 'where clause'
 [ SQL语句 ] : SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE `ordaudit_status` = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1  

[ 2018-09-20T16:07:13+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0180s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0220s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0230s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537430832','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0690s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0100s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
ERR: 1054:Unknown column 'ordaudit_status' in 'where clause'
 [ SQL语句 ] : SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE `ordaudit_status` = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1  
ERR: 1054:Unknown column 'ordaudit_status' in 'where clause'
 [ SQL语句 ] : SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE `ordaudit_status` = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1  

[ 2018-09-20T16:10:47+08:00 ] ::1 /Dwin/production/productionOrderIndex
ERR: SQLSTATE[HY000] [2002] ӷһʱûȷ𸴻ӵûзӦӳʧܡ


[ 2018-09-20T16:10:54+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0140s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431054','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0860s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0200s ]

[ 2018-09-20T16:11:27+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431087','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0640s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0330s ]

[ 2018-09-20T16:12:19+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0060s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431139','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0820s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0060s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0120s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0230s ]

[ 2018-09-20T16:12:21+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0160s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0150s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431141','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0820s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0090s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0150s ]

[ 2018-09-20T16:12:37+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0110s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537431157','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100240\"}') [ RunTime:0.3310s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0110s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100240'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0340s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0120s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100240'  [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0180s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100240 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0080s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100240'  [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10036','10038','10042') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0180s ]

[ 2018-09-20T16:13:18+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431198','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0800s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0200s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0200s ]

[ 2018-09-20T16:13:35+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0110s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431215','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0740s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0150s ]

[ 2018-09-20T16:14:24+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431264','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0790s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0280s ]

[ 2018-09-20T16:17:13+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0240s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0150s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431433','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0670s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0240s ]

[ 2018-09-20T16:17:50+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431470','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0720s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0140s ]

[ 2018-09-20T16:18:47+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431526','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"0\"}') [ RunTime:0.6950s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.2280s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '0' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '0' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0130s ]

[ 2018-09-20T16:18:49+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0150s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431529','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"3\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"2\"}') [ RunTime:0.1010s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0080s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '2' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '2' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0120s ]

[ 2018-09-20T16:18:51+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0410s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431531','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"4\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"0\"}') [ RunTime:0.0730s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '0' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '0' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0240s ]

[ 2018-09-20T16:18:59+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.004000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537431539','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100236\"}') [ RunTime:0.1090s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0110s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100236'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0090s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100236'  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10130','10132','10266','10301','10302','10303','10307') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100236 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0080s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100236'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10043') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0090s ]

[ 2018-09-20T16:19:37+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0260s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431577','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0950s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0120s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0280s ]

[ 2018-09-20T16:19:40+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0450s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537431580','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0750s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0250s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0070s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0090s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0300s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0170s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0120s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0080s ]

[ 2018-09-20T16:20:03+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431603','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.1290s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0090s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0180s ]

[ 2018-09-20T16:20:05+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0160s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537431604','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100236\"}') [ RunTime:0.0440s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0060s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0020s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0100s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100236'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0070s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100236'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10130','10132','10266','10301','10302','10303','10307') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100236 LIMIT 1   [ RunTime:0.0090s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0070s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100236'  [ RunTime:0.0020s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10043') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0070s ]

[ 2018-09-20T16:20:29+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0060s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431628','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.1180s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0170s ]

[ 2018-09-20T16:20:30+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0140s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0350s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537431630','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100236\"}') [ RunTime:0.0390s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0130s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100236'  [ RunTime:0.0020s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0390s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0230s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100236'  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10130','10132','10266','10301','10302','10303','10307') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100236 LIMIT 1   [ RunTime:0.0090s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0080s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100236'  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10043') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0100s ]

[ 2018-09-20T16:21:03+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0120s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537431663','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0560s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0300s ]

[ 2018-09-20T16:30:48+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537432248','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0690s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0200s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0070s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0200s ]

[ 2018-09-20T16:30:59+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0220s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537432259','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100236\"}') [ RunTime:0.0730s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0240s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100236'  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0120s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100236'  [ RunTime:0.0080s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10130','10132','10266','10301','10302','10303','10307') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100236 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0330s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0170s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100236'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10043') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0030s ]

[ 2018-09-20T16:32:30+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0160s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537432350','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0780s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0260s ]

[ 2018-09-20T16:32:32+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0220s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537432352','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100236\"}') [ RunTime:0.0830s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0190s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0090s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100236'  [ RunTime:0.0100s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0070s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100236'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10130','10132','10266','10301','10302','10303','10307') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100236 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0130s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100236'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10043') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0040s ]

[ 2018-09-20T16:34:35+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0200s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0290s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0190s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537432475','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.1220s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0210s ]

[ 2018-09-20T16:34:38+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0210s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537432478','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0720s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0270s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0150s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0080s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0200s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0070s ]

[ 2018-09-20T16:38:03+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0260s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0060s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537432683','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0650s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0140s ]

[ 2018-09-20T16:38:05+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0190s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537432685','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0570s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0080s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0090s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0080s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0080s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0070s ]

[ 2018-09-20T16:39:00+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.3130s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.2200s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537432740','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0770s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0220s ]

[ 2018-09-20T16:39:03+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0200s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537432742','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100236\"}') [ RunTime:0.0830s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0170s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0090s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100236'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0080s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100236'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10130','10132','10266','10301','10302','10303','10307') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100236 LIMIT 1   [ RunTime:0.0100s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0070s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100236'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10043') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0030s ]

[ 2018-09-20T16:42:24+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0160s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0430s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537432944','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0790s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0070s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0250s ]

[ 2018-09-20T16:42:26+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0180s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0200s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537432945','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0650s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0120s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0100s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0110s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0070s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0130s ]

[ 2018-09-20T16:44:42+08:00 ] ::1 /Dwin/Stock/showPendingOrderList
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showpendingorderlist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`auth_rule_name`,`level`,`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('待出库订单',NULL,'394','::1','stock/showpendingorderlist','1537433080','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"cpo_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"type_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"finance_audit_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"staname\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"staff_phone\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"cusname\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_status_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"log_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"ware_house\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"is_batch_delivery\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"logistices_tip\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"pendingData\":\"3\",\"orderLimit\":\"1\"}') [ RunTime:0.9761s ]
SQL: SHOW COLUMNS FROM `crm_orderform` [ RunTime:0.2140s ]
SQL: SHOW COLUMNS FROM `crm_auth_role` [ RunTime:0.0090s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 2 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 3 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 8 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 13 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 16 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 34 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 37 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 40 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 43 LIMIT 1   [ RunTime:0.0150s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 44 LIMIT 1   [ RunTime:0.0070s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 45 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 46 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 47 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 48 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 49 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 51 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT `staff_ids` FROM `crm_auth_role` WHERE `role_id` = 21 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT COUNT(id) AS tp_count FROM `crm_orderform` WHERE `check_status` = '4' AND `stock_status` IN ('0','1','2') LIMIT 1   [ RunTime:0.0110s ]
SQL: SELECT COUNT(id) AS tp_count FROM `crm_orderform` WHERE `check_status` = '4' AND `stock_status` IN ('0','1','2') LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_orderform` [ RunTime:0.0100s ]
SQL: SELECT crm_orderform.id,`cpo_id`,d.order_type_name type_name,from_unixtime(settlement_time) finance_audit_time,pic_name staname,pic_phone staff_phone,if (LENGTH(cus_name) < 7,`cus_name`,REPLACE(cus_name,SUBSTRING(cus_name,3,4),"****")) cusname,j.check_type_name check_status_name,stock_status stock_out_status,f.logistics_type_name log_type,GROUP_CONCAT(distinct b.repertory_name) ware_house,`is_batch_delivery`,`logistices_tip` FROM `crm_orderform` LEFT JOIN `crm_repertorylist` b ON FIND_IN_SET(b.rep_id,delivery_ware_house) LEFT JOIN `crm_settlementlist` c ON c.settle_id = settlement_method LEFT JOIN `crm_order_type` d ON d.type_id = crm_orderform.order_type LEFT JOIN `crm_order_performance_type` e ON e.type_id = crm_orderform.static_type LEFT JOIN `crm_order_logistics_type` f ON f.type_id = crm_orderform.logistics_type LEFT JOIN `crm_order_freight_payment_type` g ON g.type_id = crm_orderform.freight_payment_method LEFT JOIN `crm_order_invoice` h ON h.type_id =crm_orderform.invoice_type LEFT JOIN `crm_order_invoice_situation` i ON i.type_id = crm_orderform.invoice_situation LEFT JOIN `crm_order_check_status` j ON j.type_id = crm_orderform.check_status  WHERE `check_status` = '4' AND `stock_status` IN ('0','1','2') GROUP BY crm_orderform.id ORDER BY cpo_id asc LIMIT 0,10   [ RunTime:0.0430s ]

[ 2018-09-20T16:44:44+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0390s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537433083','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\"}') [ RunTime:1.0951s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0210s ]
NOTIC: [8] Undefined index: status F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Controller\ProductionController.class.php 第 1164 行.
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = null AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = null AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY start_t desc LIMIT 0,10   [ RunTime:0.0340s ]

[ 2018-09-20T16:44:48+08:00 ] ::1 /Dwin/Stock/otherStockOutApplyList
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0240s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0520s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/otherstockoutapplylist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.8991s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/otherstockoutapplylist','1537433086','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"apply_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"picking_kind\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"apply_dept_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"apply_reason\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"apply_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_type\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"stockOutType\":\"1\",\"flag\":\"1\"}') [ RunTime:0.4260s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_other_apply` [ RunTime:0.0210s ]
SQL: SELECT r.*,(case 
                        when ifnull(p.stock_out_id,0) = '0' then '未下推'
                        else '已下推'
                        end
                    ) as stock_out_type FROM crm_stock_out_other_apply r left join crm_stock_out_other p on r.id = p.source_id and p.is_del = 0  WHERE ifnull(p.stock_out_id,0) = '0' AND r.is_del = 0 ORDER BY apply_id asc LIMIT 0,25   [ RunTime:0.0450s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_out_other_apply r left join crm_stock_out_other p on r.id = p.source_id and p.is_del = 0  WHERE ifnull(p.stock_out_id,0) = '0' AND r.is_del = 0 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_out_other_apply r left join crm_stock_out_other p on r.id = p.source_id and p.is_del = 0  WHERE ifnull(p.stock_out_id,0) = '0' AND r.is_del = 0 LIMIT 1   [ RunTime:0.0090s ]

[ 2018-09-20T16:44:49+08:00 ] ::1 /Dwin/Stock/getOtherStockOutApplyMaterial
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0140s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0220s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0700s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getotherstockoutapplymaterial%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getotherstockoutapplymaterial','1537433089','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"5\"}') [ RunTime:0.0820s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_other_apply_material` [ RunTime:0.0140s ]
SQL: SELECT m.*,cm.product_name,cm.product_number,r.num as stock_out_number,cs.stock_number,cs.o_audit,cs.out_processing FROM crm_stock_out_other_apply_material m left join crm_material cm on cm.product_id = m.product_id left join crm_stock_out_record r on r.source_pid = m.id and r.status = 2 left join crm_stock cs on m.default_rep_id = cs.warehouse_number and m.product_id = cs.product_id  WHERE m.is_del = 0 AND m.apply_id = '5'  [ RunTime:0.0150s ]

[ 2018-09-20T16:44:58+08:00 ] ::1 /Dwin/Stock/delOtherApply.html
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0200s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/delotherapply%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/delotherapply','1537433097','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"applyId\":\"5\"}') [ RunTime:0.2630s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_other_apply` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_other` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_stock_out_other` WHERE `source_id` = 5 AND `is_del` = 0 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_other_apply` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_stock_out_other_apply` WHERE `id` = 5  [ RunTime:0.0050s ]
SQL: UPDATE `crm_stock_out_other_apply` SET `is_del`='1' WHERE `id` = 5 [ RunTime:0.0040s ]
SQL: show full fields from crm_stock_out_other_apply [ RunTime:0.0120s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                `staff_id`,
                                `staff_name`,
                                `path`,
                                `table_name`,
                                `comment`,
                                `type`,
                                `major_key`,
                                `before_data`,
                                `now_data`,
                                `create_time`
                            )
                            VALUES
                                (
                                    394,
                                    'zengyongtai',
                                    'Stock/delOtherApply',
                                    'crm_stock_out_other_apply',
                                    '{"id":"主键","apply_id":"申请单编号","source_id":"源单编号","source_type":"源单类型 1-其他出库类型","picking_kind":"领料类型","apply_dept_id":"申领部门crm_dept 中的ID","apply_dept_name":"申领部门名称","create_id":"制单人id","create_name":"制单人姓名","capital_amount":"大写总金额","total_amount":"申请总金额","apply_reason":"申请理由","apply_time":"申请时间","create_time":"创建时间","stock_status":"出库状态 0-未处理 1-出库中 2-出库完成","audit_name":"审核人姓名","audit_status":"0-为审核 1-审核不合格 2-审核合格","audit_tips":"审核备注","audit_time":"审核时间","update_time":"更新时间","is_del":"0-未删除 1-已删除"}',
                                    2,
                                    '5',
                                    '[{"id":"5","apply_id":"DW20180807100045","source_id":null,"source_type":"0","picking_kind":"204","apply_dept_id":"6","apply_dept_name":"研发1部","create_id":"394","create_name":"李楼","capital_amount":"零元","total_amount":"0.00","apply_reason":"33333333","apply_time":"1534435200","create_time":"1533611607","stock_status":"0","audit_name":"","audit_status":"2","audit_tips":"","audit_time":null,"update_time":"1533611607","is_del":"0"}]',
                                    '[{"is_del":1,"id":"5","apply_id":"DW20180807100045","source_id":null,"source_type":"0","picking_kind":"204","apply_dept_id":"6","apply_dept_name":"研发1部","create_id":"394","create_name":"李楼","capital_amount":"零元","total_amount":"0.00","apply_reason":"33333333","apply_time":"1534435200","create_time":"1533611607","stock_status":"0","audit_name":"","audit_status":"2","audit_tips":"","audit_time":null,"update_time":"1533611607"}]',
                                    1537433098
                                ); [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_other_apply_material` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_other_apply_material` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_stock_out_other_apply_material` WHERE `apply_id` = 5 AND `is_del` = 0  [ RunTime:0.0160s ]
SQL: UPDATE `crm_stock_out_other_apply_material` SET `is_del`='1' WHERE `apply_id` = 5 AND `is_del` = 0 [ RunTime:0.0070s ]
SQL: show full fields from crm_stock_out_other_apply_material [ RunTime:0.0090s ]
SQL: INSERT INTO `dwin`.`crm_table_log` (
                                `staff_id`,
                                `staff_name`,
                                `path`,
                                `table_name`,
                                `comment`,
                                `type`,
                                `major_key`,
                                `before_data`,
                                `now_data`,
                                `create_time`
                            )
                            VALUES
                                (
                                    394,
                                    'zengyongtai',
                                    'Stock/delOtherApply',
                                    'crm_stock_out_other_apply_material',
                                    '{"id":"","apply_id":"其他出库申请单主键id","product_id":"物料表主键","product_number":"物料名称","product_name":"物料型号","product_no":"物料编号","unite":"单位","num":"申请数量","price":"单价","total_price":"总金额","demand_time":"需求时间","tips":"备注","stock_out_num":"出库数量 （暂定，可能不需要）","default_rep_id":"默认出库id","create_id":"创建人","create_time":"创建时间","update_id":"修改人","update_time":"更新时间","is_del":"是否被删除 0 未删除 1 已删除"}',
                                    2,
                                    '0000000006,0000000008',
                                    '[{"id":"0000000006","apply_id":"5","product_id":"149","product_number":"EKTT04F3","product_name":"EKTT04F3(停产）","product_no":"00149","unite":"1","num":"1","price":"1.00","total_price":"1.00","demand_time":"1535299200","tips":"2","stock_out_num":null,"default_rep_id":"0","create_id":"394","create_time":"1533611607","update_id":"394","update_time":"1533611607","is_del":"0"},{"id":"0000000008","apply_id":"5","product_id":"15537","product_number":"CESHI XINGHAO","product_name":"DMT100000000","product_no":"D00001","unite":"3","num":"4","price":"4.00","total_price":"16.00","demand_time":"1534262400","tips":"4","stock_out_num":null,"default_rep_id":"1","create_id":"394","create_time":"1533611607","update_id":"394","update_time":"1533611607","is_del":"0"}]',
                                    '[{"is_del":1,"id":"0000000006","apply_id":"5","product_id":"149","product_number":"EKTT04F3","product_name":"EKTT04F3(停产）","product_no":"00149","unite":"1","num":"1","price":"1.00","total_price":"1.00","demand_time":"1535299200","tips":"2","stock_out_num":null,"default_rep_id":"0","create_id":"394","create_time":"1533611607","update_id":"394","update_time":"1533611607"},{"is_del":1,"id":"0000000008","apply_id":"5","product_id":"15537","product_number":"CESHI XINGHAO","product_name":"DMT100000000","product_no":"D00001","unite":"3","num":"4","price":"4.00","total_price":"16.00","demand_time":"1534262400","tips":"4","stock_out_num":null,"default_rep_id":"1","create_id":"394","create_time":"1533611607","update_id":"394","update_time":"1533611607"}]',
                                    1537433098
                                ); [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock` [ RunTime:0.0130s ]
SQL: SELECT m.*,cm.product_name,cm.product_number,r.num as stock_out_number,cs.stock_number,cs.o_audit,cs.out_processing FROM crm_stock_out_other_apply_material m left join crm_material cm on cm.product_id = m.product_id left join crm_stock_out_record r on r.source_pid = m.id and r.status = 2 left join crm_stock cs on m.default_rep_id = cs.warehouse_number and m.product_id = cs.product_id  WHERE m.is_del = 0 AND m.apply_id = '5'  [ RunTime:0.0050s ]

[ 2018-09-20T16:44:58+08:00 ] ::1 /Dwin/Stock/otherStockOutApplyList
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/otherstockoutapplylist%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/otherstockoutapplylist','1537433098','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"apply_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"picking_kind\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"apply_dept_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"apply_reason\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"apply_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_type\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"stockOutType\":\"1\",\"flag\":\"1\"}') [ RunTime:0.0600s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_other_apply` [ RunTime:0.0060s ]
SQL: SELECT r.*,(case 
                        when ifnull(p.stock_out_id,0) = '0' then '未下推'
                        else '已下推'
                        end
                    ) as stock_out_type FROM crm_stock_out_other_apply r left join crm_stock_out_other p on r.id = p.source_id and p.is_del = 0  WHERE ifnull(p.stock_out_id,0) = '0' AND r.is_del = 0 ORDER BY apply_id asc LIMIT 0,25   [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_out_other_apply r left join crm_stock_out_other p on r.id = p.source_id and p.is_del = 0  WHERE ifnull(p.stock_out_id,0) = '0' AND r.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_out_other_apply r left join crm_stock_out_other p on r.id = p.source_id and p.is_del = 0  WHERE ifnull(p.stock_out_id,0) = '0' AND r.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]

[ 2018-09-20T16:45:10+08:00 ] ::1 /Dwin/Stock/purchaseAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0210s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseauditindex','1537433110','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"auditor_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"pay_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"other_bill\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.0800s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_purchase` [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_purchase a WHERE a.is_del = 0 AND a.audit_status = 0 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT a.id,a.cate,a.cate_name,a.stock_in_id,a.source_id,a.other_bill,from_unixtime(a.pay_time) pay_time,a.pay_condition,a.intercourse_subject,a.print_time,a.batch,a.create_id,a.create_name,from_unixtime(a.create_time) create_time,a.tips,a.auditor,a.auditor_name,a.audit_status,a.audit_tips,from_unixtime(a.audit_time) audit_time,a.keep_id,a.keep_name,a.charge_id,a.charge_name,a.account_id,a.account_name,a.check_id,a.check_name,a.business_id,a.business_name,from_unixtime(a.update_time) update_time,o.supplier_name,o.purchase_order_id,o.purchase_mode,o.purchase_type FROM crm_stock_in_purchase a LEFT JOIN crm_purchase_order o ON o.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 0 ORDER BY stock_in_id asc LIMIT 0,25   [ RunTime:0.0060s ]

[ 2018-09-20T16:45:14+08:00 ] ::1 /Dwin/Production/productionTaskIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0190s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0150s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productiontaskindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0190s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productiontaskindex','1537433114','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"task_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"task_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"task_line_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"task_group_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"task_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"complete_quantity\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"actual_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"0,1,2\"}') [ RunTime:0.0900s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0060s ]
NOTIC: [8] Undefined index: a.pid F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Model\ProductionLineModel.class.php 第 69 行.
SQL: SELECT a.id,a.production_line group_name,a.pid,a.manufacturability group_ability,b.production_line line_name FROM crm_production_line a LEFT JOIN crm_production_line b ON b.id = a.pid  WHERE a.is_del = 0 AND a.pid <> 0 LIMIT 0,100   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0110s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT task.id,from_unixtime(task.create_time) create_time,task.task_id,task.product_no,task.product_id,material.warehouse_id default_rep_id,task.task_number,task.task_line,task.task_group,task.production_type,from_unixtime(task.task_start_time,'%y-%m-%d') start_t,from_unixtime(task.task_end_time,'%y-%m-%d') end_t,task.production_status,sum(ifnull(sip.in_num,0)) complete_quantity,ifnull(from_unixtime(task.actual_end_time,'%y-%m-%d'),' ') actual_t,task.tips,task.create_id,task.create_name,line1.production_line task_line_name,line2.production_line task_group_name,produce_order.production_code order_code FROM crm_production_task task LEFT JOIN crm_production_line line1 ON line1.id = task_line LEFT JOIN crm_production_line line2 ON line2.id = task_group LEFT JOIN crm_material material ON material.product_id = task.product_id LEFT JOIN crm_production_order produce_order ON task.order_pid = produce_order.id LEFT JOIN (select a.*,sum(ifnull(b.num,0)) in_num from crm_stock_in_production a left join crm_stock_in_record b on a.id = b.source_id group by a.id) sip ON task.id = sip.source_id and sip.is_del = 0  WHERE task.task_group IN ('100','101','102','103','104','105','106','107','108') AND task.production_status IN ('0','1','2') AND task.is_del = 0 GROUP BY task.id ORDER BY start_t desc LIMIT 0,10   [ RunTime:0.0170s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_task task WHERE task.task_group IN ('100','101','102','103','104','105','106','107','108') AND task.production_status IN ('0','1','2') LIMIT 1   [ RunTime:0.0170s ]

[ 2018-09-20T16:45:15+08:00 ] ::1 /Dwin/Stock/purchaseOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0210s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/purchaseorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/purchaseorderindex','1537433115','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"order_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"contract_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_order_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"supplier_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"billing_method\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_mode\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"purchase_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.1200s ]
SQL: SHOW COLUMNS FROM `crm_purchase_order` [ RunTime:0.0120s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT a.id,a.supplier_name,a.purchase_order_id,from_unixtime(a.create_time) create_time,a.create_id,u.name create_name,from_unixtime(a.update_time) update_time,from_unixtime(a.order_time) order_time,a.billing_method,a.purchase_mode,a.purchase_type,c.contract_id,a.audit_status,a.stock_status FROM crm_purchase_order a LEFT JOIN crm_staff u ON u.id = a.create_id LEFT JOIN crm_purchase_contract c ON c.id = a.contract_pid  WHERE a.audit_status = 2 AND a.is_del = 0 ORDER BY order_time asc LIMIT 0,25   [ RunTime:0.0050s ]

[ 2018-09-20T16:45:18+08:00 ] ::1 /Dwin/Stock/otherStockInApplyIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0160s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0230s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/otherstockinapplyindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/otherstockinapplyindex','1537433118','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"receipt_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"storage_type\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"storage_division\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"storage_former_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"single_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"single_time\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"storage_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"0\",\"dir\":\"asc\"}],\"start\":\"0\",\"length\":\"25\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"flag\":\"1\"}') [ RunTime:0.1060s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_other_apply` [ RunTime:0.0100s ]
SQL: SELECT COUNT(a.id) AS tp_count FROM crm_stock_in_other_apply a WHERE a.stock_status = 0 AND a.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT a.id,a.apply_id receipt_number,a.source_id,a.type_id storage_type,a.apply_dept_name storage_division,a.create_id,a.create_name single_name,from_unixtime(a.create_time) single_time,a.stock_status storage_status,a.auditor,a.auditor_name,b.sale_number storage_former_number FROM crm_stock_in_other_apply a LEFT JOIN crm_salerecord b ON b.sid = a.source_id  WHERE a.stock_status = 0 AND a.is_del = 0 ORDER BY receipt_number asc LIMIT 0,25   [ RunTime:0.0160s ]
SQL: SELECT COUNT(a.id) AS tp_count FROM crm_stock_in_other_apply a WHERE a.stock_status = 0 AND a.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]

[ 2018-09-20T16:45:20+08:00 ] ::1 /Dwin/Stock/showStockInAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0270s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinauditindex','1537433119','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"type\":\"3\"}') [ RunTime:0.0670s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT a.id,a.stock_in_id,ifnull(task.task_id,'无源单') s_id,a.print_time,a.cate,a.cate_name,`batch`,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,a.production_line_name,a.production_group_name FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 ORDER BY stock_in_id desc LIMIT 0,10   [ RunTime:0.0050s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0110s ]

[ 2018-09-20T16:45:21+08:00 ] ::1 /Dwin/Stock/getStockInDetail
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0230s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/getstockindetail%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0240s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/getstockindetail','1537433121','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"id\":\"0000010157\"}') [ RunTime:0.0690s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_record` [ RunTime:0.0070s ]
SQL: SELECT a.id,a.num,a.status,b.product_id,b.product_no,b.product_name,b.product_number,c.rep_id,c.repertory_name FROM crm_stock_in_record a LEFT JOIN crm_material b ON a.product_id = b.product_id LEFT JOIN crm_repertorylist c ON c.rep_id = a.repertory_id  WHERE a.source_id IN ('0000010157') AND a.is_del = 0  [ RunTime:0.0090s ]

[ 2018-09-20T16:45:24+08:00 ] ::1 /Dwin/Stock/showStockInAuditIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0160s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%stock/showstockinauditindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','stock/showstockinauditindex','1537433124','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"2\",\"columns\":[{\"data\":\"cate_name\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_in_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"batch\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"s_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"create_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"c_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"keep_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"check_name\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"audit_status\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"update_time\",\"name\":\"\",\"searchable\":\"false\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"1\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"type\":\"3\"}') [ RunTime:0.0870s ]
SQL: SHOW COLUMNS FROM `crm_stock_in_production` [ RunTime:0.0070s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT a.id,a.stock_in_id,ifnull(task.task_id,'无源单') s_id,a.print_time,a.cate,a.cate_name,`batch`,a.create_id,a.create_name,from_unixtime(a.create_time) c_time,from_unixtime(a.update_time) update_time,a.tips,a.audit_status,a.keep_id,a.keep_name,a.check_id,a.check_name,a.production_line_name,a.production_group_name FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 ORDER BY stock_in_id desc LIMIT 0,10   [ RunTime:0.0040s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_stock_in_production a LEFT JOIN crm_production_task task ON task.id = a.source_id  WHERE a.is_del = 0 AND a.audit_status = 2 LIMIT 1   [ RunTime:0.0040s ]

[ 2018-09-20T16:47:03+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0210s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0460s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0170s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537433222','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0780s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0190s ]

[ 2018-09-20T16:47:05+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0840s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.1170s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0680s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0160s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433224','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0590s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0210s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0480s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0270s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0320s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.1200s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.2710s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0530s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0160s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0190s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0120s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0050s ]

[ 2018-09-20T16:50:07+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0220s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537433407','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.1490s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0220s ]

[ 2018-09-20T16:50:10+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0260s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433409','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100240\"}') [ RunTime:0.0510s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0150s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100240'  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0070s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100240'  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100240 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0180s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100240'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10036','10038','10042') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0040s ]

[ 2018-09-20T16:52:20+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0210s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537433539','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0870s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0080s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0440s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0100s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0530s ]

[ 2018-09-20T16:52:22+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0160s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433541','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100236\"}') [ RunTime:0.0800s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0130s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100236'  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0120s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100236'  [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10130','10132','10266','10301','10302','10303','10307') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100236 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0090s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100236'  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10043') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0060s ]

[ 2018-09-20T16:53:07+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0490s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0160s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537433587','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0920s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0160s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0190s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0120s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0200s ]

[ 2018-09-20T16:53:10+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0290s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0270s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433589','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100236\"}') [ RunTime:0.0660s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0500s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0200s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0070s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100236'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0210s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0120s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100236'  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10130','10132','10266','10301','10302','10303','10307') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100236 LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0110s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100236'  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10043') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0040s ]

[ 2018-09-20T16:53:36+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0220s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537433615','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0850s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0110s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0140s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0510s ]

[ 2018-09-20T16:53:37+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0060s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433617','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0430s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0180s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0110s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0080s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0160s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0120s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0050s ]

[ 2018-09-20T16:54:11+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0200s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.3140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.2880s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537433651','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0770s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0270s ]

[ 2018-09-20T16:54:13+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433653','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0680s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0080s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0090s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0100s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0200s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0040s ]

[ 2018-09-20T16:54:41+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0130s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537433680','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0890s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0160s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0120s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0440s ]

[ 2018-09-20T16:54:43+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.2220s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433683','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0400s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0090s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0090s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0090s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0100s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0040s ]

[ 2018-09-20T16:55:45+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.003000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0220s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0210s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537433745','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0430s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0120s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0160s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0250s ]

[ 2018-09-20T16:55:46+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.002000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433746','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100240\"}') [ RunTime:0.0730s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0300s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0100s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0100s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100240'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0100s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100240'  [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0180s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100240 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0120s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100240'  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10036','10038','10042') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0040s ]

[ 2018-09-20T16:56:27+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0120s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537433787','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0590s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0100s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0140s ]

[ 2018-09-20T16:56:29+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0060s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0280s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0230s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433788','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100236\"}') [ RunTime:0.0850s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0200s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0140s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100236'  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0150s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100236'  [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10130','10132','10266','10301','10302','10303','10307') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100236 LIMIT 1   [ RunTime:0.0120s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0150s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100236'  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10043') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0060s ]

[ 2018-09-20T16:56:48+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0060s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537433807','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0730s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0140s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.3200s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.4220s ]

[ 2018-09-20T16:56:49+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0170s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0160s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433808','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0840s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0230s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0060s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0020s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0250s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0110s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0080s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0080s ]

[ 2018-09-20T16:57:21+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0730s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537433841','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0740s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0170s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0120s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0160s ]

[ 2018-09-20T16:57:23+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0110s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0100s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0180s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433842','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0730s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0080s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0150s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0080s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0040s ]

[ 2018-09-20T16:57:26+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0100s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0180s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433845','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0670s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0190s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0140s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0130s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0110s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0030s ]

[ 2018-09-20T16:57:42+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0240s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537433862','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0750s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0140s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0020s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0210s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0140s ]

[ 2018-09-20T16:57:44+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433863','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0760s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0350s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0110s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0160s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0040s ]

[ 2018-09-20T16:59:03+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0280s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537433943','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0860s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0250s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0100s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0180s ]

[ 2018-09-20T16:59:05+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0240s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0160s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433945','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100240\"}') [ RunTime:0.0900s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0210s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0110s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.3130s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0110s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100240'  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0060s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100240'  [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100240 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0110s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100240'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10036','10038','10042') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0050s ]

[ 2018-09-20T16:59:14+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433953','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100236\"}') [ RunTime:0.6240s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0120s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100236'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0090s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100236'  [ RunTime:0.0160s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10130','10132','10266','10301','10302','10303','10307') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0060s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100236 LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0110s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100236'  [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10043') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0070s ]

[ 2018-09-20T16:59:51+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.5210s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537433990','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0740s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.3220s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0100s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.3220s ]

[ 2018-09-20T17:01:01+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:3.0772s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0250s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537433996','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0800s ]

[ 2018-09-20T17:01:03+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0190s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0360s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0480s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537434062','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0750s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0180s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0250s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0110s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0450s ]

[ 2018-09-20T17:01:04+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0180s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537434063','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0780s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0190s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0070s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0080s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0090s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0060s ]

[ 2018-09-20T17:01:40+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0200s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0150s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537434100','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0480s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0150s ]

[ 2018-09-20T17:01:42+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0180s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0220s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0200s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537434101','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100240\"}') [ RunTime:0.0590s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0150s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0080s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0280s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0130s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100240'  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0130s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100240'  [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100240 LIMIT 1   [ RunTime:0.0190s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0400s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100240'  [ RunTime:0.0190s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10036','10038','10042') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0200s ]

[ 2018-09-20T17:01:55+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0170s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0400s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0360s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537434115','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0780s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0150s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0170s ]

[ 2018-09-20T17:01:56+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0150s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0240s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537434116','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0740s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0070s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0090s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0070s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0040s ]

[ 2018-09-20T17:02:14+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0330s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0250s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537434134','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0690s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0140s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0140s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0140s ]

[ 2018-09-20T17:02:15+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0120s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537434135','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100240\"}') [ RunTime:0.0810s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0190s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0180s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0310s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0080s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100240'  [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0080s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100240'  [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100240 LIMIT 1   [ RunTime:0.0060s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0080s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100240'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10036','10038','10042') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0050s ]

[ 2018-09-20T17:03:19+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0150s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0020s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0290s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537434199','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0600s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0140s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0180s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0120s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0200s ]

[ 2018-09-20T17:03:21+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001001s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0260s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537434201','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0410s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0100s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0080s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0140s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0110s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0040s ]

[ 2018-09-20T17:03:24+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0090s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0080s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537434204','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100214\"}') [ RunTime:0.0820s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0080s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100214'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('110312','109401') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0070s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100214'  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10104','10105','10106','10107','10108','10109','10110','10111','10112','10126','10128','10129','10264','10265','10308','10309','10310') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100214 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0090s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100214'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10051','10087') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0030s ]

[ 2018-09-20T17:03:25+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537434205','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0760s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0070s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0080s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0080s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0070s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0050s ]

[ 2018-09-20T17:03:29+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002001s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0060s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0240s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537434208','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100236\"}') [ RunTime:0.0850s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0080s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0140s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100236'  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0110s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100236'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10130','10132','10266','10301','10302','10303','10307') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100236 LIMIT 1   [ RunTime:0.0090s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0090s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100236'  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10043') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0040s ]

[ 2018-09-20T17:04:09+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0150s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537434249','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0770s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0130s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0030s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0290s ]

[ 2018-09-20T17:04:10+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0180s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0070s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537434250','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0730s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0120s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0130s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0080s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0120s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0090s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0260s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0090s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0080s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0100s ]

[ 2018-09-20T17:04:24+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.1630s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0590s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0200s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0170s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0140s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537434264','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0600s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0100s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0100s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0370s ]

[ 2018-09-20T17:04:25+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0070s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0140s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0090s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537434265','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100214\"}') [ RunTime:0.0650s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0150s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0070s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100214'  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('110312','109401') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0090s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100214'  [ RunTime:0.0090s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10104','10105','10106','10107','10108','10109','10110','10111','10112','10126','10128','10129','10264','10265','10308','10309','10310') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0160s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100214 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0070s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100214'  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10051','10087') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0040s ]

[ 2018-09-20T17:04:55+08:00 ] ::1 /Dwin/Production/productionOrderIndex
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0080s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0090s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0100s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0280s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/productionorderindex%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.1850s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/productionorderindex','1537434295','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"draw\":\"1\",\"columns\":[{\"data\":\"production_code\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_line\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"product_no\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"bom_id\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"plan_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_out_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assign_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"in_stock_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"start_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"end_t\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"remaining_day\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"assigned_number\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"need_assign_num\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"stock_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_progress\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"production_status\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}},{\"data\":\"tips\",\"name\":\"\",\"searchable\":\"true\",\"orderable\":\"true\",\"search\":{\"value\":\"\",\"regex\":\"false\"}}],\"order\":[{\"column\":\"7\",\"dir\":\"desc\"}],\"start\":\"0\",\"length\":\"10\",\"search\":{\"value\":\"\",\"regex\":\"false\"},\"lineLimit\":\"\",\"statusLimit\":\"\",\"status\":\"\"}') [ RunTime:0.0750s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0080s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0070s ]
SQL: SELECT COUNT(*) AS tp_count FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN crm_material_bom bom ON bom.id = ord.bom_pid  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 LIMIT 1   [ RunTime:0.0040s ]
SQL: SELECT ord.id,from_unixtime(ord.create_time) create_t,ord.production_code,material.product_no,material.product_id,bom.bom_id,material.product_name,line.production_line,ord.production_type,from_unixtime(ord.plan_start_time,'%Y-%m-%d') start_t,from_unixtime(ord.plan_end_time,'%Y-%m-%d') end_t,ord.production_status,ord.plan_number,sum(ifnull(task.task_number,0)) assign_number,ord.actual_end_time,ifnull(ord.tips,'无') tips,ord.create_id,ord.create_name,ord.stock_status,(round((ord.plan_end_time - 1537372800) /86400)) remaining_day,sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end) assigned_number,round((case when ord.plan_end_time < 1537372800 then round(ord.plan_number - sum(ifnull(task.task_number,0))) when ord.plan_start_time > 1537372800 then 0 else (case when (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end))) > (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end)) then (ord.plan_number/((case when (ord.plan_end_time - 1537372800) > 0 then (ord.plan_end_time - 1537372800)/86400 else 1 end)) - (sum(case when task.task_start_time = 1537372800 then task.task_number else 0 end))) else 0 end) end)) need_assign_num,sum(task.nums) in_stock_num,`production_progress`,round((ifnull(produce.out_num,0))/(bom.bom_num)) stock_out_num,bom.bom_num,sum(produce.out_num),produce.out_num,group_concat(produce.source_id),group_concat(produce.out_num),ord.audit_status FROM crm_production_order ord LEFT JOIN crm_material material on material.product_id  = ord.product_id LEFT JOIN crm_production_line line ON line.id = ord.production_line LEFT JOIN  
                        (select mb.*,sum(mbs.num) bom_num 
                            from crm_material_bom mb 
                            LEFT JOIN crm_material_bom_sub mbs 
                                ON (mbs.bom_pid = mb.id and mbs.is_del = 0)
                            group by mb.id) 
                            bom 
                        ON bom.id = ord.bom_pid LEFT JOIN 
                        (select t.*,sum(sip.num_s) nums
                            from crm_production_task t
                         left join 
                            (select a.is_del,a.source_id,sum(ifnull(b.num,0)) num_s 
                                 from crm_stock_in_production a
                             left join crm_stock_in_record b 
                                 on (b.source_id = a.id and b.is_del = 0)
                             group by a.id) sip on sip.source_id = t.id and sip.is_del = 0 group by t.id)  task ON (task.order_pid = ord.id and task.is_del = 0) LEFT JOIN 
                        (select sop.source_id,sop.is_del,sum(ifnull(sor.num,0)) out_num 
                            from crm_stock_out_produce sop 
                            left join crm_stock_out_record sor 
                                on (sop.id = sor.source_id and sor.is_del = 0)
                            where sop.is_del = 0 
                            group by sop.source_id,sop.is_del)
                         produce ON produce.source_id = ord.id and produce.is_del = 0  WHERE ord.audit_status = '' AND ord.production_line IN ('1','2','3') AND ord.production_status IN ('0','1','2') AND ord.is_del = 0 GROUP BY ord.id ORDER BY in_stock_num desc LIMIT 0,10   [ RunTime:0.0230s ]

[ 2018-09-20T17:04:57+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0070s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0790s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.1020s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0150s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537434296','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100240\"}') [ RunTime:0.0910s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0520s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0070s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0160s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0070s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100240'  [ RunTime:0.0370s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0100s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100240'  [ RunTime:0.0140s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0090s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100240 LIMIT 1   [ RunTime:0.0080s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0070s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100240'  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10036','10038','10042') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0050s ]

[ 2018-09-20T17:05:00+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.002000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0130s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0140s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0190s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0240s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0200s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537434300','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100236\"}') [ RunTime:0.0700s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0310s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0220s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0110s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.1280s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100236'  [ RunTime:0.0060s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0100s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0100s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100236'  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10130','10132','10266','10301','10302','10303','10307') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0560s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100236 LIMIT 1   [ RunTime:0.0380s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0750s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0640s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100236'  [ RunTime:0.0420s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10043') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0430s ]

[ 2018-09-20T17:05:03+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.000000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0150s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0110s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0320s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0100s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537434303','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100239\"}') [ RunTime:0.0730s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0120s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0240s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0150s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('109855') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0280s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0080s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100239'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10304','10305','10306') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0050s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0130s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100239 LIMIT 1   [ RunTime:0.0560s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0060s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0110s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100239'  [ RunTime:0.0050s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10057','10058') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0090s ]

[ 2018-09-20T17:05:07+08:00 ] ::1 /Dwin/production/getRelationDataWithOrderId
INFO: [ app_begin ] --START--
INFO: Run Behavior\ReadHtmlCacheBehavior [ RunTime:0.001000s ]
INFO: [ app_begin ] --END-- [ RunTime:0.001000s ]
SQL: SHOW COLUMNS FROM `crm_system` [ RunTime:0.0090s ]
SQL: SELECT `timelimit` FROM `crm_system` WHERE `id` = 1 LIMIT 1   [ RunTime:0.0250s ]
SQL: SHOW COLUMNS FROM `crm_auth_rule` [ RunTime:0.0080s ]
SQL: SELECT `rule_string` FROM `crm_auth_rule` WHERE `auth_id` IN ('264','265','266','267','268','269','195','181','182','183','184','185','186','187','188','189','190','191','192','193','194','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23','24','25','26','27','28','29','30','31','32','33','34','35','36','37','38','39','40','41','42','43','44','45','46','47','48','49','50','51','52','53','54','55','56','57','58','59','60','61','62','63','64','65','66','67','68','69','70','71','72','73','74','75','76','77','78','79','80','81','82','83','84','85','86','87','88','89','90','91','92','93','94','95','96','97','98','99','100','101','102','103','104','105','106','107','108','109','110','111','112','113','114','115','116','117','118','119','120','121','122','123','124','125','126','127','128','129','130','131','132','133','134','135','136','137','138','139','140','141','142','143','144','145','146','147','148','149','150','151','152','153','154','155','156','157','158','159','160','161','162','163','164','165','166','167','168','169','170','171','172','173','174','175','176','177','178','180','200','201','202','203','207','208','211','212','213','216','221','222','206','209','210','214','218','219','229','231','215','217','220','232','226','227','228','230','223','224','225','238','239','240','241','244','179','245','247','248','249','252','254','255','257','258','260','261','263','270','271')  [ RunTime:0.0160s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT rule_name auth_rule_name,log_level level FROM `crm_auth_rule` WHERE `rule_string` LIKE '%production/getrelationdatawithorderid%' ORDER BY log_level desc LIMIT 1   [ RunTime:0.0030s ]
SQL: SHOW COLUMNS FROM `crm_stafflog` [ RunTime:0.0110s ]
SQL: INSERT INTO `crm_stafflog` (`staffid`,`remote_addr`,`request_uri`,`request_time`,`user_agent`,`request_method`,`request_info`) VALUES ('394','::1','production/getrelationdatawithorderid','1537434307','Mozilla/5.0 (Windows NT 6.1; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/68.0.3440.106 Safari/537.36','POST','{\"productionOrderId\":\"100214\"}') [ RunTime:0.0760s ]
SQL: SHOW COLUMNS FROM `crm_production_line` [ RunTime:0.0110s ]
SQL: SELECT * FROM `crm_production_line` WHERE ( pid = 0 and is_del = 0 )  [ RunTime:0.0130s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0170s ]
SQL: SHOW COLUMNS FROM `crm_production_plan` [ RunTime:0.0220s ]
SQL: SHOW COLUMNS FROM `crm_production_task` [ RunTime:0.0130s ]
SQL: SHOW COLUMNS FROM `crm_material_bom_sub` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_record` [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_relation` [ RunTime:0.0070s ]
SQL: SELECT production_plan_id plan_id FROM `crm_production_relation` WHERE `production_order_id` = '100214'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT plan.id,plan.production_order,plan.staff_name,plan.stock_cate,plan.stock_cate_name,plan.product_id,product.product_no,plan.product_name,plan.production_line_name,plan.production_plan_number,plan.production_line,plan.production_number,from_unixtime(plan.create_time,'%y-%m-%d') create_time,from_unixtime(plan.delivery_time,'%y-%m-%d') delivery_time,plan.production_status,ifnull(plan.tips,'无') tips,plan.delivery_time yqts,if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) actual_number,production_plan_number - if(sum(ifnull(ord.plan_number,0))>production_plan_number,`production_plan_number`,sum(ifnull(ord.plan_number,0))) rest_num,plan.scheduled_status FROM crm_production_plan plan LEFT JOIN crm_stock as stock on plan.product_id = stock.product_id LEFT JOIN crm_material as product on plan.product_id = product.product_id LEFT JOIN crm_production_relation rel ON rel.production_plan_id = plan.id LEFT JOIN crm_production_order ord ON ord.id = rel.production_order_id and ord.is_del = 0  WHERE plan.id IN ('110312','109401') AND plan.is_del = 0 GROUP BY plan.id ORDER BY plan.id desc LIMIT 0,100   [ RunTime:0.0080s ]
SQL: SHOW COLUMNS FROM `crm_production_task_relation` [ RunTime:0.0090s ]
SQL: SELECT `task_id` FROM `crm_production_task_relation` WHERE `order_id` = '100214'  [ RunTime:0.0030s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT order.production_code,task.product_id,task.product_no,line.production_line group_name,task.task_id,task.task_number,from_unixtime(task.task_start_time) start_t,from_unixtime(task.task_end_time) end_t,sum(ifnull(rec.num,0)) complete_quantity,from_unixtime(task.actual_end_time) actual_t FROM crm_production_task task LEFT JOIN crm_production_line line ON line.id = task.task_group LEFT JOIN crm_production_order `order` ON `order`.id = task.order_pid LEFT JOIN crm_stock_in_production sip ON sip.source_id = task.id LEFT JOIN crm_stock_in_record rec ON (rec.source_id = sip.id AND rec.product_id = task.product_id)  WHERE task.id IN ('10104','10105','10106','10107','10108','10109','10110','10111','10112','10126','10128','10129','10264','10265','10308','10309','10310') AND task.is_del = 0 GROUP BY task.id  [ RunTime:0.0070s ]
SQL: SHOW COLUMNS FROM `crm_production_order` [ RunTime:0.0170s ]
SQL: SELECT * FROM `crm_production_order` WHERE `id` = 100214 LIMIT 1   [ RunTime:0.0050s ]
SQL: SELECT a.*,bom.bom_id,bom.bom_type_name bom_cate,bom.product_no production_product,group_concat(sub.substituted_no) substituted_no,if (count(sub.id),1,0) has_sub FROM crm_material_bom_sub a LEFT JOIN crm_material_bom bom ON bom.id = a.bom_pid LEFT JOIN (SELECT a.*,b.product_no substituted_no from crm_material_substitute a LEFT JOIN crm_material b ON a.substituted_id = b.product_id) sub ON sub.product_id = a.product_id and sub.is_del = 0  WHERE a.bom_pid = '60001' AND a.is_del = 0 GROUP BY a.id  [ RunTime:0.0040s ]
SQL: SHOW COLUMNS FROM `crm_stock_out_produce` [ RunTime:0.0130s ]
SQL: SELECT `id` FROM `crm_stock_out_produce` WHERE `source_id` = '100214'  [ RunTime:0.0040s ]
NOTIC: [8] Undefined variable: proId F:\dwin\phpStudy\WWW\trunk\2-ProductDoc\CRM\Dwin\Common\function.php 第 52 行.
SQL: SELECT a.product_id,a.product_no,c.product_name,a.repertory_id rep_id_out,'K20' rep_id_in,d.stock_number stock_total_number,sum(a.num) num_all,count(distinct b.id) times FROM crm_stock_out_record a LEFT JOIN crm_stock_out_produce b ON a.source_id = b.id LEFT JOIN crm_material c ON a.product_id = c.product_id LEFT JOIN crm_stock d ON d.product_id = a.product_id and d.warehouse_number = a.repertory_id  WHERE a.source_id IN ('10051','10087') AND a.is_del = 0 GROUP BY a.product_id,a.repertory_id  [ RunTime:0.0100s ]

